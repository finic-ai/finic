{"version":3,"sources":["webpack:///./src/ui/src/components/MathSymbolsPicker/MathSymbolsPicker.scss?8f9e","webpack:///./src/ui/src/components/MathSymbolsPicker/MathSymbolsPicker.scss","webpack:///./src/ui/src/components/RichTextPopup/RichTextPopup.scss?515d","webpack:///./src/ui/src/components/RichTextPopup/RichTextPopup.scss","webpack:///./src/ui/src/helpers/getRichTextPopupPosition.js","webpack:///./src/ui/src/components/MathSymbolsPicker/MathSymbolsPicker.js","webpack:///./src/ui/src/components/MathSymbolsPicker/index.js","webpack:///./src/ui/src/components/RichTextPopup/RichTextPopup.js","webpack:///./src/ui/src/components/RichTextPopup/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","webComponents","document","getElementsByTagName","length","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","forEach","styleNode","innerHTML","cloneNode","push","head","exports","locals","annotation","popup","current","editorContainer","getRootNode","querySelector","PageNumber","Id","scrollContainer","core","getScrollViewElement","padding","parseFloat","StrokeThickness","getZoom","cBox","getBoundingClientRect","cInfo","topLeft","x","left","scrollLeft","y","top","scrollTop","bottomRight","right","bottom","pBox","calcPopupLeft","calcPopupTop","symbols","MathSymbolsPicker","onClickHandler","maxHeight","className","style","map","symbol","key","onClick","RichTextPopup","editor","useSelector","state","selectors","isElementDisabled","DataElements","RICH_TEXT_POPUP","isElementOpen","getCustomColors","isInDesktopOnlyMode","STYLE_POPUP_TEXT_STYLE_CONTAINER","STYLE_POPUP_COLORS_CONTAINER","getFonts","LEGACY_RICH_TEXT_POPUP","shallowEqual","isDisabled","isOpen","isPaletteDisabled","customColors","isTextStylePickerOpen","isColorPickerOpen","fonts","legacyPopup","useState","symbolsVisible","setSymbolsVisible","cssPosition","setCssPosition","draggablePosition","setDraggablePosition","format","setFormat","popupRef","useRef","editorRef","annotationRef","propertiesRef","dispatch","useDispatch","oldSelectionRef","useEffect","actions","disableElements","ANNOTATION_STYLE_POPUP","enableElements","handleSelectionChange","range","getFormat","handleTextChange","isAutoSized","position","getRichTextPopupPosition","getSelection","addEventListener","removeEventListener","StrokeStyle","err","console","error","richTextStyles","getRichTextStyle","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","includes","strikeout","setSelection","handleEditorBlur","closeElements","useLayoutEffect","index","color","window","Core","Annotations","Color","Array","isArray","lastSelectedColor","TextColor","handleTextFormatChange","selectAll","newSelection","currentFormat","applyFormat","handleColorChange","_","toHexString","formatKey","value","syncDraggablePosition","e","menuItems","toggleMenuItem","dataElement","closeElement","openElement","openTextStyle","openColors","strike","isMobile","onDrag","onStop","enableUserSelectHack","cancel","onMouseDown","type","preventDefault","classNames","Popup","open","closed","legacy","ref","data-element","Element","Button","isActive","img","title","HorizontalDivider","paddingTop","onTouchStart","role","i18next","t","Icon","glyph","TextStylePicker","onPropertyChange","property","blur","setTimeout","getAnnotationManager","getEditBoxManager","focusBox","onRichTextStyleChange","properties","stateless","ColorPalette","colorMapKey","onStyleChange","hasPadding","ColorPalettePicker","enableEdit","deleteText","insertText","React","memo"],"mappings":"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","file":"chunks/27.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MathSymbolsPicker.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.mathSymbolsContainer{display:flex;flex-wrap:wrap;overflow-y:auto;display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:5px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.mathSymbolsContainer{width:196px}}.mathSymbolsContainer.padding{padding:4px 20px 8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer{max-width:450px;width:auto}}@media(max-width:640px)and (-ms-high-contrast:active),(max-width:640px)and (-ms-high-contrast:none){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer{width:308px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer{max-width:450px;width:auto}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer{width:308px}}}.mathSymbolsContainer .cell-container{padding:0;border:none;background-color:transparent;flex:1 0 14%;cursor:pointer;border-radius:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center}:host(:not([data-tabbing=true])) .mathSymbolsContainer .cell-container,html:not([data-tabbing=true]) .mathSymbolsContainer .cell-container{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer .cell-container{width:44px;height:44px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer .cell-container{width:44px;height:44px}}.mathSymbolsContainer .cell-container:hover{background:var(--popup-button-hover)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./RichTextPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".open.RichTextPopup{visibility:visible}.closed.RichTextPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.RichTextPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.RichTextPopup:empty{padding:0}.RichTextPopup .buttons{display:flex}.RichTextPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextPopup .Button{width:42px;height:42px}}.RichTextPopup .Button:hover{background:var(--popup-button-hover)}.RichTextPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextPopup .Button .Icon{width:24px;height:24px}}.is-vertical.RichTextPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-left:var(--padding-small);padding-right:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.RichTextPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.RichTextPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.RichTextPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.RichTextPopup .Button.main-menu-button .Icon{margin-right:10px}.is-vertical.RichTextPopup .Button.main-menu-button span{white-space:nowrap}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.RichTextPopup{overflow:visible;flex-direction:column;background:var(--component-background);border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);width:220px;padding:6px 12px;align-items:flex-start}.RichTextPopup.legacy{padding:0;width:auto;align-items:center}.RichTextPopup.legacy .ColorPalette.padding{padding:4px 12px 8px}.RichTextPopup.legacy .colorPicker{padding:0 12px 8px}.RichTextPopup .rich-text-format-legacy{display:flex;width:100%;justify-content:center}.RichTextPopup .ColorPalette.padding{padding:0}.RichTextPopup .menu-items{width:100%;padding:6px 4px}.RichTextPopup .collapsible-menu{width:100%;display:flex;cursor:pointer;align-items:center;justify-content:space-between}.RichTextPopup .collapsible-menu .menu-title{padding-left:4px;padding-top:6px;padding-bottom:6px;font-weight:700;font-size:14px}.RichTextPopup .collapsible-menu .Icon{height:18px;width:18px}.RichTextPopup .divider{background-color:var(--divider);width:100%;height:1px;margin:6px 0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import { calcPopupLeft, calcPopupTop } from 'helpers/getPopupPosition';\r\nimport core from 'core';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nexport default (annotation, popup) => {\r\n  if (!popup || !popup.current) {\r\n    return;\r\n  }\r\n  const editorContainer = getRootNode().querySelector(\r\n    `#pageWidgetContainer${annotation.PageNumber} [id=\"freetext-editor-${annotation.Id}\"]`\r\n  );\r\n  const scrollContainer = core.getScrollViewElement();\r\n  const padding = 2 * parseFloat(annotation.StrokeThickness) * core.getZoom();\r\n  const cBox = editorContainer.getBoundingClientRect();\r\n  const cInfo = {\r\n    topLeft: {\r\n      x: cBox.left + scrollContainer.scrollLeft - padding,\r\n      y: cBox.top + scrollContainer.scrollTop - padding\r\n    },\r\n    bottomRight: {\r\n      x: cBox.right + scrollContainer.scrollLeft + padding,\r\n      y: cBox.bottom + scrollContainer.scrollTop + padding\r\n    }\r\n  };\r\n  const pBox = popup.current.getBoundingClientRect();\r\n  return {\r\n    left: calcPopupLeft(cInfo, pBox),\r\n    top: calcPopupTop(cInfo, pBox)\r\n  };\r\n};\r\n","import React from 'react';\n\nimport './MathSymbolsPicker.scss';\n\nconst symbols = [\n  '\\u002B',\n  '\\u2212',\n  '\\u00D7',\n  '\\u00F7',\n  '\\u003D',\n  '\\u2260',\n  '\\u00B1',\n  '\\u00AC',\n  '\\u003C',\n  '\\u003E',\n  '\\u22DC',\n  '\\u22DD',\n  '\\u00B0',\n  '\\u00B9',\n  '\\u00B2',\n  '\\u00B3',\n  '\\u0192',\n  '\\u0025',\n  '\\u2030',\n  '\\u2031',\n  '\\u2200',\n  '\\u2201',\n  '\\u2202',\n  '\\u2203',\n  '\\u2204',\n  '\\u2205',\n  '\\u2206',\n  '\\u2207',\n  '\\u2208',\n  '\\u2209',\n  '\\u220A',\n  '\\u220B',\n  '\\u220C',\n  '\\u220D',\n  '\\u220E',\n  '\\u220F',\n  '\\u2210',\n  '\\u2211',\n  '\\u2213',\n  '\\u2214',\n  '\\u2215',\n  '\\u2216',\n  '\\u2217',\n  '\\u2218',\n  '\\u2219',\n  '\\u221A',\n  '\\u221B',\n  '\\u221C',\n  '\\u221D',\n  '\\u221E',\n  '\\u221F',\n  '\\u2220',\n  '\\u2221',\n  '\\u2222',\n  '\\u2223',\n  '\\u2224',\n  '\\u2225',\n  '\\u2226',\n  '\\u2227',\n  '\\u2228',\n  '\\u2229',\n  '\\u222A',\n  '\\u222B',\n  '\\u222C',\n  '\\u222D',\n  '\\u222E',\n  '\\u222F',\n  '\\u2230',\n  '\\u2231',\n  '\\u2232',\n  '\\u2233',\n  '\\u2234',\n  '\\u2235',\n  '\\u2236',\n  '\\u2237',\n  '\\u2238',\n  '\\u2239',\n  '\\u223A',\n  '\\u223B',\n  '\\u223C',\n  '\\u223D',\n  '\\u223E',\n  '\\u223F',\n  '\\u2240',\n  '\\u2241',\n  '\\u2242',\n  '\\u2243',\n  '\\u2244',\n  '\\u2245',\n  '\\u2246',\n  '\\u2247',\n  '\\u2248',\n  '\\u2249',\n  '\\u224A',\n  '\\u224B',\n  '\\u224C'\n];\n\nconst MathSymbolsPicker = ({ onClickHandler, maxHeight }) => {\n  return (\n    <div\n      className=\"mathSymbolsContainer padding\"\n      style={{ maxHeight: `${maxHeight}px` }}\n    >\n      {symbols.map((symbol, i) => (\n        <button\n          key={i}\n          className=\"cell-container\"\n          onClick={() => {\n            onClickHandler(symbol);\n          }}\n        >\n          {symbol}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default MathSymbolsPicker;","import MathSymbolsPicker from './MathSymbolsPicker';\n\nexport default MathSymbolsPicker;","import React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\r\nimport Draggable from 'react-draggable';\r\nimport classNames from 'classnames';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\n\r\nimport Element from 'components/Element';\r\nimport ColorPalette from 'components/ColorPalette';\r\nimport Button from 'components/Button';\r\nimport HorizontalDivider from 'components/HorizontalDivider';\r\nimport { isMobile } from 'helpers/device';\r\nimport core from 'core';\r\nimport getRichTextPopupPosition from 'helpers/getRichTextPopupPosition';\r\nimport MathSymbolsPicker from '../MathSymbolsPicker';\r\nimport ColorPalettePicker from 'components/ColorPalettePicker';\r\n\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\n\r\nimport './RichTextPopup.scss';\r\nimport DataElements from 'constants/dataElement';\r\nimport i18next from 'i18next';\r\nimport Icon from 'components/Icon';\r\nimport TextStylePicker from 'components/TextStylePicker';\r\n\r\nconst RichTextPopup = ({ annotation, editor }) => {\r\n  const [\r\n    isDisabled,\r\n    isOpen,\r\n    isPaletteDisabled,\r\n    customColors,\r\n    isInDesktopOnlyMode,\r\n    isTextStylePickerOpen,\r\n    isColorPickerOpen,\r\n    fonts,\r\n    legacyPopup,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.isElementDisabled(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementOpen(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementDisabled(state, 'colorPalette'),\r\n      selectors.getCustomColors(state, 'customColors'),\r\n      selectors.isInDesktopOnlyMode(state),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_COLORS_CONTAINER),\r\n      selectors.getFonts(state),\r\n      !selectors.isElementDisabled(state, DataElements.LEGACY_RICH_TEXT_POPUP),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n  const [symbolsVisible, setSymbolsVisible] = useState(false);\r\n  const [cssPosition, setCssPosition] = useState({ left: 0, top: 0 });\r\n  const [draggablePosition, setDraggablePosition] = useState({ x: 0, y: 0 });\r\n  const [format, setFormat] = useState({});\r\n  const popupRef = useRef(null);\r\n  const editorRef = useRef(null);\r\n  const annotationRef = useRef(null);\r\n  const propertiesRef = useRef({});\r\n  const dispatch = useDispatch();\r\n  const oldSelectionRef = useRef();\r\n  const symbolsAreaHeight = 150; // max height for the math symbols area\r\n\r\n  useEffect(() => {\r\n    // Have to disable instead of closing because annotation popup will reopen itself\r\n    dispatch(actions.disableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    return () => {\r\n      dispatch(actions.enableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleSelectionChange = (range) => {\r\n      if (range && editorRef.current) {\r\n        setFormat(getFormat(range));\r\n      }\r\n    };\r\n    const handleTextChange = () => {\r\n      if (annotationRef.current?.isAutoSized() && popupRef.current) {\r\n        const position = getRichTextPopupPosition(\r\n          annotationRef.current,\r\n          popupRef,\r\n        );\r\n        setCssPosition(position);\r\n      }\r\n\r\n      setFormat(getFormat(editorRef.current?.getSelection()));\r\n    };\r\n    core.addEventListener('editorSelectionChanged', handleSelectionChange);\r\n    core.addEventListener('editorTextChanged', handleTextChange);\r\n    return () => {\r\n      core.removeEventListener('editorSelectionChanged', handleSelectionChange);\r\n      core.removeEventListener('editorTextChanged', handleTextChange);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // when the editor is focused, we want to reset any previous drag movements so that\r\n    // the popup will be positioned centered to the editor\r\n    setDraggablePosition({ x: 0, y: 0 });\r\n\r\n    editorRef.current = editor;\r\n    annotationRef.current = annotation;\r\n    let StrokeStyle = 'solid';\r\n    try {\r\n      StrokeStyle = (annotation['Style'] === 'dash')\r\n        ? `${annotation['Style']},${annotation['Dashes']}`\r\n        : annotation['Style'];\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    const richTextStyles = annotation.getRichTextStyle();\r\n    propertiesRef.current = {\r\n      Font: annotation.Font,\r\n      FontSize: annotation.FontSize,\r\n      TextAlign: annotation.TextAlign,\r\n      TextVerticalAlign: annotation.TextVerticalAlign,\r\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\r\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\r\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\r\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\r\n      StrokeStyle,\r\n    };\r\n\r\n    setFormat(getFormat(editorRef.current?.getSelection()));\r\n\r\n    if (oldSelectionRef.current) {\r\n      editorRef.current.setSelection(oldSelectionRef.current);\r\n      oldSelectionRef.current = null;\r\n    }\r\n  }, [annotation, editor]);\r\n\r\n  useEffect(() => {\r\n    const handleEditorBlur = () => {\r\n      dispatch(actions.closeElements([DataElements.RICH_TEXT_POPUP]));\r\n      editorRef.current = null;\r\n      annotationRef.current = null;\r\n    };\r\n    core.addEventListener('editorBlur', handleEditorBlur);\r\n    return () => {\r\n      core.removeEventListener('editorBlur', handleEditorBlur);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // useLayoutEffect so the popup can adjust position smoothly without flashing\r\n  useLayoutEffect(() => {\r\n    if (popupRef.current) {\r\n      const position = getRichTextPopupPosition(\r\n        annotation,\r\n        popupRef,\r\n      );\r\n      setCssPosition(position);\r\n    }\r\n    // The popup position should be updated when the math symbols are visible or hidden\r\n  }, [annotation, symbolsVisible]);\r\n\r\n  const getFormat = (range) => {\r\n    if (!range) {\r\n      return {};\r\n    }\r\n\r\n    const format = editorRef.current.getFormat(range.index, range.length);\r\n\r\n    if (typeof format.color === 'string') {\r\n      format.color = new window.Core.Annotations.Color(format.color);\r\n    } else if (Array.isArray(format.color)) {\r\n      // the selection contains multiple color, so we set the current color to the last selected color\r\n      const lastSelectedColor = new window.Core.Annotations.Color(format.color[format.color.length - 1]);\r\n      format.color = lastSelectedColor;\r\n    } else if (!format.color) {\r\n      format.color = annotationRef.current.TextColor;\r\n    }\r\n\r\n    return format;\r\n  };\r\n\r\n  const handleTextFormatChange = (format) => () => {\r\n    let { index, length } = editorRef.current.getSelection();\r\n    if (length === 0) {\r\n      oldSelectionRef.current = { index, length };\r\n      editorRef.current.selectAll();\r\n      const newSelection = editorRef.current.getSelection();\r\n      index = newSelection.index;\r\n      length = newSelection.length;\r\n    }\r\n    const currentFormat = editorRef.current.getFormat(index, length);\r\n\r\n    applyFormat(format, !currentFormat[format]);\r\n  };\r\n\r\n  const handleSymbolsClick = () => {\r\n    setSymbolsVisible(!symbolsVisible);\r\n  };\r\n\r\n  const handleColorChange = (_, color) => {\r\n    applyFormat('color', color.toHexString());\r\n  };\r\n\r\n  const applyFormat = (formatKey, value) => {\r\n    editorRef.current?.format(formatKey, value);\r\n\r\n    if (formatKey === 'color') {\r\n      value = new window.Core.Annotations.Color(value);\r\n    }\r\n\r\n    // format the entire editor doesn't trigger the editorTextChanged event, so we set the format state here\r\n    setFormat({\r\n      ...format,\r\n      [formatKey]: value\r\n    });\r\n\r\n    if (oldSelectionRef.current !== null) {\r\n      editorRef.current.setSelection(oldSelectionRef.current, 0);\r\n      oldSelectionRef.current = null;\r\n    }\r\n  };\r\n\r\n  const syncDraggablePosition = (e, { x, y }) => {\r\n    setDraggablePosition({ x, y });\r\n  };\r\n\r\n  const insertSymbols = (symbol) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    // if user selected some text, then we want to first delete the selected content\r\n    if (length > 0) {\r\n      editorRef.current.deleteText(index, length);\r\n    }\r\n    // insert symbol at the selected index\r\n    editorRef.current.insertText(index, symbol);\r\n    editorRef.current.setSelection(index + 1);\r\n  };\r\n\r\n  const menuItems = {\r\n    [DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER]: isTextStylePickerOpen,\r\n    [DataElements.STYLE_POPUP_COLORS_CONTAINER]: isColorPickerOpen,\r\n  };\r\n  const toggleMenuItem = (dataElement) => {\r\n    if (!menuItems[dataElement]) {\r\n      dispatch(actions.openElement(dataElement));\r\n    } else {\r\n      dispatch(actions.closeElement(dataElement));\r\n    }\r\n  };\r\n  const openTextStyle = () => toggleMenuItem(DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER);\r\n  const openColors = () => toggleMenuItem(DataElements.STYLE_POPUP_COLORS_CONTAINER);\r\n\r\n  const onPropertyChange = (property, value) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    const annotation = annotationRef.current;\r\n    annotation[property] = value;\r\n    editorRef.current.blur();\r\n    setTimeout(() => {\r\n      oldSelectionRef.current = { index, length };\r\n      const editBoxManager = core.getAnnotationManager().getEditBoxManager();\r\n      editBoxManager.focusBox(annotation);\r\n    }, 0);\r\n  };\r\n\r\n  const onRichTextStyleChange = (property) => {\r\n    const propertyTranslation = {\r\n      'font-weight': 'bold',\r\n      'font-style': 'italic',\r\n      'underline': 'underline',\r\n      'line-through': 'strike',\r\n    };\r\n    handleTextFormatChange(propertyTranslation[property])();\r\n  };\r\n\r\n  propertiesRef.current.bold = format.bold;\r\n  propertiesRef.current.italic = format.italic;\r\n  propertiesRef.current.underline = format.underline;\r\n  propertiesRef.current.strikeout = format.strike;\r\n\r\n  // TODO for now don't show it in mobile\r\n  return isDisabled || (isMobile() && !isInDesktopOnlyMode) ? null : (\r\n    <Draggable\r\n      position={draggablePosition}\r\n      onDrag={syncDraggablePosition}\r\n      onStop={syncDraggablePosition}\r\n      enableUserSelectHack={false}\r\n      // don't allow drag when clicking on a button element or a color cell\r\n      cancel=\".Button, .cell, .mathSymbolsContainer, .Dropdown, .Dropdown__item\"\r\n      // prevent the blur event from being triggered when clicking on toolbar buttons\r\n      // otherwise we can't style the text since a blur event is triggered before a click event\r\n      onMouseDown={(e) => {\r\n        if (e.type !== 'touchstart') {\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n    >\r\n      <div\r\n        className={classNames({\r\n          Popup: true,\r\n          RichTextPopup: true,\r\n          open: isOpen,\r\n          closed: !isOpen,\r\n          legacy: legacyPopup,\r\n        })}\r\n        ref={popupRef}\r\n        data-element={DataElements.RICH_TEXT_POPUP}\r\n        style={{ ...cssPosition }}\r\n      >\r\n        {\r\n          legacyPopup ? (<>\r\n            <Element className=\"rich-text-format-legacy\" dataElement=\"richTextFormats\">\r\n              <Button\r\n                isActive={format.bold}\r\n                dataElement=\"richTextBoldButton\"\r\n                onClick={handleTextFormatChange('bold')}\r\n                img=\"icon-text-bold\"\r\n                title=\"option.richText.bold\"\r\n              />\r\n              <Button\r\n                isActive={format.italic}\r\n                dataElement=\"richTextItalicButton\"\r\n                onClick={handleTextFormatChange('italic')}\r\n                img=\"icon-text-italic\"\r\n                title=\"option.richText.italic\"\r\n              />\r\n              <Button\r\n                isActive={format.underline}\r\n                dataElement=\"richTextUnderlineButton\"\r\n                onClick={handleTextFormatChange('underline')}\r\n                img=\"ic_annotation_underline_black_24px\"\r\n                title=\"option.richText.underline\"\r\n              />\r\n              <Button\r\n                isActive={format.strike}\r\n                dataElement=\"richTextStrikeButton\"\r\n                onClick={handleTextFormatChange('strike')}\r\n                img=\"ic_annotation_strikeout_black_24px\"\r\n                title=\"option.richText.strikeout\"\r\n              />\r\n              <Button\r\n                dataElement=\"mathSymbolsButton\"\r\n                onClick={handleSymbolsClick}\r\n                img=\"ic_thumbnails_grid_black_24px\"\r\n                title=\"option.mathSymbols\"\r\n              />\r\n            </Element>\r\n            <HorizontalDivider style={{ paddingTop: 0 }} />\r\n          </>) :\r\n            (<>\r\n              <div className=\"collapsible-menu\" onClick={openTextStyle} onTouchStart={openTextStyle} role={'toolbar'}>\r\n                <div className=\"menu-title\">\r\n                  {i18next.t('option.stylePopup.textStyle')}\r\n                </div>\r\n                <Icon glyph={`icon-chevron-${isTextStylePickerOpen ? 'up' : 'down'}`} />\r\n              </div>\r\n              {isTextStylePickerOpen && (\r\n                <div className=\"menu-items\">\r\n                  <TextStylePicker\r\n                    fonts={fonts}\r\n                    onPropertyChange={onPropertyChange}\r\n                    onRichTextStyleChange={onRichTextStyleChange}\r\n                    properties={propertiesRef.current}\r\n                    stateless={true}\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"divider\" />\r\n              {!isPaletteDisabled &&\r\n                <div className=\"collapsible-menu\" onClick={openColors} onTouchStart={openColors} role={'toolbar'}>\r\n                  <div className=\"menu-title\">\r\n                    {i18next.t('option.stylePopup.colors')}\r\n                  </div>\r\n                  <Icon glyph={`icon-chevron-${isColorPickerOpen ? 'up' : 'down'}`} />\r\n                </div>\r\n              }\r\n            </>)\r\n        }\r\n        {!isPaletteDisabled && (legacyPopup || isColorPickerOpen) && (\r\n          <>\r\n            <ColorPalette\r\n              colorMapKey=\"freeText\"\r\n              color={format.color}\r\n              property=\"TextColor\"\r\n              onStyleChange={handleColorChange}\r\n              hasPadding\r\n            />\r\n            {customColors.length > 0 && (\r\n              <ColorPalettePicker\r\n                color={format.color}\r\n                property=\"TextColor\"\r\n                onStyleChange={handleColorChange}\r\n                enableEdit={false}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {symbolsVisible && <MathSymbolsPicker onClickHandler={insertSymbols} maxHeight={symbolsAreaHeight} />}\r\n      </div>\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nexport default React.memo(RichTextPopup);\r\n","import RichTextPopup from './RichTextPopup';\r\n\r\nexport default RichTextPopup;"],"sourceRoot":""}