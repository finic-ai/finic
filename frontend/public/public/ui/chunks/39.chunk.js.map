{"version":3,"sources":["webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.scss?4564","webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.scss","webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.js","webpack:///./src/ui/src/components/OpenFileModal/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","webComponents","document","getElementsByTagName","length","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","forEach","styleNode","innerHTML","cloneNode","push","head","exports","locals","mapDispatchToProps","closeElements","actions","connect","state","isDisabled","selectors","isElementDisabled","DataElements","OPEN_FILE_MODAL","isOpen","isElementOpen","tabManager","getTabManager","t","useTranslation","useState","src","setSrc","extension","setExtension","filename","setFilename","size","setSize","error","setError","closeModal","useEffect","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","MODEL3D_MODAL","handleAddTab","source","_extension","_filename","_size","acceptFormats","indexOf","useDb","TabManager","MAX_FILE_SIZE","addTab","setActive","saveCurrentActiveTabState","useDB","modalClass","classNames","Modal","OpenFileModal","open","closed","extensionRegExp","handleFileChange","file","window","Core","Document","type","ext","mimeTypeToExtension","exec","name","URL","createObjectURL","handleURLChange","url","trim","substring","lastIndexOf","split","getHashParameters","SupportedFileFormats","SERVER","CLIENT","reduce","uniqueArr","curr","onSwipedUp","onSwipedDown","className","data-element","onMouseDown","e","stopPropagation","Tabs","id","Button","img","onClick","dataElement","FileInputPanel","onFileSelect","defaultValue","FilePickerPanel","onFileProcessed","urlError","fileError","extensionError","label","style","width"],"mappings":"+EAAA,IAAIA,EAAM,EAAQ,IACFC,EAAU,EAAQ,MAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,SAAUC,GACX,MAAMC,EAAgBC,SAASC,qBAAqB,oBACpD,GAAIF,EAAcG,OAAS,EAAG,CAC5B,MAAMC,EAAkB,GACxB,IAAK,IAAIP,EAAI,EAAGA,EAAIG,EAAcG,OAAQN,IAAK,CAC7C,MAAMQ,EAAeL,EAAcH,GACnC,GAAU,IAANA,EACFQ,EAAaC,WAAWC,YAAYR,GACpCA,EAASS,OAAS,WACZJ,EAAgBD,OAAS,GAC3BC,EAAgBK,QAASC,IAEvBA,EAAUC,UAAYZ,EAASY,iBAIhC,CACL,MAAMD,EAAYX,EAASa,WAAU,GACrCP,EAAaC,WAAWC,YAAYG,GACpCN,EAAgBS,KAAKH,UAIzBT,SAASa,KAAKP,YAAYR,IAG5C,WAAoB,GAEPP,EAAIC,EAASK,GAI1BF,EAAOmB,QAAUtB,EAAQuB,QAAU,I,sBC3CnCD,EAAUnB,EAAOmB,QAAU,EAAQ,GAAR,EAAkE,IAKrFF,KAAK,CAACjB,EAAOC,EAAI,8sDAA+sD,KAGxuDkB,EAAQC,OAAS,CAChB,kBAAqB,OACrB,mBAAsB,S,6vBCTvB,8lGAAAnB,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAAAA,GAAA,gEAAAA,GAAA,0JAAAA,EAAA,6FAAAA,GAAA,mIAAAA,IAAA,4SAAAA,IAAA,2OAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,SAiBA,IAiLMoB,EAAqB,CACzBC,cAAeC,IAAQD,eAGVE,eAVS,SAACC,GAAK,MAAM,CAClCC,WAAYC,IAAUC,kBAAkBH,EAAOI,IAAaC,iBAC5DC,OAAQJ,IAAUK,cAAcP,EAAOI,IAAaC,iBACpDG,WAAYN,IAAUO,cAAcT,MASpCJ,EAFaG,EArLO,SAAH,GAA0D,IAApDE,EAAU,EAAVA,WAAYK,EAAM,EAANA,OAAQE,EAAU,EAAVA,WAAYX,EAAa,EAAbA,cAC/Ca,EAAMC,cAAND,EAE0B,IAAZE,mBAAS,IAAG,GAA3BC,EAAG,KAAEC,EAAM,KAC+B,IAAfF,mBAAS,OAAM,GAA1CG,EAAS,KAAEC,EAAY,KACY,IAAVJ,qBAAU,GAAnCK,EAAQ,KAAEC,EAAW,KACM,IAAVN,qBAAU,GAA3BO,EAAI,KAAEC,EAAO,KACyE,IAAnER,mBAAS,CAAE,UAAa,GAAI,SAAY,GAAI,eAAkB,KAAK,GAAtFS,EAAK,KAAEC,EAAQ,KAEhBC,EAAa,WACjB1B,EAAc,CAACO,IAAaC,kBAC5BS,EAAO,IACPQ,EAAS,CAAE,UAAa,GAAI,SAAY,KACxCJ,EAAY,MACZF,EAAa,OACbI,EAAQ,OAGVI,qBAAU,WACJlB,EACFT,EAAc,CACZO,IAAaqB,YACbrB,IAAasB,cACbtB,IAAauB,eACbvB,IAAawB,YACbxB,IAAayB,iBAGff,EAAO,IACPQ,EAAS,CAAE,UAAa,GAAI,SAAY,KACxCJ,EAAY,MACZF,EAAa,MACbI,EAAQ,SAET,CAACd,IAEJ,IAAMwB,EAAY,6BAAG,WAAOC,EAAQC,EAAYC,EAAWC,GAAK,0EACzDH,EAAQ,CAAF,wCACFT,EAAS,CAAE,SAAY,kCAAiC,UAE5DU,IAAqD,IAAvCG,EAAcC,QAAQJ,GAAkB,yCAClDV,EAAS,CAAE,eAAkB,gCAA+B,OAEb,OAAlDe,GAASH,GAASI,IAAWC,cAAgBL,EAAK,SAClD1B,EAAWgC,OAAOT,EAAQ,CAC9BhB,UAAWiB,EACXf,SAAUgB,EACVQ,WAAW,EACXC,2BAA2B,EAC3BC,MAAON,IACP,OACFd,IAAa,2CACd,gBAhBiB,4CAkBZqB,EAAaC,IAAW,CAC5BC,OAAO,EACPC,eAAe,EACfC,KAAM1C,EACN2C,QAAS3C,IAGL4C,EAAkB,mBAElBC,EAAgB,6BAAG,WAAOC,GAAI,6EACnB,GAAf9B,EAAS,MACJ8B,EAAM,CAAF,qDAGLA,aAAgBC,OAAOC,KAAKC,UAAQ,gCAChCzB,EAAasB,EAAMA,EAAKI,KAAMJ,EAAKnC,UAAS,8BASpC,OAPRwC,EAAMJ,OAAOC,KAAKI,oBAAoBN,EAAKI,OAASN,EAAgBS,KAAKP,EAAKQ,MAAM,IAAM,KAC1F3C,EAAWmC,EAAKQ,KAChBzC,EAAOiC,EAAKjC,KACZN,EAAMgD,IAAIC,gBAAgBV,GAChCtC,EAAOD,GACPK,EAAYD,GACZD,EAAayC,GACbrC,EAAQD,GAAM,UACRW,EAAasB,EAAMK,EAAKxC,EAAUE,GAAK,4CAEhD,gBAlBqB,sCAoBhB4C,EAAe,6BAAG,WAAOC,GAAG,uEAChC1C,EAAS,MACTR,EAAOkD,EAAIC,QACLhD,EAAW+C,EAAIE,UAAUF,EAAIG,YAAY,KAAO,GAAGC,MAAM,KAAK,GACpElD,EAAYD,GACZD,EAAakC,EAAgBS,KAAK1C,GAAU,IAC5CG,EAAQ,MAAM,2CACf,gBAPoB,sCAUjBe,IADekC,YAAkB,qBAAsB,MAC5BhB,OAAOC,KAAKgB,qBAAqBC,OAASlB,OAAOC,KAAKgB,qBAAqBE,OAQ1G,OAPArC,EAAgBA,EAAcsC,QAAO,SAACC,EAAWC,GAI/C,OAHiC,IAA7BD,EAAUtC,QAAQuC,IACpBD,EAAUlF,KAAKmF,GAEVD,IACN,KAEKzE,GACN,kBAAC,IAAS,CAAC2E,WAAYrD,EAAYsD,aAActD,GAC/C,yBAAKuD,UAAWlC,EAAYmC,eAAc3E,IAAaC,gBAAiB2E,YAAazD,GACnF,yBAAKuD,UAAU,YAAYE,YAAa,SAACC,GAAC,OAAKA,EAAEC,oBAC/C,kBAACC,EAAA,EAAI,CAACL,UAAU,uBAAuBM,GAAG,iBACxC,yBAAKN,UAAU,oBACb,yBAAKA,UAAU,UACb,2BAAIpE,EAAE,kCACN,kBAAC2E,EAAA,EAAM,CACLC,IAAK,aACLC,QAAShE,EACTiE,YAAa,aAIjB,yBAAKV,UAAU,YACb,kBAAC,IAAG,CAACU,YAAY,uBACf,4BAAQV,UAAU,sBACfpE,EAAE,cAGP,yBAAKoE,UAAU,wBACf,kBAAC,IAAG,CAACU,YAAY,yBACf,4BAAQV,UAAU,sBACfpE,EAAE,6CAKX,yBAAKoE,UAAU,6BACf,kBAAC,IAAQ,CAACU,YAAY,iBACpB,yBAAKV,UAAU,cACb,kBAACW,EAAA,EAAc,CACbC,aAAc,SAAC1B,GACbD,EAAgBC,IAElB7B,cAAeA,EACfpB,UAAWA,EACXC,aAAcA,EACd2E,aAAc9E,MAIpB,kBAAC,IAAQ,CAAC2E,YAAY,mBACpB,yBAAKV,UAAU,cACb,kBAACc,EAAA,EAAe,CACdC,gBAAiB,SAACzC,GAAI,OAAKD,EAAiBC,SAKpD,yBAAK0B,UAAU,6BACf,yBAAKA,UAAU,WACZzD,aAAK,EAALA,EAAOyE,WAAY,uBAAGhB,UAAU,SAAQ,KAAGzD,EAAMyE,WACjDzE,aAAK,EAALA,EAAO0E,YAAa,uBAAGjB,UAAU,SAAQ,KAAGzD,EAAM0E,YAClD1E,aAAK,EAALA,EAAO2E,iBAAkB,uBAAGlB,UAAU,SAAQ,KAAGzD,EAAM2E,gBACxD,kBAACX,EAAA,EAAM,CACLP,UAAU,YACVU,YAAY,mBACZS,MAAOvF,EAAE,mBACTwF,MAAO,CAAEC,MAAO,IAChBZ,QAAS,kBAAMzD,EAAajB,EAAKE,EAAWE,EAAUE,aClLrD4B","file":"chunks/39.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./OpenFileModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.OpenFileModal .container{overflow-y:unset;width:600px}.OpenFileModal .image-signature{height:240px!important;width:100%}.OpenFileModal .error{color:red;margin:5px}.OpenFileModal .extension-dropdown{padding:0 16px;display:flex;flex-direction:column}.OpenFileModal .extension-dropdown p{width:100%;font-size:13px;line-height:16px;font-weight:700;order:1}.OpenFileModal .extension-dropdown .Dropdown__wrapper{order:2;width:100%}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown{width:100%!important}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown__items{width:100%}.OpenFileModal .extension-dropdown .Dropdown__wrapper .arrow{flex:unset;width:12px;height:16px;margin-top:2px}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown .picked-option .picked-option-text{flex:none;width:unset}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport TabManager from 'helpers/TabManager';\nimport classNames from 'classnames';\nimport getHashParameters from 'helpers/getHashParameters';\nimport { Swipeable } from 'react-swipeable';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { Tabs, Tab, TabPanel } from 'components/Tabs';\nimport FileInputPanel from 'components/PageReplacementModal/FileInputPanel';\nimport FilePickerPanel from 'components/PageReplacementModal/FilePickerPanel';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport DataElements from 'constants/dataElement';\n\nimport '../PageReplacementModal/PageReplacementModal.scss';\nimport './OpenFileModal.scss';\n\nconst OpenFileModal = ({ isDisabled, isOpen, tabManager, closeElements }) => {\n  const { t } = useTranslation();\n\n  const [src, setSrc] = useState('');\n  const [extension, setExtension] = useState('pdf');\n  const [filename, setFilename] = useState();\n  const [size, setSize] = useState();\n  const [error, setError] = useState({ 'fileError': '', 'urlError': '', 'extensionError': '' });\n\n  const closeModal = () => {\n    closeElements([DataElements.OPEN_FILE_MODAL]);\n    setSrc('');\n    setError({ 'fileError': '', 'urlError': '' });\n    setFilename(null);\n    setExtension('pdf');\n    setSize(null);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      closeElements([\n        DataElements.PRINT_MODAL,\n        DataElements.LOADING_MODAL,\n        DataElements.PROGRESS_MODAL,\n        DataElements.ERROR_MODAL,\n        DataElements.MODEL3D_MODAL,\n      ]);\n    } else {\n      setSrc('');\n      setError({ 'fileError': '', 'urlError': '' });\n      setFilename(null);\n      setExtension(null);\n      setSize(null);\n    }\n  }, [isOpen]);\n\n  const handleAddTab = async (source, _extension, _filename, _size) => {\n    if (!source) {\n      return setError({ 'urlError': 'URL or File must be provided' });\n    }\n    if (!_extension || acceptFormats.indexOf(_extension) === -1) {\n      return setError({ 'extensionError': 'Extension must be provided' });\n    }\n    const useDb = !_size || TabManager.MAX_FILE_SIZE > _size;\n    await tabManager.addTab(source, {\n      extension: _extension,\n      filename: _filename,\n      setActive: true,\n      saveCurrentActiveTabState: true,\n      useDB: useDb\n    });\n    closeModal();\n  };\n\n  const modalClass = classNames({\n    Modal: true,\n    OpenFileModal: true,\n    open: isOpen,\n    closed: !isOpen,\n  });\n\n  const extensionRegExp = /(?:\\.([^.?]+))?$/;\n\n  const handleFileChange = async (file) => {\n    setError(null);\n    if (!file) {\n      return;\n    }\n    if (file instanceof window.Core.Document) {\n      await handleAddTab(file, file.type, file.filename);\n    } else {\n      const ext = window.Core.mimeTypeToExtension[file.type] || extensionRegExp.exec(file.name)[1] || null;\n      const filename = file.name;\n      const size = file.size;\n      const src = URL.createObjectURL(file);\n      setSrc(src);\n      setFilename(filename);\n      setExtension(ext);\n      setSize(size);\n      await handleAddTab(file, ext, filename, size);\n    }\n  };\n\n  const handleURLChange = async (url) => {\n    setError(null);\n    setSrc(url.trim());\n    const filename = url.substring(url.lastIndexOf('/') + 1).split('?')[0];\n    setFilename(filename);\n    setExtension(extensionRegExp.exec(filename)[1]);\n    setSize(null);\n  };\n\n  const wvServer = !!getHashParameters('webviewerServerURL', null);\n  let acceptFormats = wvServer ? window.Core.SupportedFileFormats.SERVER : window.Core.SupportedFileFormats.CLIENT;\n  acceptFormats = acceptFormats.reduce((uniqueArr, curr) => {\n    if (uniqueArr.indexOf(curr) === -1) {\n      uniqueArr.push(curr);\n    }\n    return uniqueArr;\n  }, []);\n\n  return !isDisabled && (\n    <Swipeable onSwipedUp={closeModal} onSwipedDown={closeModal}>\n      <div className={modalClass} data-element={DataElements.OPEN_FILE_MODAL} onMouseDown={closeModal}>\n        <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\n          <Tabs className=\"open-file-modal-tabs\" id=\"openFileModal\">\n            <div className=\"header-container\">\n              <div className=\"header\">\n                <p>{t('OpenFile.enterUrlOrChooseFile')}</p>\n                <Button\n                  img={'icon-close'}\n                  onClick={closeModal}\n                  dataElement={'UNKNOWN'}\n                />\n              </div>\n\n              <div className=\"tab-list\">\n                <Tab dataElement=\"urlInputPanelButton\">\n                  <button className=\"tab-options-button\">\n                    {t('link.url')}\n                  </button>\n                </Tab>\n                <div className=\"tab-options-divider\" />\n                <Tab dataElement=\"filePickerPanelButton\">\n                  <button className=\"tab-options-button\">\n                    {t('option.pageReplacementModal.localFile')}\n                  </button>\n                </Tab>\n              </div>\n            </div>\n            <div className=\"page-replacement-divider\" />\n            <TabPanel dataElement=\"urlInputPanel\">\n              <div className=\"panel-body\">\n                <FileInputPanel\n                  onFileSelect={(url) => {\n                    handleURLChange(url);\n                  }}\n                  acceptFormats={acceptFormats}\n                  extension={extension}\n                  setExtension={setExtension}\n                  defaultValue={src}\n                />\n              </div>\n            </TabPanel>\n            <TabPanel dataElement=\"filePickerPanel\">\n              <div className=\"panel-body\">\n                <FilePickerPanel\n                  onFileProcessed={(file) => handleFileChange(file)}\n                />\n              </div>\n            </TabPanel>\n          </Tabs>\n          <div className=\"page-replacement-divider\" />\n          <div className=\"footer\">\n            {error?.urlError && <p className=\"error\">* {error.urlError}</p>}\n            {error?.fileError && <p className=\"error\">* {error.fileError}</p>}\n            {error?.extensionError && <p className=\"error\">* {error.extensionError}</p>}\n            <Button\n              className=\"modal-btn\"\n              dataElement=\"linkSubmitButton\"\n              label={t('OpenFile.addTab')}\n              style={{ width: 90 }}\n              onClick={() => handleAddTab(src, extension, filename, size)}\n            />\n          </div>\n        </div>\n      </div>\n    </Swipeable>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  isDisabled: selectors.isElementDisabled(state, DataElements.OPEN_FILE_MODAL),\n  isOpen: selectors.isElementOpen(state, DataElements.OPEN_FILE_MODAL),\n  tabManager: selectors.getTabManager(state),\n});\n\nconst mapDispatchToProps = {\n  closeElements: actions.closeElements,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(OpenFileModal);\n","import OpenFileModal from './OpenFileModal';\n\nexport default OpenFileModal;\n"],"sourceRoot":""}