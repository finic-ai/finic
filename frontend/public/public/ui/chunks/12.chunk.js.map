{"version":3,"sources":["webpack:///./src/ui/src/components/Note/Context.js","webpack:///./src/ui/src/helpers/getClassName.js","webpack:///./src/ui/src/helpers/setAnnotationRichTextStyle.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/NoteTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.scss?3f0d","webpack:///./src/ui/src/components/NoteState/NoteStatePopup.js","webpack:///./src/ui/src/helpers/NoteStateUtils.js","webpack:///./src/ui/src/hooks/usePortal.js","webpack:///./src/ui/src/components/PopupPortal/PopupPortal.js","webpack:///./src/ui/src/components/PopupPortal/index.js","webpack:///./src/ui/src/helpers/getAnnotationStyles.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss?3394","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss","webpack:///./src/ui/src/constants/quill.scss?ae26","webpack:///./src/ui/src/constants/quill.scss","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss?3833","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss?98d3","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss","webpack:///./src/ui/src/components/NoteState/NoteState.scss","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss?a9a8","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss?5f3c","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss?a86d","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss?e09b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss?e8ab","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss","webpack:///./src/ui/src/components/Note/Note.scss?d9ff","webpack:///./src/ui/src/components/Note/Note.scss","webpack:///./src/ui/src/components/NotesPanel/ReplyAttachmentPicker.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss?5a25","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.js","webpack:///./src/ui/src/components/NotePopup/NotePopupContainer.js","webpack:///./src/ui/src/components/NotePopup/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.js","webpack:///./src/ui/src/components/NoteState/NoteStateContainer.js","webpack:///./src/ui/src/components/NoteState/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicator.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicatorContainer.js","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.js","webpack:///./src/ui/src/components/NoteHeader/index.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreviewContainer.js","webpack:///./src/ui/src/components/NoteTextPreview/index.js","webpack:///./src/ui/src/helpers/ReplyAttachmentManager.js","webpack:///./src/ui/src/helpers/sanitizeSVG.js","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.js","webpack:///./src/ui/src/components/ReplyAttachmentList/index.js","webpack:///./src/ui/src/helpers/setReactQuillContent.js","webpack:///./src/ui/src/components/NoteContent/NoteContent.js","webpack:///./src/ui/src/components/NoteContent/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.js","webpack:///./src/ui/src/components/Note/ReplyArea/index.js","webpack:///./src/ui/src/components/Note/NoteGroupSection.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/index.js","webpack:///./src/ui/src/components/Note/Note.js","webpack:///./src/ui/src/components/Note/index.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.js","webpack:///./src/ui/src/components/AnnotationStylePopup/index.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.js","webpack:///./src/ui/src/components/ListSeparator/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss?5d7b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss?db39","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss?296a","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss?21e2","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss?6dd5","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/VirtualizedList.js","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/index.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/NormalList.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.js","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.js","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.js","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.js","webpack:///./src/ui/src/components/NotesPanelHeader/index.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanelContainer.js","webpack:///./src/ui/src/components/NotesPanel/index.js"],"names":["NoteContext","React","createContext","className","isOpen","join","trim","setAnnotationRichTextStyle","editor","annotation","richTextStyle","ops","getContents","breakpoint","forEach","item","attributes","insert","cssStyle","undefined","bold","italic","color","underline","strike","length","setRichTextStyle","i","globalUserData","formats","Keyboard","Quill","CustomKeyboard","DEFAULTS","bindings","register","mentionModule","mention","allowedChars","mentionDenotationChars","mentionContainerClass","mentionListClass","listItemClass","renderItem","email","value","source","searchTerm","renderList","mentionsSearchFunction","mentionsManager","getMentionLookupCallback","foundUsers","CommentTextarea","forwardRef","ref","onChange","onKeyDown","onBlur","onFocus","userData","isReply","t","useTranslation","isAddReplyAttachmentDisabled","useSelector","state","selectors","isElementDisabled","DataElements","NotesPanel","ADD_REPLY_ATTACHMENT_BUTTON","contentArray","split","pop","map","onClick","e","preventDefault","stopPropagation","onScroll","style","overflowY","modules","theme","placeholder","aria-label","Button","dataElement","img","getRootNode","querySelector","click","displayName","propTypes","PropTypes","string","func","isRequired","onSubmit","NoteTextarea","props","forwardedRef","getUserData","isNoteSubmissionWithEnterEnabled","getAutoFocusNoteOnAnnotationSelection","getIsNoteEditing","shallowEqual","canSubmitByEnter","autoFocusNoteOnAnnotationSelection","isNoteEditing","useContext","resize","isContentEditable","isSelected","textareaRef","useRef","prevHeightRef","useLayoutEffect","boxDOMElement","current","container","firstElementChild","boundingBox","getBoundingClientRect","height","useEffect","focus","textareaProps","el","content","delta","getText","target","doesDeltaContainMention","formattedText","getFormattedTextFromDeltas","mentionData","extractMentionDataFromStr","totalTextLength","plainTextValue","textareaEditor","setTimeout","setSelection","which","isSubmittingByEnter","isSubmittingByCtrlEnter","metaKey","ctrlKey","api","__esModule","default","module","options","styleTag","webComponents","document","getElementsByTagName","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","styleNode","innerHTML","cloneNode","push","head","exports","locals","object","triggerElementName","onClose","handleStateChange","NoteStatePopup","useState","left","right","top","position","setPosition","popupRef","useOnClickOutside","contains","createOnStateOptionButtonClickHandler","getOverlayPositionBasedOn","id","glyph","createStateAnnotation","documentViewerKey","stateAnnotation","window","Core","Annotations","StickyAnnotation","core","getCurrentUser","displayAuthor","getDisplayAuthor","stateMessage","i18next","toLowerCase","contents","setContents","usePortal","rootElemRef","rootElem","existingParent","parentElem","rootContainer","createElement","setAttribute","createRootElement","body","insertBefore","lastElementChild","nextElementSibling","remove","childElementCount","Portal","children","pointerEvents","zIndex","createPortal","PopupPortal","property","elementName","isBlendModeSupported","Opacity","isFormFieldPlaceholder","ReplyAttachmentPicker","annotationId","addAttachments","replyAttachmentHandler","getReplyAttachmentHandler","file","files","attachment","url","name","size","type","display","handleEdit","handleDelete","closePopup","openPopup","isEditable","bool","isDeletable","noop","NotePopup","notePopupButtonClass","classNames","active","optionsClass","DataElementWrapper","Icon","NotePopupContainer","activeDocumentViewerKey","getActiveDocumentViewerKey","setIsEditing","noteIndex","canModify","setCanModify","canModifyContents","setCanModifyContents","setIsOpen","onUpdateAnnotationPermission","addEventListener","removeEventListener","passProps","useCallback","FreeTextAnnotation","getAnnotationManager","isFreeTextEditingEnabled","trigger","deleteAnnotations","getGroupedChildren","NoDelete","Tooltip","openOnInitialLoad","NoteState","annotationState","getStatus","icon","noteStateButtonClassName","dataElementWithID","NoteStateContainer","newValue","addReply","annotationManager","addAnnotation","getRootAnnotation","NoteUnpostedCommentIndicator","pendingEditTextMap","pendingReplyMap","pendingAttachmentMap","hasUnpostedComment","setHasUnpostedComment","hasUnpostedReply","setHasUnpostedReply","hasUnpostedAttachment","setHasUnpostedAttachment","data-element","isDisabled","iconColor","fillColor","language","noteDateFormat","notesShowLastUpdatedDate","isUnread","renderAuthorName","isNoteStateDisabled","isEditing","number","sortStrategy","activeTheme","isMultiSelected","isMultiSelectMode","handleMultiSelect","isGroupMember","showAnnotationNumbering","NoteHeader","date","timezone","dateCreated","NotesPanelSortStrategy","MODIFIED_DATE","CREATED_DATE","getLatestActivityDate","DateCreated","datetimeStr","toLocaleString","timeZone","Date","numberOfReplies","getReplies","toHexString","Theme","DARK","isDarkColorHex","getColor","FillColor","annotationAssociatedNumber","getAssociatedNumber","annotationDisplayedAssociatedNumber","authorAndDateClass","noteHeaderClass","parent","dayjs","locale","format","PageNumber","Choice","Id","checked","NoteTextPreviewContainer","NoteTextPreview","notePanelWidth","getNotesPanelWidth","panelWidth","icons","FileAttachmentUtils","decompressFileContent","decompressWithFlateDecode","setAnnotationAttachments","setAttachments","isImage","startsWith","getAttachmentIcon","readAsText","svg","Promise","resolve","toString","fileReader","FileReader","result","isSVG","sanitizeSVG","svgText","forbiddenTags","DOMPurify","addHook","_","hookEvent","tagName","allowedTags","clean","sanitize","Blob","isDirty","ImagePreview","src","setSrc","isDirtySVG","setIsDirtySvg","fileToSanitize","isImageFromPDF","File","URL","createObjectURL","processImagePreview","ReplyAttachmentList","fileDeleted","getTabManager","isReplyAttachmentPreviewEnabled","tabManager","previewEnabled","console","warn","fileData","addTab","filename","setActive","saveCurrentActiveTabState","onDownload","saveAs","key","onDelete","getAttributtes","element","attr","decoration","includes","setReactQuillContent","getRichTextStyle","indexes","Object","keys","text","isNaN","lastIndex","textSlice","slice","extend","LocalizedFormat","isNonReplyNoteRead","onReplyClicked","NoteContent","getNoteDateFormat","getIconColor","mapAnnotationToKey","getCurrentLanguage","isNotesPanelTextCollapsingEnabled","isNotesPanelRepliesCollapsingEnabled","getActiveTheme","getTimezone","canCollapseTextPreview","canCollapseReplyPreview","searchInput","onTopNoteContentClicked","setPendingEditText","dispatch","useDispatch","attachments","getAttachments","annotationChangedListener","annotations","action","annot","useDidUpdate","actions","finishNoteEditing","customData","highlightSearchInput","renderContents","fontColor","autolinkerContent","Autolinker","link","stripPrefix","stripTrailingSlash","replaceFn","match","href","getAnchorHref","anchorText","getAnchorText","offset","getOffset","getType","start","end","getMatchedText","highlightResult","linesToBreak","comment","renderRichText","contentToRender","strIdx","anchorData","forIdx","rel","getDataWithKey","JSON","parse","getCustomData","contentsToRender","textColor","Color","a","textAreaValue","thereIsNoUnpostedEdit","handleContentsClicked","getSelection","noteContentClass","unread","clicked","useMemo","contentStyle","onTextAreaValueChange","pendingText","textPreview","highlightSearchResult","shouldCollapseAnnotationText","isString","paddingRight","header","ContentArea","getIsMentionEnabled","INLINE_COMMENT_POPUP","isElementOpen","NOTES_PANEL","isMentionEnabled","isInlineCommentDisabled","isInlineCommentOpen","isNotesPanelOpen","setCurAnnotId","deleteAttachment","clearAttachments","shouldNotFocusOnInput","isMobile","getEditor","setText","getContainerElement","parentNode","removeChild","ids","textLength","getLength","pendingAttachments","extractMentionDataFromAnnot","mentions","setCustomData","stringify","drawAnnotationsFromList","contentClassName","disabled","getRichTextSpan","fontWeight","fontStyle","textDecoration","replace","styles","indices","Number","sort","b","index","Math","min","max","styleIndices","fullText","loweredText","loweredSearchInput","lastFoundInstance","indexOf","allFoundPositions","regexSafeSearchInput","RegExp","test","idx","substring","ReplyArea","onPendingReplyChange","isDocumentReadOnly","getIsReplyDisabled","isReadOnly","isReplyDisabled","isReplyDisabledForAnnotation","isNoteEditingTriggeredByAnnotationPopup","setPendingReply","isExpandedFromSearch","scrollToSelectedAnnot","isFocused","setIsFocused","postReply","replyText","annotationHasNoContents","setNoteContents","replyAnnotation","createMentionReply","addAnnotations","createAnnotationReply","ifReplyNotAllowed","replyAreaClass","replyButtonClass","onMouseDown","handleNoteTextareaChange","isSubmitType","groupAnnotations","array","NoteGroupSection","isViewingGroupAnnots","setIsViewingGroupAnnots","ViewAllAnnotsButton","CloseAllAnnotsButton","groupAnnotation","selectAnnotation","jumpToAnnotation","openElement","LineConnectorPortal","mount","AnnotationNoteConnectorLine","noteContainerRef","getDocumentContainerWidth","getDocumentContainerHeight","lineIsOpen","notePanelIsOpen","isLineDisabled","documentContainerWidth","documentContainerHeight","rightHorizontalLineWidth","setRightHorizontalLineWidth","rightHorizontalLineTop","setRightHorizontalLineTop","rightHorizontalLineRight","setRightHorizontalLineRight","leftHorizontalLineWidth","setLeftHorizontalLineWidth","leftHorizontalLineTop","setLeftHorizontalLineTop","leftHorizontalLineRight","setLeftHorizontalLineRight","getAnnotationPosition","annotationBottomRight","bottomRight","annotationTopLeft","topLeft","getAnnotationLineOffset","Subject","getScrollViewElement","scrollTop","scrollLeft","annotWidthInPixels","x","annotHeightInPixels","y","lineWidth","innerWidth","onPageNumberUpdated","closeElement","verticalHeight","abs","verticalTop","width","isInNotesPanel","currId","Note","containerRef","containerHeightRef","isEditingMap","setIsEditingMap","unreadReplyIdSet","Set","getNoteTransformFunction","getCustomNoteSelectionFunction","getUnreadAnnotationIdSet","isCommentThreadExpansionEnabled","isRightClickAnnotationPopupEnabled","noteTransformFunction","customNoteSelectionFunction","unreadAnnotationIdSet","shouldExpandCommentThread","replies","filter","r","has","add","setAnnotationReadState","isRead","prevHeight","currHeight","round","notesPanelElement","getElementsByClassName","child","handleNoteClick","deselectAllAnnotations","ANNOTATION_NOTE_CONNECTOR_LINE","ANNOTATION_POPUP","hasUnreadReplies","noteClass","expanded","repliesClass","hidden","reply","showReplyArea","values","some","val","handleReplyClicked","markAllRepliesRead","repliesSetToRead","selectAnnotations","getGroupAnnotations","isGroup","CaretAnnotation","lastReplyId","role","tabIndex","currentTarget","label","AnnotationStylePopup","getAutoSizeType","AutoSizeTypes","NONE","doc","getDocument","pageNumber","pageInfo","getPageInfo","pageMatrix","getPageMatrix","pageRotation","getPageRotation","fitText","redrawAnnotation","isToolDefaultStyleUpdateFromAnnotationPopupEnabled","setAnnotationStyles","setToolStyles","ToolName","adjustFreeTextBoundingBox","updateAnnotationRichTextStyle","section","lineStyle","setStartStyle","setEndStyle","dashes","shift","onResize","this","isRedaction","isFreeText","isEllipse","isMeasure","colorMapKey","showLineStyleOptions","properties","hideSnapModeCheckbox","getClassName","handleResize","measureRef","ANNOTATION_STYLE_POPUP","handleClick","hasBackToMenu","ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER","ActionButton","ANNOTATION_STYLE_POPUP_BACK_BUTTON","onBackToMenu","StylePopup","onStyleChange","handleStyleChange","onSliderChange","handleSliderChange","onPropertyChange","handlePropertyChange","disableSeparator","onRichTextStyleChange","handleRichTextStyleChange","onLineStyleChange","handleLineStyleChange","Component","mapDispatchToProps","connect","withTranslation","ListSeparator","renderContent","PureComponent","node","notes","initialScrollTop","selectedIndex","cache","CellMeasurerCache","defaultHeight","fixedWidth","VirtualizedList","listRef","setOffset","dimension","setDimension","prevWindowHeight","innerHeight","useImperativeHandle","scrollToPosition","scrollToRow","clearAll","measureAllRows","forceUpdateGrid","windowResizeHandler","diff","handleScroll","rowRenderer","currNote","columnIndex","rowIndex","measure","clear","recomputeRowHeights","_resize","bounds","deferredMeasurementCache","outline","overscanRowCount","rowCount","rowHeight","NormalList","parentRect","childRect","clientHeight","Fragment","pendingReply","count","MultiStylePopup","styleTabs","setStyleTabs","clickedTrigger","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","datePicker","getDatePicker","getAnnotationStyles","freeTextAnnotation","find","getIntent","Intent","FreeText","FreeTextCallout","richTextStyles","Font","FontSize","TextAlign","TextVerticalAlign","strikeout","availablePalettes","AnnotationStylePopupTabs","TEXT_COLOR","STROKE_COLOR","FILL_COLOR","updateAnnotationStylePopupTabs","newColorMap","copyMapWithDataProperties","setColorMap","_styleTabs","showMultiReply","setShowMultiReply","showMultiState","setShowMultiState","showMultiStyle","setShowMultiStyle","setMultiSelectMode","isMultiSelectedMap","setIsMultiSelectedMap","multiSelectedAnnotations","getParentAnnotations","annotSet","isGrouped","parentAnnotation","getAnnotationById","Array","from","MultiSelectControls","modifiableMultiSelectAnnotations","setModfiableMultiSelectAnnotations","onAnnotationChanged","_isMultiSelectedMap","groupedAnnots","groupedAnnot","groupAnnot","originalKeys","updatedKeys","_modifiableMultiSelectAnnotations","multiSelectedAnnot","canGroup","getNumberOfGroups","canUngroup","Provider","NOTE_MULTI_REPLY_BUTTON","title","NOTE_MULTI_STATE_BUTTON","bottom","NOTE_MULTI_STYLE_BUTTON","NOTE_MULTI_GROUP_BUTTON","NOTE_MULTI_UNGROUP_BUTTON","ungroupAnnotations","NOTE_MULTI_DELETE_BUTTON","warning","message","confirmBtnText","onConfirm","showWarningMessage","NotesPanelHeader","disableFilterAnnotation","setSearchInputHandler","toggleMultiSelectMode","isMultiSelectEnabled","getSortStrategy","getNotesPanelCustomHeaderOptions","isSortContainerDisabled","customHeaderOptions","filterEnabled","setFilterEnabled","toggleFilterStyle","detail","types","authors","colors","statuses","Events","ANNOTATION_FILTER_CHANGED","_handleInputChange","debounce","sortContainer","Dropdown","items","getSortStrategies","translationPrefix","currentSelectionKey","onClickItem","strategy","setNotesPanelSortStrategy","originalHeaderElement","DefaultHeader","INPUT_CONTAINER","COMMENTS_COUNTER","SORT_ROW","NOTE_MULTI_SELECT_MODE_BUTTON","filterAnnotationButton","CustomElement","render","renderArguments","overwriteDefaultHeader","currentLeftPanelWidth","selectedNoteIds","setSelectedNoteIds","setSearchInput","setScrollToSelectedAnnot","getPageLabels","getCustomNoteFilter","getNotesInLeftPanel","isAnnotationNumberingEnabled","getEnableNotesPanelVirtualizedList","isInDesktopOnlyMode","getNotesPanelCustomEmptyPanel","getIsNotesPanelMultiSelectEnabled","pageLabels","customNoteFilter","currentNotesPanelWidth","notesInLeftPanel","enableNotesPanelVirtualizedList","customEmptyPanel","isNotesPanelMultiSelectEnabled","currentWidth","isMobileSize","setMultiSelectedAnnotations","curAnnotId","scrollTopRef","VIRTUALIZATION_THRESHOLD","isIE","Infinity","onAnnotationNumberingUpdated","isEnabled","setAnnotationNumbering","singleSelectedNoteIndex","filterNotesWithSearch","note","authorName","annotationPreview","notesToRender","getSortedNotes","shouldRender","noteAndReplies","onlyReplyContainsSearchInput","setPendingEditTextMap","annotationID","setPendingReplyMap","setPendingAttachmentMap","attachmentList","splice","renderChild","listSeparator","shouldRenderSeparator","getSeparatorContent","prevNote","handleNoteClicked","currIds","clone","deselectAnnotation","contextValue","isNotePanelOpen","NoResults","NoAnnotationsGlyph","NoAnnotationsMessage","NoAnnotationsReadOnlyMessage","readOnlyMessage","shouldRenderNoAnnotationsIcon","hideIcon","shouldRenderCustomEmptyPanel","NoAnnotations","MultiSelectPlaceHolder","MultiReplyPlaceHolder","findIndex","existingSelectedNotes","minWidth","Panel","onMouseUp","closeElements","isMultiViewerMode","1","2","noteMap","setNoteMap","setNotes","selectedNoteIdsMap","setSelectedNoteIdsMap","isMultiSelectedViewerMap","setIsMultiSelectedViewerMap","getGroupedAnnots","selectedAnnotations","mainAnnot","onDocumentUnloaded","_setNotes","getSelectedAnnotations","getAnnotationsList","Listable","Hidden","Tools","ToolNames","CROP","isContentEditPlaceholder","setDocumentUnloaded1","setDocumentUnloaded2","setNotes2","setNotes1","onAnnotationSelected2","onAnnotationSelected","selectedAnnot","onAnnotationSelected1"],"mappings":"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","file":"chunks/12.chunk.js","sourcesContent":["import React from 'react';\n\nconst NoteContext = React.createContext();\n\nexport default NoteContext;","export default (className, { isOpen }) => [className, isOpen ? 'open' : 'closed'].join(' ').trim();\n","const setAnnotationRichTextStyle = (editor, annotation) => {\n  const richTextStyle = {};\n  const ops = editor.getContents().ops;\n  let breakpoint = 0;\n  ops.forEach((item) => {\n    const attributes = item.attributes;\n    const insert = item.insert;\n    const cssStyle = {};\n    if (attributes === null || attributes === undefined ? undefined : attributes.bold) {\n      cssStyle['font-weight'] = 'bold';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.italic) {\n      cssStyle['font-style'] = 'italic';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.color) {\n      cssStyle['color'] = attributes.color;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.underline) {\n      cssStyle['text-decoration'] = 'word';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.strike) {\n      if (cssStyle['text-decoration']) {\n        cssStyle['text-decoration'] = `${cssStyle['text-decoration']} line-through`;\n      } else {\n        cssStyle['text-decoration'] = 'line-through';\n      }\n    }\n    richTextStyle[breakpoint] = cssStyle;\n    breakpoint += insert.length;\n  });\n  annotation.setRichTextStyle(richTextStyle);\n};\n\nexport default setAnnotationRichTextStyle;\n","import React from 'react';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'quill-mention';\nimport mentionsManager from 'helpers/MentionsManager';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport DataElements from 'constants/dataElement';\nimport selectors from 'selectors';\nimport getRootNode from 'helpers/getRootNode';\n\nimport '../../../constants/quill.scss';\nimport './CommentTextarea.scss';\n\nlet globalUserData = [];\n\n// These are the formats that will be accepted by quill\n// removed images and videos\nconst formats = [\n  'background',\n  'bold',\n  'color',\n  'font',\n  'code',\n  'italic',\n  'link',\n  'size',\n  'strike',\n  'script',\n  'underline',\n  'blockquote',\n  'header',\n  'indent',\n  'list',\n  'align',\n  'direction',\n  'code-block',\n  'formula',\n  'mention',\n];\n\n// We override the default keyboard module to disable the list autofill feature\nconst Keyboard = Quill.import('modules/keyboard');\n\nclass CustomKeyboard extends Keyboard {\n  static DEFAULTS = {\n    ...Keyboard.DEFAULTS,\n    bindings: {\n      ...Keyboard.DEFAULTS.bindings,\n      'list autofill': undefined,\n    }\n  }\n}\n\nQuill.register('modules/keyboard', CustomKeyboard, true);\n\n// mentionsModule has to be outside the funtion to be able to access it without it being destroyed and recreated\nconst mentionModule = {\n  mention: {\n    allowedChars: /^[A-Za-z\\sÅÄÖåäö0-9\\-_]*$/,\n    mentionDenotationChars: ['@', '#'],\n    mentionContainerClass: 'mention__element',\n    mentionListClass: 'mention__suggestions__list',\n    listItemClass: 'mention__suggestions__item',\n    renderItem(item) {\n      // quill-mentions does not support jsx being returned\n      if (item.email) {\n        return (`<div> ${item.value} <p class=\"email\"> ${item.email} </p> </div>`);\n      }\n      return (`<div> ${item.value} </div>`);\n    },\n    async source(searchTerm, renderList) {\n      const mentionsSearchFunction = mentionsManager.getMentionLookupCallback();\n      const foundUsers = await mentionsSearchFunction(globalUserData, searchTerm);\n      renderList(foundUsers, searchTerm);\n    }\n  }\n};\n\nconst CommentTextarea = React.forwardRef(\n  (\n    {\n      value = '',\n      onChange,\n      onKeyDown,\n      onBlur,\n      onFocus,\n      userData,\n      isReply,\n    },\n    ref\n  ) => {\n    const [t] = useTranslation();\n\n    const isAddReplyAttachmentDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON));\n\n    globalUserData = userData;\n\n    const addAttachment = () => {\n      getRootNode().querySelector('#reply-attachment-picker')?.click();\n    };\n\n    const onClick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const onScroll = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    // Convert text with newline (\"\\n\") to <p>...</p> format so\n    // that editor handles multiline text correctly\n    if (value) {\n      const contentArray = value.split('\\n');\n      if (contentArray.length && contentArray[contentArray.length - 1] === '') {\n        contentArray.pop();\n        value = contentArray.map((item) => `<p>${item || '<br>'}</p>`).join('');\n      }\n    }\n\n    // onBlur and onFocus have to be outside in the div because of quill bug\n    return (\n      <div className='comment-textarea' onBlur={onBlur} onFocus={onFocus} onClick={onClick} onScroll={onScroll}>\n        <ReactQuill\n          className='comment-textarea ql-container ql-editor'\n          style={{ overflowY: 'visible' }}\n          ref={ref}\n          modules={userData && userData.length > 0 ? mentionModule : {}}\n          theme=\"snow\"\n          value={value}\n          placeholder={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          aria-label={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          formats={formats}\n        />\n        {isReply && !isAddReplyAttachmentDisabled &&\n          <Button\n            className='add-attachment'\n            dataElement={DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON}\n            img='ic_fileattachment_24px'\n            onClick={addAttachment}\n          />\n        }\n      </div>\n    );\n  });\n\nCommentTextarea.displayName = 'CommentTextarea';\n\nexport default CommentTextarea;\n","import React, { useLayoutEffect, useRef, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport NoteContext from 'components/Note/Context';\nimport selectors from 'selectors';\nimport CommentTextarea from './CommentTextarea/CommentTextarea';\nimport mentionsManager from 'helpers/MentionsManager';\n\nconst propTypes = {\n  // same the value attribute of a HTML textarea element\n  value: PropTypes.string,\n  // same the placeholder attribute of a HTML textarea element\n  placeholder: PropTypes.string,\n  // same the onChange attribute of a HTML textarea element\n  onChange: PropTypes.func.isRequired,\n  // same the onBlur attribute of a HTML textarea element\n  onBlur: PropTypes.func,\n  // same the onBlur attribute of a HTML textarea element\n  onFocus: PropTypes.func,\n  // a function that will be invoked when Ctrl + Enter or Cmd + Enter or only Enter are pressed\n  onSubmit: PropTypes.func,\n};\n\nconst NoteTextarea = React.forwardRef((props, forwardedRef) => {\n  const [\n    userData,\n    canSubmitByEnter,\n    autoFocusNoteOnAnnotationSelection,\n    isNoteEditing,\n  ] = useSelector(\n    (state) => [\n      selectors.getUserData(state),\n      selectors.isNoteSubmissionWithEnterEnabled(state),\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.getIsNoteEditing(state),\n    ],\n    shallowEqual,\n  );\n\n  const { resize, isContentEditable, isSelected, } = useContext(NoteContext);\n  const textareaRef = useRef();\n  const prevHeightRef = useRef();\n\n  useLayoutEffect(() => {\n    // when the height of the textarea changes, we also want to call resize\n    // to clear the cell measurer cache and update the note height in the virtualized list\n    const boxDOMElement = textareaRef.current?.editor?.container.firstElementChild;\n    const boundingBox = boxDOMElement?.getBoundingClientRect() || {};\n    if (prevHeightRef.current && prevHeightRef.current !== boundingBox.height) {\n      resize();\n    }\n    prevHeightRef.current = boundingBox.height;\n    // we need value to be in the dependency array because the height will only change when value changes\n    // eslint-disable-next-line\n  }, [props.value, resize]);\n\n  useEffect(() => {\n    if (\n      isNoteEditing &&\n      isSelected &&\n      isContentEditable &&\n      autoFocusNoteOnAnnotationSelection &&\n      textareaRef &&\n      textareaRef.current\n    ) {\n      textareaRef.current.focus();\n    }\n  });\n\n  const handleKeyDown = (e) => {\n    const enterKey = 13;\n    const enterKeyPressed = e.which === enterKey;\n    if (enterKeyPressed) {\n      const isSubmittingByEnter = canSubmitByEnter;\n      const isSubmittingByCtrlEnter = (e.metaKey || e.ctrlKey);\n\n      if (isSubmittingByEnter || isSubmittingByCtrlEnter) {\n        props.onSubmit(e);\n      }\n    }\n  };\n\n  const handleChange = (content, delta, source, editor) => {\n    /* For the React Quill editor, the text won't ever be empty, at least a '\\n'\n     * will be there, so it is necessary to trim the value to check if it is empty\n     */\n    const isEmpty = editor && editor.getText().trim() === '' && content === '<p><br></p>';\n    let value = '';\n\n    if (!isEmpty) {\n      value = content.target ? content.target.value : content;\n    }\n    props.onChange(value);\n\n    // If the delta contains a mention, then move the cursor to the end of the editor.\n    // This is necessary instead of using debounce when mentioning a user because\n    // the debounce was generating the following bug\n    // https://apryse.atlassian.net/browse/WVR-2380\n    const deltaContainsMention = mentionsManager.doesDeltaContainMention(delta.ops);\n    if (deltaContainsMention) {\n      const formattedText = mentionsManager.getFormattedTextFromDeltas(delta.ops);\n      const mentionData = mentionsManager.extractMentionDataFromStr(formattedText);\n      const editortextValue = editor.getText();\n      const totalTextLength = editortextValue.length + mentionData.plainTextValue.length;\n      const textareaEditor = textareaRef.current.editor;\n      setTimeout(() => textareaEditor.setSelection(totalTextLength, totalTextLength), 1);\n    }\n  };\n\n  const textareaProps = {\n    ...props,\n    ref: (el) => {\n      textareaRef.current = el;\n      forwardedRef(el);\n    },\n    onChange: handleChange,\n    onKeyDown: handleKeyDown,\n    userData,\n  };\n\n  return (\n    <>\n      <CommentTextarea {...textareaProps}/>\n    </>\n  );\n});\n\nNoteTextarea.displayName = 'NoteTextarea';\nNoteTextarea.propTypes = propTypes;\n\nexport default NoteTextarea;\n","import NoteTextarea from './NoteTextarea';\n\nexport default NoteTextarea;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteState.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport PopupPortal from 'components/PopupPortal';\nimport Icon from 'components/Icon';\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\nimport PropTypes from 'prop-types';\nimport getRootNode from 'helpers/getRootNode';\n\nimport './NoteState.scss';\n\nconst propTypes = {\n  style: PropTypes.object,\n  triggerElementName: PropTypes.string.isRequired,\n  onClose: PropTypes.func,\n  handleStateChange: PropTypes.func,\n};\n\nconst NoteStatePopup = ({\n  style,\n  triggerElementName,\n  onClose = () => {},\n  handleStateChange = () => {},\n}) => {\n  const [t] = useTranslation();\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\n  const popupRef = useRef();\n\n  useOnClickOutside(popupRef, (e) => {\n    const triggerElement = getRootNode().querySelector(`[data-element=${triggerElementName}]`);\n    const clickedTrigger = triggerElement.contains(e.target);\n    if (!clickedTrigger) {\n      // we only want to close the popup if we clicked outside and not on the trigger\n      onClose();\n    }\n  });\n\n  const createOnStateOptionButtonClickHandler = (state) => {\n    return () => {\n      handleStateChange(state);\n    };\n  };\n\n  useEffect(() => {\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef);\n    setPosition(position);\n  }, []);\n\n  return (\n    <PopupPortal\n      id=\"note-state-popup-portal\"\n      position={position}\n    >\n      <div\n        style={style}\n        className=\"note-state-options\"\n        ref={popupRef}\n      >\n        <DataElementWrapper dataElement=\"notePopupState\">\n          <DataElementWrapper\n            dataElement=\"notePopupStateAccepted\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Accepted')}\n          >\n            <Icon glyph=\"icon-annotation-status-accepted\" />\n            {t('option.state.accepted')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateRejected\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Rejected')}\n          >\n            <Icon glyph=\"icon-annotation-status-rejected\" />\n            {t('option.state.rejected')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateCancelled\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Cancelled')}\n          >\n            <Icon glyph=\"icon-annotation-status-cancelled\" />\n            {t('option.state.cancelled')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateCompleted\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Completed')}\n          >\n            <Icon glyph=\"icon-annotation-status-completed\" />\n            {t('option.state.completed')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateNone\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('None')}\n          >\n            <Icon glyph=\"icon-annotation-status-none\" />\n            {t('option.state.none')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateMarked\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Marked')}\n          >\n            <Icon glyph=\"icon-annotation-status-marked\" />\n            {t('option.state.marked')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateUnmarked\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Unmarked')}\n          >\n            <Icon glyph=\"icon-annotation-status-unmarked\" />\n            {t('option.state.unmarked')}\n          </DataElementWrapper>\n        </DataElementWrapper>\n      </div>\n    </PopupPortal>\n  );\n};\n\nNoteStatePopup.propTypes = propTypes;\n\nexport default NoteStatePopup;","import i18next from 'i18next';\nimport core from 'core';\n\nfunction createStateAnnotation(annotation, state, documentViewerKey = 1) {\n  // TODO: the code below is copied from annotManager.updateAnnotationState in WebViewer to work around the issue\n  // in https://github.com/PDFTron/webviewer-ui/issues/620\n  // the implement before wasn't causing any actual issues, but it was confusing and unnecessary to trigger two annotationChanged events when a status is set\n  // A proper fix should be done once https://trello.com/c/zWlkygNb/1023-consider-adding-a-setlocalizationhandler-to-corecontrols is implemented\n  // at that time, we could use the translation handler(t) internally in updateAnnotationState before setting the contents, and use that function instead in this component\n\n  const stateAnnotation = new window.Core.Annotations.StickyAnnotation();\n\n  stateAnnotation['InReplyTo'] = annotation['Id'];\n  stateAnnotation['X'] = annotation['X'];\n  stateAnnotation['Y'] = annotation['Y'];\n  stateAnnotation['PageNumber'] = annotation['PageNumber'];\n  stateAnnotation['Subject'] = 'Sticky Note';\n  stateAnnotation['Author'] = core.getCurrentUser();\n  stateAnnotation['State'] = state;\n  stateAnnotation['StateModel'] = state === 'Marked' || state === 'Unmarked' ? 'Marked' : 'Review';\n  stateAnnotation['Hidden'] = true;\n\n  const displayAuthor = core.getDisplayAuthor(stateAnnotation['Author'], documentViewerKey);\n  const stateMessage = i18next.t(`option.state.${state.toLowerCase()}`);\n  const contents = `${stateMessage} ${i18next.t('option.state.setBy')} ${displayAuthor}`;\n  stateAnnotation.setContents(contents);\n\n  return stateAnnotation;\n}\n\nexport {\n  createStateAnnotation,\n};\n","import { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n * @ignore\n * @returns {HTMLElement}\n */\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n * @ignore\n * @param {HTMLElement} rootElem\n */\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n * @ignore\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n * @param {String} id The id of the target container, e.g 'modal' or 'spotlight'\n * @returns {HTMLElement} The DOM node to use as the Portal target.\n */\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n\n  useEffect(function setupElement() {\n    // Look for existing target dom element to append to\n    const existingParent = document.querySelector(`#${id}`);\n    // Parent is either a new root or the existing dom element\n    const parentElem = existingParent || createRootElement(id);\n\n    // If there is no existing DOM element, add a new one.\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n\n    // Add the detached element to the parent\n    parentElem.appendChild(rootElemRef.current);\n\n    return function removeElement() {\n      rootElemRef.current.remove();\n      if (!parentElem.childElementCount) {\n        parentElem.remove();\n      }\n    };\n  }, [id]);\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;","import { createPortal } from 'react-dom';\nimport usePortal from 'hooks/usePortal';\n\nconst Portal = ({ id, position, children }) => {\n  const target = usePortal(id);\n  target.style.position = 'absolute';\n  target.style.top = position.top === 'auto' ? position.top : `${position.top}px`;\n  target.style.left = position.left === 'auto' ? position.left : `${position.left}px`;\n  target.style.right = position.right === 'auto' ? position.right : `${position.right}px`;\n  target.style.pointerEvents = 'none';\n  target.style.zIndex = 999;\n\n  return createPortal(\n    children,\n    target,\n  );\n};\n\nexport default Portal;","import PopupPortal from './PopupPortal';\n\nexport default PopupPortal;","import core from 'core';\n\n/**\n * We can just pass object down as a prop, but many properties of that object won't be used by the child component,\n * so here we select properties that will be used.\n * @ignore\n * @param annotation is an annotation created by a tool\n * @return current style of that object.\n */\nexport default (annotation) => {\n  const styleProperty = [\n    'FillColor',\n    'StrokeColor',\n    'TextColor',\n    'Opacity',\n    'StrokeThickness',\n    'FontSize',\n    'Precision',\n    'Scale',\n    'Style',\n  ];\n  const style = {};\n\n  styleProperty.forEach((property) => {\n    const value = annotation[property];\n\n    if (value !== null && value !== undefined) {\n      style[property] = annotation[property];\n    }\n  });\n\n  // Special case for the highlight annotation. It only have opacity when blend mode is working\n  if (annotation.elementName === 'highlight' && !core.isBlendModeSupported(annotation['BlendMode'])) {\n    style.Opacity = null;\n  }\n\n  // widget don't support opacity\n  if (annotation.isFormFieldPlaceholder()) {\n    style.Opacity = null;\n  }\n\n  return style;\n};\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-right:var(--padding-medium);margin-left:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js!./quill.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container.ql-disabled .ql-editor ul[data-checked]>li:before{pointer-events:none}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-container .ql-editor{box-sizing:border-box;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;-o-tab-size:4;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ql-editor>*{cursor:text}.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6,.ql-editor ol,.ql-editor p,.ql-editor pre,.ql-editor ul{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor p{margin-top:0;margin-bottom:0}.ql-editor ol,.ql-editor ul{padding-left:1.5em}.ql-editor ol>li,.ql-editor ul>li{list-style-type:none}.ql-editor ul>li:before{content:\\\"\\\\2022\\\"}.ql-editor ul[data-checked=false],.ql-editor ul[data-checked=true]{pointer-events:none}.ql-editor ul[data-checked=false]>li *,.ql-editor ul[data-checked=true]>li *{pointer-events:all}.ql-editor ul[data-checked=false]>li:before,.ql-editor ul[data-checked=true]>li:before{color:#777;cursor:pointer;pointer-events:all}.ql-editor ul[data-checked=true]>li:before{content:\\\"\\\\2611\\\"}.ql-editor ul[data-checked=false]>li:before{content:\\\"\\\\2610\\\"}.ql-editor li:before{display:inline-block;white-space:nowrap;width:1.2em}.ql-editor li:not(.ql-direction-rtl):before{margin-left:-1.5em;margin-right:.3em;text-align:right}.ql-editor li.ql-direction-rtl:before{margin-left:.3em;margin-right:-1.5em}.ql-editor ol li:not(.ql-direction-rtl),.ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}.ql-editor ol li.ql-direction-rtl,.ql-editor ul li.ql-direction-rtl{padding-right:1.5em}.ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}.ql-editor ol li:before{content:counter(list-0,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-increment:list-1}.ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-2{counter-increment:list-2}.ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-3{counter-increment:list-3}.ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-4{counter-increment:list-4}.ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-5{counter-increment:list-5}.ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-6{counter-increment:list-6}.ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}.ql-editor ol li.ql-indent-7{counter-increment:list-7}.ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}.ql-editor ol li.ql-indent-8{counter-increment:list-8}.ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-8{counter-reset:list-9}.ql-editor ol li.ql-indent-9{counter-increment:list-9}.ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) \\\". \\\"}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor.ql-blank:before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow.ql-toolbar:after,.ql-snow .ql-toolbar:after{clear:both;content:\\\"\\\";display:table}.ql-snow.ql-toolbar button,.ql-snow .ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow.ql-toolbar button svg,.ql-snow .ql-toolbar button svg{float:left;height:100%}.ql-snow.ql-toolbar button:active:hover,.ql-snow .ql-toolbar button:active:hover{outline:none}.ql-snow.ql-toolbar input.ql-image[type=file],.ql-snow .ql-toolbar input.ql-image[type=file]{display:none}.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar button:focus,.ql-snow .ql-toolbar button:focus,.ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover{color:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill{fill:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter{stroke:#06c}@media(pointer:coarse){.ql-snow.ql-toolbar button:hover:not(.ql-active),.ql-snow .ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow,.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:\\\"\\\";display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-stroke.ql-thin,.ql-snow .ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor pre{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label:before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-item:before,.ql-snow .ql-picker.ql-header .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"1\\\"]:before{content:\\\"Heading 1\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"2\\\"]:before{content:\\\"Heading 2\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"3\\\"]:before{content:\\\"Heading 3\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"4\\\"]:before{content:\\\"Heading 4\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"5\\\"]:before{content:\\\"Heading 5\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"6\\\"]:before{content:\\\"Heading 6\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-item:before,.ql-snow .ql-picker.ql-font .ql-picker-label:before{content:\\\"Sans Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:\\\"Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:\\\"Monospace\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-item:before,.ql-snow .ql-picker.ql-size .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:\\\"Small\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:\\\"Large\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]:before{content:\\\"Huge\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:0 2px 8px rgba(0,0,0,.2)}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label,.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip:before{content:\\\"Visit URL:\\\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action:after{border-right:1px solid #ccc;content:\\\"Edit\\\";margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove:before{content:\\\"Remove\\\";margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action:after{border-right:0;content:\\\"Save\\\";padding-right:0}.ql-snow .ql-tooltip[data-mode=link]:before{content:\\\"Enter link:\\\"}.ql-snow .ql-tooltip[data-mode=formula]:before{content:\\\"Enter formula:\\\"}.ql-snow .ql-tooltip[data-mode=video]:before{content:\\\"Enter video:\\\"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./CommentTextarea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.comment-textarea{position:relative}.comment-textarea .ql-toolbar{display:none}.comment-textarea .ql-container{border:none}.comment-textarea .ql-container .ql-editor{width:100%;padding:4px 28px 4px 6px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);resize:none;overflow:hidden;box-sizing:border-box}.comment-textarea .ql-container .ql-editor:focus{outline:none;border:1px solid var(--focus-border)}.comment-textarea .ql-container .ql-editor.ql-blank:before{left:8px;list-style-type:none;font-style:normal;color:var(--placeholder-text)}.comment-textarea .ql-container .ql-editor p{margin:0;word-break:break-word}.comment-textarea .ql-container .ql-editor ul>li:before{content:none!important}.comment-textarea .ql-container.ql-snow{border:none}.comment-textarea .add-attachment{position:absolute;bottom:2px;right:2px;width:24px;height:24px}.comment-textarea .add-attachment:hover{background-color:var(--blue-1)}.comment-textarea .add-attachment .Icon{padding:3px}.ql-editor ul>li:before{content:none!important}.mention__element{width:170px;z-index:9001!important;max-height:200px;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;background-color:var(--component-background);border:1px solid var(--border);border-radius:4px}.mention__suggestions__list{width:100%;font-size:14px;margin-top:0;padding-left:0!important;list-style:none;word-wrap:break-word;border-radius:4px}.mention__suggestions__item{background-color:var(--component-background);white-space:nowrap;padding-left:0;text-overflow:clip;padding:7px 5px 1px!important;margin:0;width:100%;cursor:pointer}.mention__suggestions__item .email{margin-top:2px;font-size:12px;white-space:normal;color:var(--faded-text)}.mention__suggestions__item.selected{background-color:var(--view-header-button-active)!important}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NotePopup{flex-grow:0;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.NotePopup,.NotePopup .overflow{display:flex;width:28px;height:28px}.NotePopup .overflow{border-radius:4px;justify-content:center;align-items:center}.NotePopup .overflow .Icon{width:24px;height:24px}.NotePopup .overflow:hover{background:var(--blue-1)}.NotePopup .overflow.active{background:var(--popup-button-active)}.NotePopup .options{display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;position:absolute;border-radius:4px;background:var(--component-background);top:40px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NotePopup .options{right:0}}.NotePopup .options .note-popup-option{padding:0;border:none;background-color:transparent;align-items:flex-start}:host(:not([data-tabbing=true])) .NotePopup .options .note-popup-option,html:not([data-tabbing=true]) .NotePopup .options .note-popup-option{outline:none}.NotePopup .options.options-reply{top:30px}.NotePopup .options .option{display:flex;flex-direction:column;justify-content:center;height:28px;padding-left:8px;padding-right:17px;border-radius:0}.NotePopup .options .option:hover{background-color:var(--popup-button-hover)}.NotePopup .options .option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.NotePopup .options .option:last-child{border-bottom-right-radius:4px}.NotePopup .Button.active{background:var(--popup-button-active)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-state-container{position:relative;bottom:52px;pointer-events:auto}.NoteState{border:none;background-color:transparent;flex-grow:0;display:flex;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 10px 0 15px}:host(:not([data-tabbing=true])) .NoteState,html:not([data-tabbing=true]) .NoteState{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteState{padding-left:0;padding-right:5px}}.NoteState .overflow{width:28px;height:28px;border-radius:4px}.NoteState .overflow .Icon{margin:4px;width:20px;height:20px}.NoteState .overflow:hover{background:var(--blue-1)}.NoteState .Button.active,.NoteState .overflow.active{background:var(--popup-button-active)}.note-state-options{padding:0;border:none;background-color:transparent;font-size:inherit;display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;border-radius:4px;background:var(--component-background);pointer-events:auto}:host(:not([data-tabbing=true])) .note-state-options,html:not([data-tabbing=true]) .note-state-options{outline:none}.note-state-options *{box-sizing:border-box}.note-state-options .note-state-option{display:flex;flex-direction:row;justify-content:flex-start;height:35px;padding:8px;border-radius:0}.note-state-options .note-state-option .Icon{margin-right:5px;width:18px;height:18px}.note-state-options .note-state-option:hover{background-color:var(--popup-button-hover)}.note-state-options .note-state-option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.note-state-options .note-state-option:last-child{border-bottom-right-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteHeader{padding-right:12px;position:relative;flex:1;color:var(--text-color);display:flex}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteHeader{flex:none}}.NoteHeader .author-and-overflow{display:flex;justify-content:space-between}.NoteHeader .state-and-overflow{display:flex;flex:1;justify-content:flex-end}.NoteHeader .author-and-time{display:flex;flex-direction:column;word-break:break-word}.NoteHeader .author{font-weight:700}.NoteHeader .date-and-num-replies{display:flex}.NoteHeader .date-and-num-replies .num-replies-container{display:flex;flex-grow:1;padding-left:10px}.NoteHeader .date-and-num-replies .num-replies-container .num-reply-icon{height:12px;width:12px}.NoteHeader .date-and-num-replies .num-replies-container .num-replies{opacity:.8;font-size:10px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}.NoteHeader .author-and-date{flex:1;min-width:0;position:relative}.NoteHeader .unread-notification{position:absolute;width:13px;height:13px;right:-2px;top:-2px;border-radius:10000px;border:2px solid var(--component-background);background:#00a5e4}.NoteHeader .type-icon-container{padding-right:13px}.NoteHeader .type-icon{margin:2px;width:24px;height:24px}.NoteHeader .date-and-time{opacity:.8;font-size:10px;color:var(--faded-text)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-time{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-time{font-size:12px}}.NoteHeader .author-name{font-weight:700}.NoteHeader .isReply{padding-left:0;padding-top:0;font-size:10px}.parent{padding-left:12px;padding-top:12px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAttachmentList.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".reply-attachment-list{display:flex;flex-direction:column;cursor:default}.reply-attachment-list .reply-attachment{display:flex;flex-direction:column;background-color:var(--gray-1);border-radius:4px;cursor:pointer;overflow:hidden}.reply-attachment-list .reply-attachment:not(:last-child){margin-bottom:8px}.reply-attachment-list .reply-attachment .reply-attachment-preview{width:100%;max-height:80px;display:flex;justify-content:center}.reply-attachment-list .reply-attachment .reply-attachment-preview.dirty{position:relative;margin-bottom:15px}.reply-attachment-list .reply-attachment .reply-attachment-preview img{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.reply-attachment-list .reply-attachment .reply-attachment-preview .reply-attachment-preview-message{font-size:11px;color:var(--error-text-color);position:absolute;bottom:-15px;left:10px}.reply-attachment-list .reply-attachment .reply-attachment-info{display:flex;align-items:center;height:40px;padding:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-attachment-icon{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-file-name{height:16px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:8px;margin-right:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button:hover{background-color:var(--blue-1)}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button .Icon{height:16px;width:16px}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteContent.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteContent{position:relative;display:flex;flex-direction:column;align-items:left;flex:1;color:var(--text-color);padding-bottom:12px}.NoteContent.isReply{padding-bottom:0}.NoteContent.unread.isReply{background:rgba(0,165,228,.08)}.NoteContent.unread.clicked .author-and-time span{font-weight:400}.NoteContent.unread .author-and-time span{font-weight:700}.NoteContent .container{padding-left:52px;padding-right:12px}.NoteContent .container,.NoteContent .container-reply{margin-top:8px;overflow:hidden;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:text}.NoteContent .edit-content{margin-top:7px;display:flex;flex-direction:column;position:relative;flex:1;padding-left:52px;padding-right:12px;padding-bottom:12px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteContent .edit-content{flex:none}}.NoteContent .edit-content textarea{width:100%;padding-left:8px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-top:4px;padding-bottom:4px;resize:none;overflow:hidden;box-sizing:border-box}.NoteContent .edit-content textarea:focus{outline:none;border:1px solid var(--focus-border)}.NoteContent .edit-content textarea::-moz-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea:-ms-input-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea::placeholder{color:var(--placeholder-text)}.NoteContent .edit-content .edit-buttons{display:flex;flex-direction:row;justify-content:flex-end;margin-top:4px}.NoteContent .edit-content .edit-buttons>div{margin-right:4px}.NoteContent .edit-content .edit-buttons .save-button{border:none;background-color:transparent;cursor:pointer;flex-shrink:0;background:var(--primary-button);border-radius:4px;height:24px;display:flex;align-items:center;justify-content:center;position:relative;color:var(--primary-button-text);padding:0 13px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .save-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .save-button{outline:none}.NoteContent .edit-content .edit-buttons .save-button:hover{background:var(--primary-button-hover);color:var(--primary-button-text)}.NoteContent .edit-content .edit-buttons .save-button.disabled{background:var(--gray-6);border-color:var(--gray-6);cursor:not-allowed}.NoteContent .edit-content .edit-buttons .cancel-button{border:none;background-color:transparent;color:var(--secondary-button-text);padding:0 10px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:2px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .cancel-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .cancel-button{outline:none}.NoteContent .edit-content .edit-buttons .cancel-button:hover{color:var(--secondary-button-hover)}.NoteContent .reply-content{padding-left:0}.NoteContent .contents{white-space:pre-wrap;color:var(--text-color);margin-right:5px;padding:0;word-break:normal;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.NoteContent .contents .highlight{background:#fffc95;color:#333}.NoteContent .highlight{background:#fffc95}.NoteContent .selected-text-preview{padding-left:52px;padding-top:8px}.NoteContent .reply-attachment-list{margin-bottom:8px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyArea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.reply-area-container{border-top:1px solid var(--divider);display:flex;flex-direction:column}.reply-area-container .reply-attachment-list{margin:12px 12px 0}.reply-area-container .reply-area-with-button{display:flex}.reply-area-container .reply-area-with-button .reply-area{position:relative;flex:1;margin:12px 17px 12px 12px;border-radius:4px;align-items:center}.reply-area-container .reply-area-with-button .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-container .reply-area-with-button .reply-button-container{display:flex;flex-direction:column;justify-content:flex-end}.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-container .reply-area-with-button .reply-button-container .reply-button,html:not([data-tabbing=true]) .reply-area-container .reply-area-with-button .reply-button-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:80px}}.reply-area-container .reply-area-with-button .reply-button-container .reply-button:hover{background:var(--blue-1)}.reply-area-container .reply-area-with-button .reply-button-container .reply-button.disabled{cursor:not-allowed}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationNoteConnectorLine.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media print{#line-connector-root{opacity:0}}#line-connector-root{position:relative;z-index:69}.horizontalLine{height:2px}.horizontalLine,.verticalLine{background-color:rgba(30,120,235,.5);position:fixed}.verticalLine{width:2px}.arrowHead{position:absolute;top:0;left:0;margin:auto;width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:7px solid rgba(30,120,235,.5);transform:translateX(-100%) translateY(-50%) translateY(1px)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./Note.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Note{padding:0;border:none;background-color:transparent;display:block;text-align:left;border-radius:4px;box-shadow:0 0 3px 0 var(--note-box-shadow);margin-bottom:8px;margin-left:2px;background:var(--component-background);cursor:pointer}:host(:not([data-tabbing=true])) .Note,html:not([data-tabbing=true]) .Note{outline:none}.Note.unread{border:1.2px solid #00a5e4}.Note.expanded{box-shadow:0 4px 16px var(--note-box-shadow-expanded),0 0 4px 0 var(--note-box-shadow)}.Note.is-multi-selected{box-shadow:0 4px 16px rgba(134,142,150,.24),0 0 4px 0 var(--note-box-shadow)}.Note .mark-all-read-button{background:#00a5e4;text-align:center;color:#fff;height:16px;font-size:12px;width:100%;border-radius:0}.Note .divider{height:1px;width:100%;background:var(--divider)}.Note .reply-divider{background:var(--reply-divider);height:1px;width:100%}.Note .replies{margin-left:52px;padding-bottom:12px}.Note .reply{padding-left:12px;padding-bottom:24px;border-left:1px solid var(--reply-divider)}.Note .reply:last-of-type{padding-bottom:0}.Note .group-section{margin-left:52px;padding-bottom:12px;display:flex;flex-direction:column;grid-row-gap:4px;row-gap:4px;padding-right:12px}.Note .text-button{color:var(--secondary-button-text);display:flex}.Note .text-button .Icon{color:var(--secondary-button-text);height:18px;width:18px}.Note .group-child{padding-top:4px;padding-bottom:4px}.Note .group-child:hover{background:var(--view-header-button-hover)}.Note .group-child .NoteContent{padding-bottom:0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nconst ReplyAttachmentPicker = ({ annotationId, addAttachments }) => {\n  const replyAttachmentHandler = useSelector((state) => selectors.getReplyAttachmentHandler(state));\n\n  const onChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      let attachment = file;\n      if (replyAttachmentHandler) {\n        const url = await replyAttachmentHandler(file);\n        attachment = {\n          url,\n          name: file.name,\n          size: file.size,\n          type: file.type\n        };\n      }\n      addAttachments(annotationId, [attachment]);\n    }\n  };\n\n  return (\n    <input\n      id=\"reply-attachment-picker\"\n      type=\"file\"\n      style={{ display: 'none' }}\n      onChange={onChange}\n      onClick={(e) => {\n        e.target.value = '';\n      }}\n    />\n  );\n};\n\nexport default ReplyAttachmentPicker;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ListSeparator.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ListSeparator{margin-top:16px;margin-bottom:8px;font-family:Lato;font-weight:500;color:var(--list-separator-color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Icon from 'components/Icon';\n\nimport './NotePopup.scss';\n\nconst propTypes = {\n  handleEdit: PropTypes.func,\n  handleDelete: PropTypes.func,\n  closePopup: PropTypes.func,\n  openPopup: PropTypes.func,\n  isEditable: PropTypes.bool,\n  isDeletable: PropTypes.bool,\n  isOpen: PropTypes.bool,\n};\n\nfunction noop() { }\n\nfunction NotePopup(props) {\n  const {\n    handleEdit = noop,\n    handleDelete = noop,\n    closePopup = noop,\n    openPopup = noop,\n    isEditable,\n    isDeletable,\n    isOpen,\n    isReply,\n  } = props;\n\n  const [t] = useTranslation();\n  const popupRef = React.useRef();\n\n  useOnClickOutside(popupRef, () => {\n    closePopup();\n  });\n\n  const togglePopup = (e) => {\n    e.stopPropagation();\n    if (isOpen) {\n      closePopup();\n    } else {\n      openPopup();\n    }\n  };\n\n  function onEditButtonClick(e) {\n    e.stopPropagation();\n    closePopup();\n    handleEdit();\n  }\n\n  function onDeleteButtonClick() {\n    closePopup();\n    handleDelete();\n  }\n\n  if (!isEditable && !isDeletable) {\n    return null;\n  }\n\n  const notePopupButtonClass = classNames('overflow note-popup-toggle-trigger', { active: isOpen });\n  const optionsClass = classNames('options note-popup-options', { 'options-reply': isReply });\n  return (\n    <DataElementWrapper\n      className=\"NotePopup\"\n      dataElement=\"notePopup\"\n      ref={popupRef}\n    >\n      <div className={notePopupButtonClass} onClick={togglePopup}>\n        <Icon glyph=\"icon-tools-more\" />\n      </div>\n      {isOpen && (\n        <div className={optionsClass}>\n          {isEditable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupEdit\"\n              onClick={onEditButtonClick}\n            >\n              {t('action.edit')}\n            </DataElementWrapper>\n          )}\n          {isDeletable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupDelete\"\n              onClick={onDeleteButtonClick}\n            >\n              {t('action.delete')}\n            </DataElementWrapper>\n          )}\n        </div>\n      )}\n    </DataElementWrapper>\n  );\n}\n\nNotePopup.propTypes = propTypes;\n\nexport default NotePopup;\n","import React from 'react';\nimport core from 'core';\nimport NotePopup from './NotePopup';\nimport Tooltip from 'components/Tooltip';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotePopupContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation, setIsEditing, noteIndex } = props;\n\n  const [canModify, setCanModify] = React.useState(core.canModify(annotation));\n  const [canModifyContents, setCanModifyContents] = React.useState(core.canModifyContents(annotation));\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [t] = useTranslation();\n\n  React.useEffect(() => {\n    function onUpdateAnnotationPermission() {\n      setCanModify(core.canModify(annotation, activeDocumentViewerKey));\n      setCanModifyContents(core.canModifyContents(annotation, activeDocumentViewerKey));\n    }\n\n    onUpdateAnnotationPermission();\n    core.addEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, undefined, activeDocumentViewerKey);\n    return () => core.removeEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, activeDocumentViewerKey);\n  }, [annotation, activeDocumentViewerKey]);\n\n  const handleEdit = React.useCallback(() => {\n    const isFreeText = annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n    if (isFreeText && core.getAnnotationManager(activeDocumentViewerKey).isFreeTextEditingEnabled()) {\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationDoubleClicked', annotation);\n    } else {\n      setIsEditing(true, noteIndex);\n    }\n  }, [annotation, setIsEditing, noteIndex]);\n\n  const handleDelete = React.useCallback(() => {\n    core.deleteAnnotations([annotation, ...annotation.getGroupedChildren()], undefined, activeDocumentViewerKey);\n  }, [annotation]);\n\n  const openPopup = () => setIsOpen(true);\n  const closePopup = () => setIsOpen(false);\n\n  const isEditable = canModifyContents;\n  const isDeletable = canModify && !annotation?.NoDelete;\n\n  const passProps = {\n    handleEdit,\n    handleDelete,\n    isEditable,\n    isDeletable,\n    isOpen,\n    closePopup,\n    openPopup,\n  };\n\n  // We wrap the element in a div so the tooltip works properly\n  return (\n    <Tooltip content={t('formField.formFieldPopup.options')}>\n      <div>\n        <NotePopup {...props} {...passProps} />\n      </div>\n    </Tooltip>\n  );\n}\n\nexport default NotePopupContainer;\n","import NotePopupContainer from './NotePopupContainer';\n\nexport default NotePopupContainer;\n","import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Tooltip from '../Tooltip';\nimport NoteStatePopup from './NoteStatePopup';\n\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport Icon from 'components/Icon';\n\nimport './NoteState.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  openOnInitialLoad: PropTypes.bool,\n  handleStateChange: PropTypes.func\n};\n\nfunction NoteState(props) {\n  const {\n    annotation,\n    openOnInitialLoad = false,\n    handleStateChange = () => {},\n  } = props;\n\n  const [t] = useTranslation();\n  const [isOpen, setIsOpen] = useState(openOnInitialLoad);\n  const popupRef = useRef();\n\n  const togglePopup = (e) => {\n    e.stopPropagation();\n    if (isOpen) {\n      setIsOpen(false);\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const annotationState = annotation.getStatus();\n  const icon = `icon-annotation-status-${annotationState === '' ? 'none' : annotationState.toLowerCase()}`;\n  const noteStateButtonClassName = classNames('overflow', { active: isOpen });\n  const dataElementWithID = `noteState-${annotation['Id']}`;\n\n  return (\n    <DataElementWrapper\n      className=\"NoteState\"\n      dataElement={dataElementWithID}\n      onClick={togglePopup}\n      ref={popupRef}\n    >\n      <Tooltip content={t('option.notesOrder.status')}>\n        <div className={noteStateButtonClassName}>\n          <Icon glyph={icon} />\n        </div>\n      </Tooltip>\n      {isOpen && (\n        <NoteStatePopup\n          triggerElementName={dataElementWithID}\n          handleStateChange={handleStateChange}\n          onClose={() => {\n            setIsOpen(false);\n          }}\n        />\n      )}\n    </DataElementWrapper>\n  );\n}\n\nNoteState.propTypes = propTypes;\n\nexport default NoteState;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport core from 'core';\n\nimport NoteState from './NoteState';\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\n\nconst propTypes = {\n  annotation: PropTypes.object,\n};\n\nfunction NoteStateContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation } = props;\n\n  const handleStateChange = React.useCallback(function handleStateChangeCallback(newValue) {\n    const stateAnnotation = createStateAnnotation(annotation, newValue, activeDocumentViewerKey);\n    annotation.addReply(stateAnnotation);\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotationManager.addAnnotation(stateAnnotation);\n    annotationManager.trigger('addReply', [stateAnnotation, annotation, annotationManager.getRootAnnotation(annotation)]);\n  }, [annotation, activeDocumentViewerKey]);\n\n  return (\n    <div>\n      <NoteState handleStateChange={handleStateChange} {...props} />\n    </div>\n  );\n}\n\nNoteStateContainer.propTypes = propTypes;\nexport default NoteStateContainer;\n","import NoteStateContainer from './NoteStateContainer';\n\nexport default NoteStateContainer;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Tooltip from 'components/Tooltip';\nimport Icon from 'components/Icon';\n\nconst NoteUnpostedCommentIndicator = ({ annotationId, pendingEditTextMap, pendingReplyMap, pendingAttachmentMap }) => {\n  const { t } = useTranslation();\n  const [hasUnpostedComment, setHasUnpostedComment] = useState(false);\n  const [hasUnpostedReply, setHasUnpostedReply] = useState(false);\n  const [hasUnpostedAttachment, setHasUnpostedAttachment] = useState(false);\n\n  useEffect(() => {\n    setHasUnpostedComment(pendingEditTextMap[annotationId]?.length > 0);\n    setHasUnpostedReply(pendingReplyMap[annotationId]?.length > 0);\n    setHasUnpostedAttachment(pendingAttachmentMap[annotationId]?.length > 0);\n  }, [pendingEditTextMap, pendingReplyMap, pendingAttachmentMap]);\n\n  return (\n    (hasUnpostedComment || hasUnpostedReply || hasUnpostedAttachment) ?\n      <div data-element=\"unpostedCommentIndicator\">\n        <Tooltip content={t('message.unpostedComment')}>\n          <div>\n            <Icon className=\"type-icon\" glyph={'icon-unposted-comment'} />\n          </div>\n        </Tooltip>\n      </div> :\n      null\n  );\n};\n\nexport default NoteUnpostedCommentIndicator;\n","import NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicatorContainer';\n\nexport default NoteUnpostedCommentIndicator;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteContext from 'components/Note/Context';\nimport NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicator';\n\nconst NoteUnpostedCommentIndicatorContainer = ({ annotationId }) => {\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'unpostedCommentIndicator'));\n  const { pendingEditTextMap, pendingReplyMap, pendingAttachmentMap } = React.useContext(NoteContext);\n\n  if (isDisabled) {\n    return null;\n  }\n  return (\n    <NoteUnpostedCommentIndicator\n      annotationId={annotationId}\n      pendingEditTextMap={pendingEditTextMap}\n      pendingReplyMap={pendingReplyMap}\n      pendingAttachmentMap={pendingAttachmentMap}\n    />);\n};\n\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport NotePopup from 'components/NotePopup';\nimport NoteState from 'components/NoteState';\nimport Icon from 'components/Icon';\nimport NoteUnpostedCommentIndicator from 'components/NoteUnpostedCommentIndicator';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport getColor from 'helpers/getColor';\nimport { isDarkColorHex } from 'helpers/color';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { NotesPanelSortStrategy } from 'constants/sortStrategies';\nimport Theme from 'constants/theme';\nimport Choice from 'components/Choice';\n\nimport './NoteHeader.scss';\n\nconst propTypes = {\n  icon: PropTypes.string,\n  iconColor: PropTypes.string,\n  color: PropTypes.string,\n  fillColor: PropTypes.string,\n  annotation: PropTypes.object,\n  language: PropTypes.string,\n  noteDateFormat: PropTypes.string,\n  isSelected: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  notesShowLastUpdatedDate: PropTypes.bool,\n  isUnread: PropTypes.bool,\n  renderAuthorName: PropTypes.func,\n  isNoteStateDisabled: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  noteIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n  activeTheme: PropTypes.string,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n  showAnnotationNumbering: PropTypes.bool,\n};\n\nfunction NoteHeader(props) {\n  const {\n    icon,\n    iconColor,\n    annotation,\n    language,\n    noteDateFormat,\n    isSelected,\n    setIsEditing,\n    notesShowLastUpdatedDate,\n    isReply,\n    isUnread,\n    renderAuthorName,\n    isNoteStateDisabled,\n    isEditing,\n    noteIndex,\n    sortStrategy,\n    activeTheme,\n    isMultiSelected,\n    isMultiSelectMode,\n    handleMultiSelect,\n    isGroupMember,\n    showAnnotationNumbering,\n    timezone,\n  } = props;\n\n  const [t] = useTranslation();\n\n  let date;\n  const dateCreated = (sortStrategy === NotesPanelSortStrategy.MODIFIED_DATE || (notesShowLastUpdatedDate && sortStrategy !== NotesPanelSortStrategy.CREATED_DATE)) ? getLatestActivityDate(annotation) : annotation.DateCreated;\n  if (timezone) {\n    const datetimeStr = dateCreated.toLocaleString('en-US', { timeZone: timezone });\n    date = new Date(datetimeStr);\n  } else {\n    date = dateCreated;\n  }\n\n  const numberOfReplies = annotation.getReplies().length;\n  let color = annotation[iconColor]?.toHexString?.();\n\n  if (activeTheme === Theme.DARK && color && isDarkColorHex(color)) {\n    color = '#FFFFFF';\n  }\n\n  const fillColor = getColor(annotation.FillColor);\n  const annotationAssociatedNumber = annotation.getAssociatedNumber();\n  const annotationDisplayedAssociatedNumber = `#${annotationAssociatedNumber} - `;\n\n  const authorAndDateClass = classNames('author-and-date', { isReply });\n  const noteHeaderClass = classNames('NoteHeader', { parent: !isReply && !isGroupMember });\n\n  return (\n    <div className={noteHeaderClass}>\n      {!isReply &&\n        <div className=\"type-icon-container\">\n          {isUnread &&\n            <div className=\"unread-notification\"></div>\n          }\n          <Icon className=\"type-icon\" glyph={icon} color={color} fillColor={fillColor} />\n        </div>\n      }\n      <div className={authorAndDateClass}>\n        <div className=\"author-and-overflow\">\n          <div className=\"author-and-time\">\n            <div className=\"author\">\n              {showAnnotationNumbering && annotationAssociatedNumber !== undefined &&\n                <span className=\"annotation-number\">{annotationDisplayedAssociatedNumber}</span>\n              }\n              {renderAuthorName(annotation)}\n            </div>\n            <div className=\"date-and-num-replies\">\n              <div className=\"date-and-time\">\n                {date ? dayjs(date).locale(language).format(noteDateFormat) : t('option.notesPanel.noteContent.noDate')}\n                {isGroupMember && ` (Page ${annotation.PageNumber})`}\n              </div>\n              {numberOfReplies > 0 && !isSelected &&\n                <div className=\"num-replies-container\">\n                  <Icon className=\"num-reply-icon\" glyph={'icon-chat-bubble'} />\n                  <div className=\"num-replies\">{numberOfReplies}</div>\n                </div>}\n            </div>\n          </div>\n          <div className=\"state-and-overflow\">\n            {isMultiSelectMode && !isGroupMember && !isReply &&\n              <Choice\n                id={`note-multi-select-toggle_${annotation.Id}`}\n                checked={isMultiSelected}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleMultiSelect(!isMultiSelected);\n                }}\n              />}\n            <NoteUnpostedCommentIndicator annotationId={annotation.Id} />\n            {!isNoteStateDisabled && !isReply && !isMultiSelectMode && !isGroupMember &&\n              <NoteState\n                annotation={annotation}\n                isSelected={isSelected}\n              />\n            }\n            {!isEditing && isSelected && !isMultiSelectMode && !isGroupMember &&\n              <NotePopup\n                noteIndex={noteIndex}\n                annotation={annotation}\n                setIsEditing={setIsEditing}\n                isReply={isReply}\n              />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nNoteHeader.propTypes = propTypes;\n\nexport default NoteHeader;","import NoteHeader from './NoteHeader';\n\nexport default NoteHeader;","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteTextPreview from './NoteTextPreview';\n\n\nfunction NoteTextPreviewContainer(props) {\n  const [notePanelWidth] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n    ],\n    shallowEqual,\n  );\n\n  return (\n    <NoteTextPreview {...props} panelWidth={notePanelWidth} />\n  );\n}\n\nexport default NoteTextPreviewContainer;","import NoteTextPreview from './NoteTextPreviewContainer';\n\nexport default NoteTextPreview;","const icons = {\n  pdf: 'ic-file-pdf',\n  image: 'ic-file-img',\n  cad: 'ic-file-cad',\n  doc: 'ic-file-doc',\n  ppt: 'ic-file-ppt',\n  xls: 'ic-file-xls',\n  unknown: 'ic-file-etc'\n};\n\nconst FileAttachmentUtils = window.Core.Annotations.FileAttachmentUtils;\n\nexport async function decompressFileContent(file) {\n  return FileAttachmentUtils.decompressWithFlateDecode(file.content, file.type);\n}\n\nexport async function setAnnotationAttachments(annotation, files = []) {\n  await annotation.setAttachments(files);\n}\n\nexport function isImage(file) {\n  if (file.type && file.type.startsWith('image/')) {\n    return true;\n  }\n  return false;\n}\n\nexport function getAttachmentIcon(file) {\n  if (isImage(file)) {\n    return icons.image;\n  }\n  const extension = file.name?.split('.').pop().toLowerCase();\n  switch (extension) {\n    case 'pdf':\n      return icons.pdf;\n    case 'cad':\n      return icons.cad;\n    case 'doc':\n    case 'docx':\n      return icons.doc;\n    case 'ppt':\n    case 'pptx':\n      return icons.ppt;\n    case 'xls':\n    case 'xlsx':\n      return icons.xls;\n    default:\n      return icons.unknown;\n  }\n}\n","import DOMPurify from 'dompurify';\n\nconst SVG_MIME_TYPE = 'image/svg+xml';\n\nconst hasFileSize = (file) => {\n  return file.size !== undefined;\n};\n\n// Taken from https://github.com/mattkrick/sanitize-svg/blob/master/src/sanitizeSVG.ts#L31\nconst readAsText = (svg) => {\n  return new Promise((resolve) => {\n    if (!hasFileSize(svg)) {\n      resolve(svg.toString('utf-8'));\n    } else {\n      const fileReader = new FileReader();\n      fileReader.onload = () => resolve(fileReader.result);\n      fileReader.readAsText(svg);\n    }\n  });\n};\n\nexport const isSVG = (file) => {\n  return file.type === SVG_MIME_TYPE;\n};\n\nexport const sanitizeSVG = async (file) => {\n  const svgText = await readAsText(file);\n  if (!svgText) {\n    return { svg: file };\n  }\n\n  const forbiddenTags = [];\n  DOMPurify.addHook('uponSanitizeElement', (_, hookEvent) => {\n    const { tagName, allowedTags } = hookEvent;\n    if (!allowedTags[tagName]) {\n      forbiddenTags.push(tagName);\n    }\n  });\n\n  const clean = DOMPurify.sanitize(svgText);\n  const svg = new Blob([clean], { type: SVG_MIME_TYPE });\n  return { svg, isDirty: forbiddenTags.length > 0 };\n};","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport { saveAs } from 'file-saver';\nimport Button from 'components/Button';\nimport Icon from 'components/Icon';\nimport Tooltip from 'components/Tooltip';\nimport { getAttachmentIcon, isImage, decompressFileContent } from 'helpers/ReplyAttachmentManager';\nimport { isSVG, sanitizeSVG } from 'helpers/sanitizeSVG';\n\nimport './ReplyAttachmentList.scss';\n\nconst ImagePreview = ({ file }) => {\n  const [t] = useTranslation();\n\n  const [src, setSrc] = useState();\n  const [isDirtySVG, setIsDirtySvg] = useState(false);\n\n  useEffect(() => {\n    const processImagePreview = async () => {\n      setIsDirtySvg(false);\n      let fileToSanitize = file;\n\n      const isImageFromPDF = !(file instanceof File) && !file.url;\n      if (isImageFromPDF) {\n        fileToSanitize = await decompressFileContent(file);\n      }\n\n      if (file instanceof File || isImageFromPDF) {\n        if (isSVG(file)) {\n          const { svg, isDirty } = await sanitizeSVG(fileToSanitize);\n          setSrc(URL.createObjectURL(svg));\n          setIsDirtySvg(isDirty);\n        } else {\n          setSrc(URL.createObjectURL(fileToSanitize));\n        }\n      }\n    };\n    processImagePreview();\n  }, [file]);\n\n  return (\n    <div className={classNames({\n      'reply-attachment-preview': true,\n      'dirty': isDirtySVG,\n    })}>\n      <img src={src} />\n      {isDirtySVG && <span className=\"reply-attachment-preview-message\">{t('message.svgMalicious')}</span>}\n    </div>\n  );\n};\n\nconst ReplyAttachmentList = ({ files, isEditing, fileDeleted }) => {\n  const [tabManager, previewEnabled] = useSelector((state) => [\n    selectors.getTabManager(state),\n    selectors.isReplyAttachmentPreviewEnabled(state)\n  ]);\n\n  const onClick = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!tabManager) {\n      return console.warn('Can\\'t open attachment in non-multi-tab mode');\n    }\n\n    let fileData;\n    if (file instanceof File) {\n      fileData = file;\n    } else if (file.url) {\n      fileData = file.url;\n    } else {\n      fileData = await decompressFileContent(file);\n    }\n\n    fileData && tabManager.addTab(fileData, {\n      filename: file.name,\n      setActive: true,\n      saveCurrentActiveTabState: true\n    });\n  };\n\n  const onDelete = (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    fileDeleted(file);\n  };\n\n  const onDownload = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fileData = file.url ? file.url : await decompressFileContent(file);\n    saveAs(fileData, file.name);\n  };\n\n  return (\n    <div className=\"reply-attachment-list\">\n      {files.map((file, i) => (\n        <div\n          className=\"reply-attachment\"\n          key={i}\n          onClick={(e) => onClick(e, file)}\n        >\n          {previewEnabled && isImage(file) && (\n            <ImagePreview file={file} />\n          )}\n          <div className=\"reply-attachment-info\">\n            <Icon\n              className=\"reply-attachment-icon\"\n              glyph={getAttachmentIcon(file)}\n            />\n            <Tooltip content={file.name}>\n              <div className=\"reply-file-name\">{file.name}</div>\n            </Tooltip>\n            {isEditing ? (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-close\"\n                onClick={(e) => onDelete(e, file)}\n              />\n            ) : (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-download\"\n                onClick={(e) => onDownload(e, file)}\n              />\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ReplyAttachmentList;\n","import ReplyAttachmentList from './ReplyAttachmentList';\n\nexport default ReplyAttachmentList;","/*\n * Transforming RichText Style object into the Object acceptable by React Quill component.\n */\n\nconst setReactQuillContent = (annotation) => {\n  const richTextStyle = annotation.getRichTextStyle();\n  const indexes = Object.keys(richTextStyle);\n  const editor = annotation.editor;\n  const text = editor.getText();\n  const ops = [];\n\n  for (let i = 0; i < indexes.length; i++) {\n    const element = richTextStyle[indexes[i]];\n    const attr = getAttributtes(element);\n\n    if (isNaN(indexes[i])) {\n      continue;\n    }\n\n    const lastIndex = isNaN(indexes[i + 1]) ? text.length : indexes[i + 1];\n    const textSlice = text.slice(indexes[i], lastIndex);\n\n    ops.push({ insert: textSlice, attributes: attr });\n  }\n\n  editor.setContents(ops);\n  editor.setSelection(text.length, 0);\n};\n\nconst getAttributtes = (element) => {\n  const attr = {};\n  if (element['font-weight']) {\n    attr['bold'] = true;\n  }\n  if (element['font-style']) {\n    attr['italic'] = true;\n  }\n  if (element['color']) {\n    attr['color'] = element['color'];\n  }\n  if (element['text-decoration']) {\n    const decoration = element['text-decoration'].split(' ');\n\n    if (decoration.includes('line-through')) {\n      attr['strike'] = true;\n    }\n    if (decoration.includes('word')) {\n      attr['underline'] = true;\n    }\n  }\n\n  return attr;\n};\n\nexport default setReactQuillContent;\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Autolinker from 'autolinker';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport isString from 'lodash/isString';\n\nimport NoteTextarea from 'components/NoteTextarea';\nimport NoteContext from 'components/Note/Context';\nimport NoteHeader from 'components/NoteHeader';\nimport NoteTextPreview from 'components/NoteTextPreview';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\n\nimport mentionsManager from 'helpers/MentionsManager';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport setReactQuillContent from 'helpers/setReactQuillContent';\nimport { isDarkColorHex } from 'helpers/color';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\n\nimport core from 'core';\nimport { getDataWithKey, mapAnnotationToKey } from 'constants/map';\nimport Theme from 'constants/theme';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\nimport DataElementWrapper from '../DataElementWrapper';\n\nimport './NoteContent.scss';\n\ndayjs.extend(LocalizedFormat);\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isEditing: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  noteIndex: PropTypes.number,\n  isUnread: PropTypes.bool,\n  isNonReplyNoteRead: PropTypes.bool,\n  onReplyClicked: PropTypes.func,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n};\n\nconst NoteContent = ({\n  annotation,\n  isEditing,\n  setIsEditing,\n  noteIndex,\n  isUnread,\n  isNonReplyNoteRead,\n  onReplyClicked,\n  isMultiSelected,\n  isMultiSelectMode,\n  handleMultiSelect,\n  isGroupMember,\n}) => {\n  const [\n    noteDateFormat,\n    iconColor,\n    isNoteStateDisabled,\n    language,\n    notesShowLastUpdatedDate,\n    canCollapseTextPreview,\n    canCollapseReplyPreview,\n    activeTheme,\n    timezone,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteDateFormat(state),\n      selectors.getIconColor(state, mapAnnotationToKey(annotation)),\n      selectors.isElementDisabled(state, 'notePopupState'),\n      selectors.getCurrentLanguage(state),\n      selectors.notesShowLastUpdatedDate(state),\n      selectors.isNotesPanelTextCollapsingEnabled(state),\n      selectors.isNotesPanelRepliesCollapsingEnabled(state),\n      selectors.getActiveTheme(state),\n      selectors.getTimezone(state),\n    ],\n    shallowEqual,\n  );\n\n  const {\n    isSelected,\n    searchInput,\n    resize,\n    pendingEditTextMap,\n    onTopNoteContentClicked,\n    sortStrategy,\n    showAnnotationNumbering,\n    setPendingEditText\n  } = useContext(NoteContext);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n\n  const isReply = annotation.isReply();\n\n  const [attachments, setAttachments] = useState([]);\n\n  useEffect(() => {\n    setAttachments(annotation.getAttachments());\n  }, [annotation]);\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'modify') {\n        annotations.forEach((annot) => {\n          if (annot.Id === annotation.Id) {\n            setAttachments(annot.getAttachments());\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener);\n    };\n  }, [annotation]);\n\n  useDidUpdate(() => {\n    if (!isEditing) {\n      dispatch(actions.finishNoteEditing());\n    }\n\n    resize();\n  }, [isEditing]);\n\n  const renderAuthorName = useCallback(\n    (annotation) => {\n      const name = core.getDisplayAuthor(annotation['Author']);\n\n      return name ? (\n        highlightSearchInput(name, searchInput)\n      ) : (\n        t('option.notesPanel.noteContent.noName')\n      );\n    },\n    [searchInput],\n  );\n\n  const renderContents = useCallback(\n    (contents, richTextStyle, fontColor) => {\n      const autolinkerContent = [];\n      Autolinker.link(contents, {\n        stripPrefix: false,\n        stripTrailingSlash: false,\n        replaceFn(match) {\n          const href = match.getAnchorHref();\n          const anchorText = match.getAnchorText();\n          const offset = match.getOffset();\n\n          switch (match.getType()) {\n            case 'url':\n            case 'email':\n            case 'phone':\n              autolinkerContent.push({\n                href,\n                text: anchorText,\n                start: offset,\n                end: offset + match.getMatchedText().length\n              });\n          }\n        }\n      });\n      if (!autolinkerContent.length) {\n        const highlightResult = highlightSearchInput(contents, searchInput, richTextStyle);\n        const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n        const shouldCollapseReply = isReply && canCollapseReplyPreview;\n\n        /*\n         * Case there is no value on Search input, and the collapse of the text is allowed,\n         * just render the value with Text preview component\n         */\n        if (!searchInput && (shouldCollapseAnnotationText || shouldCollapseReply)) {\n          return (\n            <NoteTextPreview linesToBreak={3} comment renderRichText={renderRichText} richTextStyle={richTextStyle} resize={resize} style={fontColor}>\n              {contents}\n            </NoteTextPreview>\n          );\n        }\n        return highlightResult;\n      }\n      const contentToRender = [];\n      let strIdx = 0;\n      // Iterate through each case detected by Autolinker, wrap all content\n      // before the current link in a span tag, and wrap the current link\n      // in our own anchor tag\n      autolinkerContent.forEach((anchorData, forIdx) => {\n        const { start, end, href } = anchorData;\n        if (strIdx < start) {\n          contentToRender.push(\n            <span key={`span_${forIdx}`}>\n              {\n                highlightSearchInput(\n                  contents,\n                  searchInput,\n                  richTextStyle,\n                  strIdx,\n                  start\n                )\n              }\n            </span>\n          );\n        }\n        contentToRender.push(\n          <a\n            href={href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            key={`a_${forIdx}`}\n          >\n            {\n              highlightSearchInput(\n                contents,\n                searchInput,\n                richTextStyle,\n                start,\n                end\n              )\n            }\n          </a>\n        );\n        strIdx = end;\n      });\n      // Ensure any content after the last link is accounted for\n      if (strIdx < contents.length - 1) {\n        contentToRender.push(highlightSearchInput(\n          contents,\n          searchInput,\n          richTextStyle,\n          strIdx\n        ));\n      }\n      return contentToRender;\n    },\n    [searchInput]\n  );\n\n  const icon = getDataWithKey(mapAnnotationToKey(annotation)).icon;\n  let customData;\n  try {\n    customData = JSON.parse(annotation.getCustomData('trn-mention'));\n  } catch (e) {\n    customData = annotation.getCustomData('trn-mention');\n  }\n  const contents = customData?.contents || annotation.getContents();\n  const contentsToRender = annotation.getContents();\n  const richTextStyle = annotation.getRichTextStyle();\n  let textColor = annotation['TextColor'];\n\n  if (activeTheme === Theme.DARK) {\n    if (textColor && isDarkColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(255, 255, 255, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isDarkColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = '#FFFFFF';\n        }\n      });\n    }\n  }\n  // This is the text placeholder passed to the ContentArea\n  // It ensures that if we try and edit, we get the right placeholder\n  // depending on whether the comment has been saved to the annotation or not\n  const thereIsNoUnpostedEdit = typeof pendingEditTextMap[annotation.Id] === 'undefined';\n  let textAreaValue;\n  if (contents && thereIsNoUnpostedEdit) {\n    textAreaValue = contents;\n  } else {\n    textAreaValue = pendingEditTextMap[annotation.Id];\n  }\n\n  const handleNoteContentClicked = () => {\n    if (!isGroupMember) {\n      if (isReply) {\n        onReplyClicked(annotation);\n      } else if (!isEditing) {\n        // collapse expanded note when top noteContent is clicked if it's not being edited\n        onTopNoteContentClicked();\n      }\n    }\n  };\n\n  const handleContentsClicked = (e) => {\n    if (window.getSelection()?.toString()) {\n      e?.stopPropagation();\n    }\n  };\n\n  const noteContentClass = classNames({\n    NoteContent: true,\n    isReply,\n    unread: isUnread, // The note content itself is unread or it has unread replies\n    clicked: isNonReplyNoteRead, // The top note content is read\n  });\n\n  const content = useMemo(\n    () => {\n      const contentStyle = {};\n      if (textColor) {\n        contentStyle.color = textColor.toHexString();\n      }\n\n      return (\n        <>\n          {(isEditing && isSelected) ? (\n            <ContentArea\n              annotation={annotation}\n              noteIndex={noteIndex}\n              setIsEditing={setIsEditing}\n              textAreaValue={textAreaValue}\n              onTextAreaValueChange={setPendingEditText}\n              pendingText={pendingEditTextMap[annotation.Id]}\n            />\n          ) : (\n            contentsToRender && (\n              <div className={classNames('container', { 'reply-content': isReply })} onClick={handleContentsClicked}>\n                {isReply && (attachments.length > 0) && (\n                  <ReplyAttachmentList\n                    files={attachments}\n                    isEditing={false}\n                  />\n                )}\n                {renderContents(contentsToRender, richTextStyle, contentStyle)}\n              </div>\n            )\n          )}\n        </>\n      );\n    },\n    [annotation, isSelected, isEditing, setIsEditing, contents, renderContents, textAreaValue, setPendingEditText, attachments]\n  );\n\n  const text = annotation.getCustomData('trn-annot-preview');\n  const textPreview = useMemo(\n    () => {\n      if (text === '') {\n        return null;\n      }\n\n      const highlightSearchResult = highlightSearchInput(text, searchInput);\n      const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n      // If we have a search result do not use text\n      // preview but instead show the entire text\n      if (isString(highlightSearchResult) && shouldCollapseAnnotationText) {\n        return (\n          <DataElementWrapper\n            className=\"selected-text-preview\"\n            dataElement=\"notesSelectedTextPreview\">\n            <NoteTextPreview linesToBreak={3}>\n              {`\"${highlightSearchResult}\"`}\n            </NoteTextPreview>\n          </DataElementWrapper>\n        );\n      }\n      return (\n        <div className=\"selected-text-preview\" style={{ paddingRight: '12px' }}>\n          {highlightSearchResult}\n        </div>\n      );\n    }, [text, searchInput]);\n\n  const header = useMemo(\n    () => {\n      return (\n        <NoteHeader\n          icon={icon}\n          iconColor={iconColor}\n          annotation={annotation}\n          language={language}\n          noteDateFormat={noteDateFormat}\n          isSelected={isSelected}\n          setIsEditing={setIsEditing}\n          notesShowLastUpdatedDate={notesShowLastUpdatedDate}\n          isReply={isReply}\n          isUnread={isUnread}\n          renderAuthorName={renderAuthorName}\n          isNoteStateDisabled={isNoteStateDisabled}\n          isEditing={isEditing}\n          noteIndex={noteIndex}\n          sortStrategy={sortStrategy}\n          activeTheme={activeTheme}\n          handleMultiSelect={handleMultiSelect}\n          isMultiSelected={isMultiSelected}\n          isMultiSelectMode={isMultiSelectMode}\n          isGroupMember={isGroupMember}\n          showAnnotationNumbering={showAnnotationNumbering}\n          timezone={timezone}\n        />\n      );\n    }, [icon, iconColor, annotation, language, noteDateFormat, isSelected, setIsEditing, notesShowLastUpdatedDate, isReply, isUnread, renderAuthorName, core.getDisplayAuthor(annotation['Author']), isNoteStateDisabled, isEditing, noteIndex, getLatestActivityDate(annotation), sortStrategy, handleMultiSelect, isMultiSelected, isMultiSelectMode, isGroupMember, timezone]\n  );\n\n  return (\n    <div className={noteContentClass} onClick={handleNoteContentClicked}>\n      {header}\n      {textPreview}\n      {content}\n    </div>\n  );\n};\n\nNoteContent.propTypes = propTypes;\n\nexport default NoteContent;\n\n// a component that contains the content textarea, the save button and the cancel button\nconst ContentArea = ({\n  annotation,\n  noteIndex,\n  setIsEditing,\n  textAreaValue,\n  onTextAreaValueChange,\n  pendingText\n}) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isMentionEnabled,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    isNotesPanelOpen\n  ] = useSelector((state) => [\n    selectors.getAutoFocusNoteOnAnnotationSelection(state),\n    selectors.getIsMentionEnabled(state),\n    selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n  ]);\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n  const isReply = annotation.isReply();\n  const {\n    setCurAnnotId,\n    pendingAttachmentMap,\n    deleteAttachment,\n    clearAttachments,\n    addAttachments\n  } = useContext(NoteContext);\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    if ((isNotesPanelOpen || isInlineCommentOpen) && textareaRef.current) {\n      const editor = textareaRef.current.getEditor();\n      const isFreeTextAnnnotation = annotation && annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n      isFreeTextAnnnotation && editor.setText('');\n      const container = annotation.editor?.getContainerElement?.();\n      container?.parentNode.removeChild(container);\n      annotation.editor = editor;\n\n      /**\n       * If there is a pending text we should update the annotation rich text style\n       * with this pending text style.\n       */\n      if (pendingText) {\n        setAnnotationRichTextStyle(editor, annotation);\n      }\n\n      setTimeout(() => {\n        // need setTimeout because textarea seem to rerender and unfocus\n        if (isMentionEnabled) {\n          textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n          const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n          if (ids.length) {\n            editor.setText(plainTextValue);\n          }\n        }\n\n        if (shouldNotFocusOnInput) {\n          return;\n        }\n\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\n          textareaRef.current.focus();\n\n          const annotRichTextStyle = annotation.getRichTextStyle();\n          if (annotRichTextStyle) {\n            setReactQuillContent(annotation);\n          }\n        }\n      }, 100);\n\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      setTimeout(() => {\n        annotation.editor.setSelection(textLength, textLength);\n      }, 100);\n    }\n  }, [isNotesPanelOpen, isInlineCommentOpen, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    if (isReply && pendingAttachments.length === 0) {\n      // Load attachments\n      const attachments = annotation.getAttachments();\n      addAttachments(annotation.Id, attachments);\n    }\n  }, []);\n\n  const setContents = async (e) => {\n    // prevent the textarea from blurring out which will unmount these two buttons\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n    setAnnotationRichTextStyle(editor, annotation);\n\n    if (isMentionEnabled) {\n      const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n      // If modified, double check for ids\n      const annotMentionData = mentionsManager.extractMentionDataFromAnnot(annotation);\n      annotMentionData.mentions.forEach((mention) => {\n        if (plainTextValue.includes(mention.value)) {\n          ids.push(mention.id);\n        }\n      });\n\n      annotation.setCustomData('trn-mention', JSON.stringify({\n        contents: textAreaValue,\n        ids,\n      }));\n      annotation.setContents(plainTextValue);\n    } else {\n      annotation.setContents(textAreaValue);\n    }\n\n    await setAnnotationAttachments(annotation, pendingAttachmentMap[annotation.Id]);\n\n    const source = (annotation instanceof window.Core.Annotations.FreeTextAnnotation)\n      ? 'textChanged' : 'noteChanged';\n    core.getAnnotationManager().trigger('annotationChanged', [[annotation], 'modify', { 'source': source }]);\n\n    if (annotation instanceof window.Core.Annotations.FreeTextAnnotation) {\n      core.drawAnnotationsFromList([annotation]);\n    }\n\n    setIsEditing(false, noteIndex);\n    // Only set comment to unposted state if it is not empty\n    if (textAreaValue !== '') {\n      onTextAreaValueChange(undefined, annotation.Id);\n    }\n    clearAttachments(annotation.Id);\n  };\n\n  const onBlur = () => {\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setCurAnnotId(annotation.Id);\n  };\n\n  const contentClassName = classNames('edit-content', { 'reply-content': isReply });\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (\n    <div className={contentClassName}>\n      {isReply && pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <NoteTextarea\n        ref={(el) => {\n          textareaRef.current = el;\n        }}\n        value={textAreaValue}\n        onChange={(value) => onTextAreaValueChange(value, annotation.Id)}\n        onSubmit={setContents}\n        isReply={isReply}\n        onBlur={onBlur}\n        onFocus={onFocus}\n      />\n      <div className=\"edit-buttons\">\n        <button\n          className=\"cancel-button\"\n          onClick={(e) => {\n            e.stopPropagation();\n            setIsEditing(false, noteIndex);\n            // Clear pending text\n            onTextAreaValueChange(undefined, annotation.Id);\n            clearAttachments(annotation.Id);\n          }}\n        >\n          {t('action.cancel')}\n        </button>\n        <button\n          className={`save-button${!textAreaValue ? ' disabled' : ''}`}\n          disabled={!textAreaValue}\n          onClick={(e) => {\n            e.stopPropagation();\n            setContents(e);\n          }}\n        >\n          {t('action.save')}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nContentArea.propTypes = {\n  noteIndex: PropTypes.number.isRequired,\n  annotation: PropTypes.object.isRequired,\n  setIsEditing: PropTypes.func.isRequired,\n  textAreaValue: PropTypes.string,\n  onTextAreaValueChange: PropTypes.func.isRequired,\n  pendingText: PropTypes.string\n};\n\nconst getRichTextSpan = (text, richTextStyle, key) => {\n  const style = {\n    fontWeight: richTextStyle['font-weight'],\n    fontStyle: richTextStyle['font-style'],\n    textDecoration: richTextStyle['text-decoration'],\n    color: richTextStyle['color']\n  };\n  if (style.textDecoration) {\n    style.textDecoration = style.textDecoration.replace('word', 'underline');\n  }\n  return (\n    <span style={style} key={key}>{text}</span>\n  );\n};\n\nconst renderRichText = (text, richTextStyle, start) => {\n  if (!richTextStyle || !text) {\n    return text;\n  }\n\n  const styles = {};\n  const indices = Object.keys(richTextStyle).map(Number).sort((a, b) => a - b);\n  for (let i = 0; i < indices.length; i++) {\n    let index = indices[i] - start;\n    index = Math.min(Math.max(index, 0), text.length);\n    styles[index] = richTextStyle[indices[i]];\n    if (index === text.length) {\n      break;\n    }\n  }\n\n  const contentToRender = [];\n  const styleIndices = Object.keys(styles).map(Number).sort((a, b) => a - b);\n  for (let i = 1; i < styleIndices.length; i++) {\n    contentToRender.push(getRichTextSpan(\n      text.slice(styleIndices[i - 1], styleIndices[i]),\n      styles[styleIndices[i - 1]],\n      `richtext_span_${i}`\n    ));\n  }\n\n  return contentToRender;\n};\n\nconst highlightSearchInput = (fullText, searchInput, richTextStyle, start = 0, end = fullText.length) => {\n  const text = fullText.slice(start, end);\n  const loweredText = text.toLowerCase();\n  const loweredSearchInput = searchInput.toLowerCase();\n  if (richTextStyle) {\n    richTextStyle['0'] = richTextStyle['0'] || {};\n    richTextStyle[fullText.length] = richTextStyle[fullText.length] || {};\n  }\n  let lastFoundInstance = loweredText.indexOf(loweredSearchInput);\n  if (!loweredSearchInput.trim() || lastFoundInstance === -1) {\n    return renderRichText(text, richTextStyle, start);\n  }\n  const contentToRender = [];\n  const allFoundPositions = [lastFoundInstance];\n  // Escape all RegExp special characters\n  const regexSafeSearchInput = loweredSearchInput.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  if (new RegExp(`(${regexSafeSearchInput})`, 'gi').test(loweredText)) {\n    while (lastFoundInstance !== -1) {\n      lastFoundInstance = loweredText.indexOf(loweredSearchInput, lastFoundInstance + loweredSearchInput.length);\n      if (lastFoundInstance !== -1) {\n        allFoundPositions.push(lastFoundInstance);\n      }\n    }\n  }\n  allFoundPositions.forEach((position, idx) => {\n    // Account for any content at the beginning of the string before the first\n    // instance of the searchInput\n    if (idx === 0 && position !== 0) {\n      contentToRender.push(renderRichText(text.substring(0, position), richTextStyle, start));\n    }\n    contentToRender.push(\n      <span className=\"highlight\" key={`highlight_span_${idx}`}>\n        {\n          renderRichText(\n            text.substring(position, position + loweredSearchInput.length),\n            richTextStyle,\n            start + position)\n        }\n      </span>\n    );\n    if (\n      // Ensure that we do not try to make an out-of-bounds access\n      position + loweredSearchInput.length < loweredText.length\n      // Ensure that this is the end of the allFoundPositions array\n      && position + loweredSearchInput.length !== allFoundPositions[idx + 1]\n    ) {\n      contentToRender.push(renderRichText(\n        text.substring(position + loweredSearchInput.length, allFoundPositions[idx + 1]),\n        richTextStyle,\n        start + position + loweredSearchInput.length\n      ));\n    }\n  });\n  return contentToRender;\n};\n","import NoteContent from './NoteContent';\n\nexport default NoteContent;","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport NoteContext from 'components/Note/Context';\nimport NoteTextarea from 'components/NoteTextarea';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\nimport Button from 'components/Button';\nimport classNames from 'classnames';\nimport core from 'core';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\n\nimport './ReplyArea.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n};\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotation, isUnread, onPendingReplyChange }) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isReadOnly,\n    isReplyDisabled,\n    isReplyDisabledForAnnotation,\n    isMentionEnabled,\n    isNoteEditingTriggeredByAnnotationPopup,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isElementDisabled(state, 'noteReply'),\n      selectors.getIsReplyDisabled(state)?.(annotation),\n      selectors.getIsMentionEnabled(state),\n      selectors.getIsNoteEditing(state),\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n  const {\n    isContentEditable,\n    isSelected,\n    pendingReplyMap,\n    setPendingReply,\n    isExpandedFromSearch,\n    scrollToSelectedAnnot,\n    setCurAnnotId,\n    pendingAttachmentMap,\n    clearAttachments,\n    deleteAttachment\n  } = useContext(NoteContext);\n  const [isFocused, setIsFocused] = useState(false);\n  const dispatch = useDispatch();\n  const textareaRef = useRef();\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useDidUpdate(() => {\n    if (!isFocused) {\n      dispatch(actions.finishNoteEditing());\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (shouldNotFocusOnInput) {\n      return;\n    }\n\n    if (\n      isNoteEditingTriggeredByAnnotationPopup &&\n      isSelected &&\n      !isContentEditable &&\n      autoFocusNoteOnAnnotationSelection &&\n      textareaRef &&\n      textareaRef.current\n    ) {\n      textareaRef.current.focus();\n    }\n  }, [isContentEditable, isNoteEditingTriggeredByAnnotationPopup, isSelected, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    // when search item, should disable auto focus\n    if (!isExpandedFromSearch && scrollToSelectedAnnot) {\n      // use \"setTimeout\" to wait for element to be added before focusing to have the blinking text cursor appear\n      setTimeout(() => {\n        // calling focus() cause the \"NotePanel\" to scroll to note that being focused.\n        // we don't want to jump to the selected annotation when scrolling up and down, so only focus once\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\n          textareaRef.current.focus();\n        }\n      }, 100);\n    }\n    if (textareaRef && textareaRef.current) {\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      const editor = textareaRef.current.getEditor();\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n      setTimeout(() => {\n        textareaRef.current.editor.setSelection(textLength, textLength);\n      }, 100);\n    }\n  }, []);\n\n  const postReply = async (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n    e.stopPropagation();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n\n    const annotationHasNoContents = !annotation.getContents();\n    if (isMentionEnabled) {\n      if (annotationHasNoContents && isContentEditable) {\n        const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(replyText);\n\n        annotation.setCustomData('trn-mention', JSON.stringify({\n          contents: replyText,\n          ids,\n        }));\n        core.setNoteContents(annotation, plainTextValue, activeDocumentViewerKey);\n      } else {\n        const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n        setAnnotationRichTextStyle(editor, replyAnnotation);\n        await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n        core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n      }\n    } else {\n      if (annotationHasNoContents && isContentEditable) {\n        core.setNoteContents(annotation, replyText, activeDocumentViewerKey);\n        setAnnotationRichTextStyle(editor, annotation);\n      } else {\n        const replyAnnotation = core.createAnnotationReply(annotation, replyText);\n        setAnnotationRichTextStyle(editor, replyAnnotation);\n        await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n        core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[replyAnnotation], 'modify', {}]);\n      }\n    }\n\n    setPendingReply('', annotation.Id);\n    clearAttachments(annotation.Id);\n  };\n\n  const ifReplyNotAllowed =\n    isReadOnly ||\n    isReplyDisabled ||\n    isReplyDisabledForAnnotation;\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n    unread: isUnread,\n  });\n\n  const replyButtonClass = classNames({\n    'reply-button': true,\n    disabled: !pendingReplyMap[annotation.Id]\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value, annotation.Id);\n    onPendingReplyChange && onPendingReplyChange();\n  };\n\n  const onBlur = () => {\n    setIsFocused(false);\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setIsFocused(true);\n    setCurAnnotId(annotation.Id);\n  };\n\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (ifReplyNotAllowed || !isSelected) ? null : (\n    <form onSubmit={postReply} className=\"reply-area-container\">\n      {pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <div className=\"reply-area-with-button\">\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReplyMap[annotation.Id]}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            onSubmit={postReply}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            isReply\n          />\n        </div>\n        <div className=\"reply-button-container\">\n          <Button\n            img=\"icon-post-reply\"\n            className={replyButtonClass}\n            onClick={postReply}\n            isSubmitType\n          />\n        </div>\n      </div>\n    </form>\n  );\n};\n\nReplyArea.propTypes = propTypes;\n\nexport default ReplyArea;\n","import ReplyArea from './ReplyArea';\n\nexport default ReplyArea;","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Icon from 'components/Icon';\nimport NoteContent from 'components/NoteContent';\nimport PropTypes from 'prop-types';\nimport core from 'core';\nimport actions from 'actions';\n\nconst propTypes = {\n  groupAnnotations: PropTypes.array.isRequired,\n  isMultiSelectMode: PropTypes.bool.isRequired,\n};\n\nconst NoteGroupSection = ({\n  groupAnnotations,\n  isMultiSelectMode,\n}) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [isViewingGroupAnnots, setIsViewingGroupAnnots] = useState(false);\n\n  const upArrow = 'ic_chevron_up_black_24px';\n  const downArrow = 'ic_chevron_down_black_24px';\n\n  const ViewAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(true);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.open')}\n      <Icon glyph={downArrow} />\n    </div>\n  );\n  const CloseAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(false);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.close')}\n      <Icon glyph={upArrow} />\n    </div>\n  );\n\n  return (\n    <div\n      className=\"group-section\"\n    >\n      {isViewingGroupAnnots ? CloseAllAnnotsButton : ViewAllAnnotsButton}\n      {isViewingGroupAnnots &&\n        groupAnnotations.map((groupAnnotation, i) => {\n          // Ignore the group primary annotation\n          if (i === 0) {\n            return null;\n          }\n          return (\n            <div\n              key={groupAnnotation.Id}\n              className=\"group-child\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                core.selectAnnotation(groupAnnotation);\n                core.jumpToAnnotation(groupAnnotation);\n                dispatch(actions.openElement('annotationPopup'));\n              }}\n            >\n              <NoteContent\n                key={groupAnnotation.Id}\n                annotation={groupAnnotation}\n                isUnread={false}\n                isGroupMember={true}\n                isMultiSelectMode={isMultiSelectMode}\n              />\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nNoteGroupSection.propTypes = propTypes;\n\nexport default NoteGroupSection;","import React, { useEffect, useState, useCallback } from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport core from 'core';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { createPortal } from 'react-dom';\nimport { getAnnotationPosition } from '../../helpers/getPopupPosition';\n\nimport './AnnotationNoteConnectorLine.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst LineConnectorPortal = ({ children }) => {\n  const mount = getRootNode().querySelector('#line-connector-root');\n  const el = document.createElement('div');\n  el.setAttribute('data-element', 'annotationNoteConnectorLine');\n\n  useEffect(() => {\n    mount.appendChild(el);\n    return () => mount.removeChild(el);\n  }, [el, mount]);\n\n  return createPortal(children, el);\n};\n\nconst AnnotationNoteConnectorLine = ({ annotation, noteContainerRef }) => {\n  const [\n    notePanelWidth,\n    lineIsOpen,\n    notePanelIsOpen,\n    isLineDisabled,\n    documentContainerWidth,\n    documentContainerHeight,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n      selectors.isElementOpen(state, 'annotationNoteConnectorLine'),\n      selectors.isElementOpen(state, 'notesPanel'),\n      selectors.isElementDisabled(state, 'annotationNoteConnectorLine'),\n      selectors.getDocumentContainerWidth(state),\n      selectors.getDocumentContainerHeight(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  // Right Horizontal Line\n  const [rightHorizontalLineWidth, setRightHorizontalLineWidth] = useState(0);\n  const [rightHorizontalLineTop, setRightHorizontalLineTop] = useState(0);\n  const [rightHorizontalLineRight, setRightHorizontalLineRight] = useState(0);\n\n  // Left Horizontal Line\n  const [leftHorizontalLineWidth, setLeftHorizontalLineWidth] = useState(0);\n  const [leftHorizontalLineTop, setLeftHorizontalLineTop] = useState(0);\n  const [leftHorizontalLineRight, setLeftHorizontalLineRight] = useState(0);\n\n  const {\n    bottomRight: annotationBottomRight,\n    topLeft: annotationTopLeft\n  } = getAnnotationPosition(annotation, activeDocumentViewerKey);\n\n  const getAnnotationLineOffset = useCallback(() => {\n    if (annotation.Subject === 'Note') {\n      return 4;\n    }\n    return 15;\n  }, [annotation]);\n\n  useEffect(() => {\n    const { scrollTop, scrollLeft } = core.getScrollViewElement(activeDocumentViewerKey);\n    const notePanelLeftPadding = 16;\n\n    const annotWidthInPixels = annotationBottomRight.x - annotationTopLeft.x;\n    const annotHeightInPixels = annotationBottomRight.y - annotationTopLeft.y;\n\n    setRightHorizontalLineRight(notePanelWidth - notePanelLeftPadding);\n    setRightHorizontalLineTop(noteContainerRef.current.getBoundingClientRect().top);\n\n    const lineWidth = window.innerWidth - notePanelWidth - annotationTopLeft.x + notePanelLeftPadding + scrollLeft - annotWidthInPixels;\n    const rightHorizontalLineWidthRatio = 0.75;\n    setRightHorizontalLineWidth(lineWidth * rightHorizontalLineWidthRatio);\n    setLeftHorizontalLineWidth(lineWidth - rightHorizontalLineWidth - getAnnotationLineOffset());\n\n    setLeftHorizontalLineRight(notePanelWidth - notePanelLeftPadding + rightHorizontalLineWidth);\n\n    setLeftHorizontalLineTop(annotationTopLeft.y + (annotHeightInPixels / 2) - scrollTop);\n\n    const onPageNumberUpdated = () => {\n      dispatch(actions.closeElement('annotationNoteConnectorLine'));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\n    };\n  }, [noteContainerRef, notePanelWidth, annotationBottomRight, annotationTopLeft, documentContainerWidth, documentContainerHeight, dispatch, activeDocumentViewerKey]);\n\n  if (lineIsOpen && notePanelIsOpen && !isLineDisabled) {\n    const verticalHeight = Math.abs(rightHorizontalLineTop - leftHorizontalLineTop);\n    const horizontalLineHeight = 2;\n    // Add HorizontalLineHeight of 2px when annot is above note to prevent little gap between lines\n    const verticalTop = rightHorizontalLineTop > leftHorizontalLineTop ? leftHorizontalLineTop + horizontalLineHeight : rightHorizontalLineTop;\n\n    return (\n      <LineConnectorPortal>\n        <div className=\"horizontalLine\" style={{ width: rightHorizontalLineWidth, right: rightHorizontalLineRight, top: rightHorizontalLineTop }} />\n        <div className=\"verticalLine\" style={{ height: verticalHeight, top: verticalTop, right: rightHorizontalLineRight + rightHorizontalLineWidth }} />\n        <div className=\"horizontalLine\" style={{ width: leftHorizontalLineWidth, right: leftHorizontalLineRight, top: leftHorizontalLineTop }}>\n          <div className=\"arrowHead\" />\n        </div>\n      </LineConnectorPortal>);\n  }\n  return null;\n};\n\nexport default AnnotationNoteConnectorLine;\n","import AnnotationNoteConnectorLine from './AnnotationNoteConnectorLine';\n\nexport default AnnotationNoteConnectorLine;","import React, { useEffect, useRef, useContext, useState, useCallback } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport NoteContent from 'components/NoteContent';\nimport ReplyArea from 'components/Note/ReplyArea';\nimport NoteGroupSection from 'components/Note/NoteGroupSection';\nimport Button from 'components/Button';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport core from 'core';\nimport AnnotationNoteConnectorLine from 'components/AnnotationNoteConnectorLine';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport DataElements from 'src/constants/dataElement';\n\nimport './Note.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  isInNotesPanel: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n};\n\nlet currId = 0;\n\nconst Note = ({\n  annotation,\n  isMultiSelected,\n  isMultiSelectMode,\n  isInNotesPanel,\n  handleMultiSelect,\n}) => {\n  const {\n    isSelected,\n    resize,\n    pendingEditTextMap,\n    isContentEditable,\n    isDocumentReadOnly,\n    isExpandedFromSearch,\n    // documentViewerKey,\n  } = useContext(NoteContext);\n  const containerRef = useRef();\n  const containerHeightRef = useRef();\n  const [isEditingMap, setIsEditingMap] = useState({});\n  const ids = useRef([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const unreadReplyIdSet = new Set();\n\n  const [\n    noteTransformFunction,\n    customNoteSelectionFunction,\n    unreadAnnotationIdSet,\n    shouldExpandCommentThread,\n    isRightClickAnnotationPopupEnabled,\n    documentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteTransformFunction(state),\n      selectors.getCustomNoteSelectionFunction(state),\n      selectors.getUnreadAnnotationIdSet(state),\n      selectors.isCommentThreadExpansionEnabled(state),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const replies = annotation\n    .getReplies()\n    .sort((a, b) => a['DateCreated'] - b['DateCreated']);\n\n  replies.filter((r) => unreadAnnotationIdSet.has(r.Id)).forEach((r) => unreadReplyIdSet.add(r.Id));\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'delete') {\n        annotations.forEach((annot) => {\n          if (unreadAnnotationIdSet.has(annot.Id)) {\n            dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annot.Id }));\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener, undefined, documentViewerKey);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener, documentViewerKey);\n    };\n  }, [unreadAnnotationIdSet]);\n\n  useEffect(() => {\n    const prevHeight = containerHeightRef.current;\n    const currHeight = containerRef.current.getBoundingClientRect().height;\n    containerHeightRef.current = currHeight;\n\n    // have a prevHeight check here because we don't want to call resize on mount\n    // use Math.round because in some cases in IE11 these two numbers will differ in just 0.00001\n    // and we don't want call resize in this case\n    if (prevHeight && Math.round(prevHeight) !== Math.round(currHeight)) {\n      resize();\n    }\n  });\n\n  useEffect(() => {\n    if (noteTransformFunction) {\n      const notesPanelElement = getRootNode().getElementsByClassName('NotesPanel')[0];\n      ids.current.forEach((id) => {\n        const child = notesPanelElement.querySelector(`[data-webviewer-custom-element=${id}]`);\n        if (child) {\n          child.parentNode.removeChild(child);\n        }\n      });\n\n      ids.current = [];\n\n      const state = {\n        annotation,\n        isSelected,\n      };\n\n      noteTransformFunction(containerRef.current, state, (...params) => {\n        const element = document.createElement(...params);\n        const id = `custom-element-${currId}`;\n        currId++;\n        ids.current.push(id);\n        element.setAttribute('data-webviewer-custom-element', id);\n        element.addEventListener('mousedown', (e) => {\n          e.stopPropagation();\n        });\n\n        return element;\n      });\n    }\n  });\n\n  useEffect(() => {\n    // If this is not a new one, rebuild the isEditing map\n    const pendingText = pendingEditTextMap[annotation.Id];\n    if (pendingText !== '' && isContentEditable && !isDocumentReadOnly) {\n      setIsEditing(true, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing, annotation, isMultiSelectMode]);\n\n  useDidUpdate(() => {\n    if (isDocumentReadOnly || !isContentEditable) {\n      setIsEditing(false, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing]);\n\n  const handleNoteClick = (e) => {\n    // stop bubbling up otherwise the note will be closed\n    // due to annotation deselection\n    e && e.stopPropagation();\n\n    if (unreadAnnotationIdSet.has(annotation.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annotation.Id }));\n    }\n\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\n    if (!isSelected) {\n      core.deselectAllAnnotations(documentViewerKey);\n\n      // Need this delay to ensure all other event listeners fire before we open the line\n      setTimeout(() => dispatch(actions.openElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE)), 300);\n    }\n    if (isInNotesPanel) {\n      core.selectAnnotation(annotation, documentViewerKey);\n      core.jumpToAnnotation(annotation, documentViewerKey);\n      if (!isRightClickAnnotationPopupEnabled) {\n        dispatch(actions.openElement(DataElements.ANNOTATION_POPUP));\n      }\n    }\n  };\n\n  const hasUnreadReplies = unreadReplyIdSet.size > 0;\n\n  const noteClass = classNames({\n    Note: true,\n    expanded: isSelected,\n    'is-multi-selected': isMultiSelected,\n    unread: unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies,\n  });\n\n  const repliesClass = classNames({\n    replies: true,\n    hidden: !isSelected,\n  });\n\n  useEffect(() => {\n    // Must also restore the isEdit for  any replies, in case someone was editing a\n    // reply when a comment was placed above\n    if (!isMultiSelectMode) {\n      replies.forEach((reply, index) => {\n        const pendingText = pendingEditTextMap[reply.Id];\n        if ((pendingText !== '' && typeof pendingText !== 'undefined') && isSelected) {\n          setIsEditing(true, 1 + index);\n        }\n      });\n    }\n  }, [isSelected, isMultiSelectMode]);\n\n  useEffect(() => {\n    if (isMultiSelectMode) {\n      setIsEditing(false, 0);\n    }\n  }, [isMultiSelectMode]);\n\n  const showReplyArea = !Object.values(isEditingMap).some((val) => val);\n\n  const handleNoteKeydown = (e) => {\n    // Click if enter or space is pressed and is current target.\n    const isNote = e.target === e.currentTarget;\n    if (isNote && (e.key === 'Enter' || e.key === ' ')) {\n      e.preventDefault(); // Stop from being entered in field\n      handleNoteClick();\n    }\n  };\n\n  const handleReplyClicked = (reply) => {\n    // set clicked reply as read\n    if (unreadReplyIdSet.has(reply.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: reply.Id }));\n      core.getAnnotationManager(documentViewerKey).selectAnnotation(reply);\n    }\n  };\n\n  const markAllRepliesRead = () => {\n    // set all replies to read state if user starts to type in reply textarea\n    if (unreadReplyIdSet.size > 0) {\n      const repliesSetToRead = replies.filter((r) => unreadReplyIdSet.has(r.Id));\n      core.getAnnotationManager(documentViewerKey).selectAnnotations(repliesSetToRead);\n      repliesSetToRead.forEach((r) => dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: r.Id })));\n    }\n  };\n\n  const setIsEditing = useCallback(\n    (isEditing, index) => {\n      setIsEditingMap((map) => ({\n        ...map,\n        [index]: isEditing,\n      }));\n    },\n    [setIsEditingMap],\n  );\n\n  const groupAnnotations = core.getGroupAnnotations(annotation, documentViewerKey);\n  const isGroup = groupAnnotations.length > 1;\n  let isCaretAnnotation = false;\n  isCaretAnnotation = groupAnnotations.some((annotation) => annotation instanceof window.Core.Annotations.CaretAnnotation);\n  if (isCaretAnnotation) {\n    isMultiSelectMode = false;\n    isMultiSelected = false;\n  }\n  // apply unread reply style to replyArea if the last reply is unread\n  const lastReplyId = replies.length > 0 ? replies[replies.length - 1].Id : null;\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      ref={containerRef}\n      className={noteClass}\n      onClick={handleNoteClick}\n      onKeyDown={handleNoteKeydown}\n      id={`note_${annotation.Id}`}\n    >\n      <NoteContent\n        noteIndex={0}\n        annotation={annotation}\n        setIsEditing={setIsEditing}\n        isEditing={isEditingMap[0]}\n        isNonReplyNoteRead={!unreadAnnotationIdSet.has(annotation.Id)}\n        isUnread={unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies}\n        handleMultiSelect={handleMultiSelect}\n        isMultiSelected={isMultiSelected}\n        isMultiSelectMode={isMultiSelectMode}\n      />\n      {(isSelected || isExpandedFromSearch || shouldExpandCommentThread) && (\n        <>\n          {replies.length > 0 && (\n            <div className={repliesClass}>\n              {hasUnreadReplies && (\n                <Button\n                  dataElement=\"markAllReadButton\"\n                  className=\"mark-all-read-button\"\n                  label={t('action.markAllRead')}\n                  onClick={markAllRepliesRead}\n                />\n              )}\n              {replies.map((reply, i) => (\n                <div className=\"reply\" id={`note_reply_${reply.Id}`} key={`note_reply_${reply.Id}`}>\n                  <NoteContent\n                    noteIndex={i + 1}\n                    key={reply.Id}\n                    annotation={reply}\n                    setIsEditing={setIsEditing}\n                    isEditing={isEditingMap[i + 1]}\n                    onReplyClicked={handleReplyClicked}\n                    isUnread={unreadAnnotationIdSet.has(reply.Id)}\n                    handleMultiSelect={handleMultiSelect}\n                    isMultiSelected={isMultiSelected}\n                    isMultiSelectMode={isMultiSelectMode}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n          {isGroup &&\n            <NoteGroupSection\n              groupAnnotations={groupAnnotations}\n              isMultiSelectMode={isMultiSelectMode}\n            />}\n          {showReplyArea && !isMultiSelectMode && (\n            <ReplyArea\n              isUnread={lastReplyId && unreadAnnotationIdSet.has(lastReplyId)}\n              onPendingReplyChange={markAllRepliesRead}\n              annotation={annotation}\n            />\n          )}\n        </>\n      )}\n      {isSelected && isInNotesPanel && <AnnotationNoteConnectorLine annotation={annotation} noteContainerRef={containerRef} />}\n    </div>\n  );\n};\n\nNote.propTypes = propTypes;\n\nexport default Note;\n","import Note from './Note';\n\nexport default Note;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Measure from 'react-measure';\nimport { withTranslation } from 'react-i18next';\n\nimport StylePopup from 'components/StylePopup';\n\nimport core from 'core';\nimport getClassName from 'helpers/getClassName';\nimport setToolStyles from 'helpers/setToolStyles';\nimport { isMobile } from 'helpers/device';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'src/constants/dataElement';\n\nimport './AnnotationStylePopup.scss';\nimport ActionButton from '../ActionButton';\n\nclass AnnotationStylePopup extends React.Component {\n  static propTypes = {\n    isDisabled: PropTypes.bool,\n    isToolDefaultStyleUpdateFromAnnotationPopupEnabled: PropTypes.bool,\n    annotations: PropTypes.array.isRequired,\n    style: PropTypes.object.isRequired,\n    properties: PropTypes.object.isRequired,\n    isRedaction: PropTypes.bool,\n    isFreeText: PropTypes.bool,\n    isEllipse: PropTypes.bool,\n    closeElement: PropTypes.func.isRequired,\n    hasBackToMenu: PropTypes.bool,\n    onBackToMenu: PropTypes.func,\n  };\n\n  adjustFreeTextBoundingBox = (annotation) => {\n    const { FreeTextAnnotation } = window.Core.Annotations;\n    if (annotation instanceof FreeTextAnnotation && annotation.getAutoSizeType() !== FreeTextAnnotation.AutoSizeTypes.NONE) {\n      const doc = core.getDocument();\n      const pageNumber = annotation['PageNumber'];\n      const pageInfo = doc.getPageInfo(pageNumber);\n      const pageMatrix = doc.getPageMatrix(pageNumber);\n      const pageRotation = doc.getPageRotation(pageNumber);\n      annotation.fitText(pageInfo, pageMatrix, pageRotation);\n    }\n  }\n\n  handleSliderChange = (property, value) => {\n    const { annotations } = this.props;\n    const annotationManager = core.getAnnotationManager();\n    annotations.forEach((annotation) => {\n      annotation[property] = value;\n      annotationManager.redrawAnnotation(annotation);\n    });\n  }\n\n  handlePropertyChange = (property, value) => {\n    const { annotations, isToolDefaultStyleUpdateFromAnnotationPopupEnabled } = this.props;\n\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      });\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n      if (property === 'FontSize' || property === 'Font') {\n        this.adjustFreeTextBoundingBox(annotation);\n      }\n    });\n  }\n\n  handleStyleChange = (property, value) => {\n    const { annotations, isToolDefaultStyleUpdateFromAnnotationPopupEnabled } = this.props;\n\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      });\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n    });\n  };\n\n  handleRichTextStyleChange = (property, value) => {\n    const { annotations } = this.props;\n\n    annotations.forEach((annotation) => {\n      core.updateAnnotationRichTextStyle(annotation, { [property]: value });\n    });\n  }\n\n  handleLineStyleChange = (section, value) => {\n    const { annotations, isToolDefaultStyleUpdateFromAnnotationPopupEnabled } = this.props;\n\n    annotations.forEach((annotation) => {\n      let lineStyle = '';\n      if (section === 'start') {\n        annotation.setStartStyle(value);\n        lineStyle = 'StartLineStyle';\n      } else if (section === 'end') {\n        annotation.setEndStyle(value);\n        lineStyle = 'EndLineStyle';\n      } else if (section === 'middle') {\n        const dashes = value.split(',');\n        const style = dashes.shift();\n        annotation['Style'] = style;\n        annotation['Dashes'] = dashes;\n        lineStyle = 'StrokeStyle';\n      }\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, lineStyle, value);\n      }\n\n      core.getAnnotationManager().redrawAnnotation(annotation);\n    });\n\n    core.getAnnotationManager().trigger('annotationChanged', [annotations, 'modify', {}]);\n  };\n\n  handleClick = (e) => {\n    if (isMobile() && e.target === e.currentTarget) {\n      this.props.closeElement('annotationPopup');\n    }\n  }\n\n  handleResize = () => {\n    const { onResize } = this.props;\n    onResize && onResize();\n  }\n\n  render() {\n    const {\n      isDisabled,\n      style, isRedaction,\n      isFreeText,\n      isEllipse,\n      isMeasure,\n      colorMapKey,\n      showLineStyleOptions,\n      properties,\n      hideSnapModeCheckbox,\n    } = this.props;\n\n    const className = getClassName('Popup AnnotationStylePopup', this.props);\n\n    if (isDisabled) {\n      return null;\n    }\n\n    return (\n      <Measure\n        onResize={this.handleResize}\n      >\n        {({ measureRef }) => (\n          <div\n            className={className}\n            data-element={DataElements.ANNOTATION_STYLE_POPUP}\n            onClick={this.handleClick}\n            ref={measureRef}\n          >\n            {this.props.hasBackToMenu &&\n              <div\n                className=\"back-to-menu-container\"\n                data-element={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER}\n              >\n                <ActionButton\n                  className=\"back-to-menu-button\"\n                  dataElement={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON}\n                  label=\"action.backToMenu\"\n                  img=\"icon-chevron-left\"\n                  onClick={this.props.onBackToMenu}\n                />\n              </div>\n            }\n            {/* Do not show checkbox for ellipse as snap mode does not exist for it */}\n            <StylePopup\n              hideSnapModeCheckbox={hideSnapModeCheckbox}\n              colorMapKey={colorMapKey}\n              style={style}\n              isFreeText={isFreeText}\n              isEllipse={isEllipse}\n              isMeasure={isMeasure}\n              onStyleChange={this.handleStyleChange}\n              onSliderChange={this.handleSliderChange}\n              onPropertyChange={this.handlePropertyChange}\n              disableSeparator\n              properties={properties}\n              onRichTextStyleChange={this.handleRichTextStyleChange}\n              isRedaction={isRedaction}\n              showLineStyleOptions={showLineStyleOptions}\n              onLineStyleChange={this.handleLineStyleChange}\n            />\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  isDisabled: selectors.isElementDisabled(state, 'annotationStylePopup'),\n  isToolDefaultStyleUpdateFromAnnotationPopupEnabled: selectors.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state)\n});\n\nconst mapDispatchToProps = {\n  closeElement: actions.closeElement,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withTranslation()(AnnotationStylePopup));\n","import AnnotationStylePopup from './AnnotationStylePopup';\n\nexport default AnnotationStylePopup;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ListSeparator.scss';\n\nclass ListSeparator extends React.PureComponent {\n  static propTypes = {\n    renderContent: PropTypes.func,\n    children: PropTypes.node,\n  }\n\n  render() {\n    const content = this.props.renderContent ? this.props.renderContent() : this.props.children;\n    return <div className=\"ListSeparator\">{content}</div>;\n  }\n}\n\nexport default ListSeparator;\n","import ListSeparator from './ListSeparator';\n\nexport default ListSeparator;","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAreaMultiSelect.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-reply-place-holder{height:100px}.reply-area-multi-container{border-top:1px solid var(--divider);display:flex;flex-direction:column;width:100%;position:absolute;bottom:0;z-index:100;background:var(--panel-background)}.reply-area-multi-container form{width:100%;display:flex}.reply-area-multi-container .reply-area-multi-header{display:flex;flex-direction:row;margin-left:16px;margin-top:28px;position:relative;justify-content:space-between}.reply-area-multi-container .reply-area-multi-header .title{font-size:13px;font-weight:700;display:flex;align-items:center}.reply-area-multi-container .reply-area-multi-header .close-icon-container{display:flex;align-items:center;padding-right:12px;cursor:pointer;position:relative;top:1px}.reply-area-multi-container .reply-area-multi-header .close-icon-container .close-icon{width:22px;height:22px}.reply-area-multi-container .reply-button-container{display:flex;justify-content:flex-end;flex-direction:column}.reply-area-multi-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-multi-container .reply-button,html:not([data-tabbing=true]) .reply-area-multi-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-multi-container .reply-button{width:80px}}.reply-area-multi-container .reply-button:hover{background:var(--blue-1)}.reply-area-multi-container .reply-button.disabled{cursor:not-allowed}.reply-area-multi-container .reply-area{position:relative;flex:1;margin:13px 17px 12px 16px;border-radius:4px;align-items:center;background:var(--component-background)}.reply-area-multi-container .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-multi-container .add-attachment{display:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".multi-style-container{border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);position:relative;right:20px;bottom:52px;pointer-events:auto}.multi-style-container *{box-sizing:border-box}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiSelectControls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".notes-panel-container .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}.notes-panel-container .buttons-container .Button{height:28px;width:28px}.notes-panel-container .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}.notes-panel-container .buttons-container .Button.active{background:var(--view-header-button-active)}.notes-panel-container .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}.notes-panel-container .multi-select-footer{background:var(--panel-background);display:flex;border-top:1px solid #cfd4da;margin-top:auto;height:72px;align-items:center;justify-content:center;position:absolute;bottom:0;width:100%;z-index:100}.notes-panel-container .multi-select-footer .close-container{margin-top:auto;right:10px;position:absolute}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanelHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comments-counter{height:19px;margin-top:24px;margin-bottom:12px;font-size:16px}.comments-counter span{font-weight:700}[data-element=notesPanelHeader]{padding-right:18px}[data-element=notesPanelHeader] .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}[data-element=notesPanelHeader] .buttons-container .Button{height:28px;width:28px;cursor:pointer}[data-element=notesPanelHeader] .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}[data-element=notesPanelHeader] .buttons-container .Button.active{background:var(--view-header-button-active)}[data-element=notesPanelHeader] .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}[data-element=notesPanelHeader] .sort-row{display:flex;justify-content:space-between;margin-bottom:16px}[data-element=notesPanelHeader] .sort-row .sort-container{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;align-self:flex-end}[data-element=notesPanelHeader] .sort-row .sort-container .label{margin-right:8px}[data-element=notesPanelHeader] .sort-row .sort-container .picked-option{text-align:left}[data-element=notesPanelHeader] .input-container{display:flex;position:relative;flex:1}[data-element=notesPanelHeader] .input-container input{width:100%;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding:4px 8px 6px}[data-element=notesPanelHeader] .input-container input:focus{outline:none;border:1px solid var(--focus-border)}[data-element=notesPanelHeader] .input-container input::-moz-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input:-ms-input-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input::placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container .input-button{cursor:pointer;background:var(--primary-button);border-radius:4px;height:100%;width:40px;display:flex;align-items:center;justify-content:center;position:absolute;bottom:0;right:0}[data-element=notesPanelHeader] .input-container .input-button .Icon{width:20px;height:20px}[data-element=notesPanelHeader] .input-container .input-button svg{color:var(--primary-button-text)}[data-element=notesPanelHeader] .input-container .input-button:hover{background:var(--primary-button-hover)}[data-element=notesPanelHeader] .divider{height:1px;width:100%;background:var(--divider);margin:16px 0}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.notes-panel-container{z-index:65;background-color:var(--panel-background);display:flex;flex-direction:row;position:relative;overflow:hidden}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{z-index:95}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{z-index:95}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}.notes-panel-container .NotesPanel{padding-left:16px;padding-bottom:0;display:flex;flex-direction:column;position:relative;padding-top:16px}.notes-panel-container .NotesPanel .close-container{display:flex;align-items:center;justify-content:flex-end}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}.notes-panel-container .NotesPanel .close-container .close-icon-container{display:flex;align-items:center;cursor:pointer}.notes-panel-container .NotesPanel .close-container .close-icon-container .close-icon{width:24px;height:24px}.notes-panel-container .NotesPanel .multi-select-place-holder{height:72px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.notes-panel-container .NotesPanel .reply-area-container .reply-button{width:28px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}.notes-panel-container .NotesPanel .no-annotations{display:flex;flex-direction:column;align-items:center}.notes-panel-container .NotesPanel .no-annotations .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}.notes-panel-container .NotesPanel .no-annotations .empty-icon,.notes-panel-container .NotesPanel .no-annotations .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-annotations .empty-icon *{fill:var(--gray-5);color:var(--gray-5)}.notes-panel-container .NotesPanel .normal-notes-container,.notes-panel-container .NotesPanel .virtualized-notes-container{margin-top:10px;flex:1;padding-right:18px}.notes-panel-container .NotesPanel .normal-notes-container{overflow:auto;overflow:overlay}.notes-panel-container .NotesPanel .note-wrapper:first-child .ListSeparator{margin-top:0;word-break:break-word}.notes-panel-container .NotesPanel .no-results{display:flex;flex-direction:column;align-items:center;padding-right:18px}.notes-panel-container .NotesPanel .no-results .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}.notes-panel-container .NotesPanel .no-results .empty-icon,.notes-panel-container .NotesPanel .no-results .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-results .empty-icon *{fill:var(--border);color:var(--border)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useState, useEffect, useRef, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport Measure from 'react-measure';\nimport { CellMeasurer, CellMeasurerCache, List } from 'react-virtualized';\n\nconst propTypes = {\n  notes: PropTypes.array.isRequired,\n  children: PropTypes.func.isRequired,\n  onScroll: PropTypes.func.isRequired,\n  initialScrollTop: PropTypes.number.isRequired,\n  selectedIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n};\n\nconst cache = new CellMeasurerCache({ defaultHeight: 50, fixedWidth: true });\n\nconst VirtualizedList = React.forwardRef(\n  ({ notes, children, onScroll, initialScrollTop, selectedIndex, sortStrategy }, forwardedRef) => {\n    const listRef = useRef();\n    const [offset, setOffset] = useState(0);\n    const [dimension, setDimension] = useState({ width: 0, height: 0 });\n    let prevWindowHeight = window.innerHeight;\n\n    useImperativeHandle(forwardedRef, () => ({\n      scrollToPosition: (scrollTop) => {\n        listRef.current.scrollToPosition(scrollTop);\n      },\n      scrollToRow: (index) => {\n        listRef.current.scrollToRow(index);\n      },\n    }));\n\n    useEffect(() => {\n      listRef.current.scrollToPosition(initialScrollTop);\n    }, [initialScrollTop]);\n\n    useEffect(() => {\n      cache.clearAll();\n      listRef?.current?.measureAllRows();\n\n      if (selectedIndex !== -1) {\n        listRef.current?.scrollToRow(selectedIndex);\n      }\n    }, [selectedIndex]);\n\n    useEffect(() => {\n      cache.clearAll();\n      listRef?.current?.measureAllRows();\n      listRef?.current?.forceUpdateGrid();\n    }, [notes.length, sortStrategy]);\n\n    useEffect(() => {\n      const windowResizeHandler = () => {\n        const diff = window.innerHeight - prevWindowHeight;\n        if (diff) {\n          // List height never resizes down after exiting fullscreen\n          if (window.innerHeight < prevWindowHeight) {\n            setOffset(diff);\n          }\n          prevWindowHeight = window.innerHeight;\n        }\n      };\n      window.addEventListener('resize', windowResizeHandler);\n\n      return () => {\n        window.removeEventListener('resize', windowResizeHandler);\n      };\n    });\n\n    const _resize = (index) => {\n      cache.clear(index);\n      listRef.current?.recomputeRowHeights(index);\n    };\n\n    const handleScroll = ({ scrollTop }) => {\n      onScroll(scrollTop);\n    };\n\n    /* eslint-disable react/prop-types */\n    const rowRenderer = ({ index, key, parent, style }) => {\n      const currNote = notes[index];\n\n      // Padding added to the right since virtualized list lets it get cut off on the right\n      return (\n        <CellMeasurer\n          key={`${key}${currNote.Id}`}\n          cache={cache}\n          columnIndex={0}\n          parent={parent}\n          rowIndex={index}\n        >\n          {({ measure }) => (\n            <div style={{ ...style, paddingRight: '12px' }}>\n              {children(notes, index, () => {\n                _resize(index);\n                measure();\n              })}\n            </div>)}\n        </CellMeasurer>\n      );\n    };\n\n    return (\n      <Measure bounds offset onResize={({ bounds }) => {\n        setDimension({\n          ...bounds,\n          // Override height and compensate for extra size\n          height: bounds.height + offset * 2,\n        });\n        setOffset(0);\n      }}\n      >\n        {({ measureRef }) => (\n          <div ref={measureRef} className=\"virtualized-notes-container\">\n            <List\n              deferredMeasurementCache={cache}\n              style={{ outline: 'none' }}\n              height={dimension.height - offset}\n              width={dimension.width}\n              overscanRowCount={10}\n              ref={listRef}\n              rowCount={notes.length}\n              rowHeight={cache.rowHeight}\n              rowRenderer={rowRenderer}\n              onScroll={handleScroll}\n            />\n          </div>\n        )}\n      </Measure>\n    );\n  },\n);\n\nVirtualizedList.displayName = 'VirtualizedList';\nVirtualizedList.propTypes = propTypes;\n\nexport default VirtualizedList;\n","import VirtualizedList from './VirtualizedList';\n\nexport default VirtualizedList;","import React, { useEffect, useRef, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  notes: PropTypes.array.isRequired,\n  children: PropTypes.func.isRequired,\n  onScroll: PropTypes.func.isRequired,\n  initialScrollTop: PropTypes.number.isRequired,\n};\n\nconst NormalList = React.forwardRef(\n  ({ notes, children, onScroll, initialScrollTop }, forwardedRef) => {\n    const listRef = useRef();\n\n    useImperativeHandle(forwardedRef, () => ({\n      scrollToPosition: (scrollTop) => {\n        listRef.current.scrollTop = scrollTop;\n      },\n      scrollToRow: (index) => {\n        const parent = listRef.current;\n        const child = parent.children[index];\n\n        const parentRect = parent.getBoundingClientRect();\n        const childRect = child.getBoundingClientRect();\n\n        const isViewable =\n          childRect.top >= parentRect.top &&\n          childRect.top <= parentRect.top + parent.clientHeight;\n        if (!isViewable) {\n          parent.scrollTop = childRect.top + parent.scrollTop - parentRect.top;\n        }\n      },\n    }));\n\n    useEffect(() => {\n      listRef.current.scrollTop = initialScrollTop;\n    }, [initialScrollTop]);\n\n    const handleScroll = (e) => {\n      onScroll(e.target.scrollTop);\n    };\n\n    return (\n      <div\n        ref={listRef}\n        className=\"normal-notes-container\"\n        onScroll={handleScroll}\n        role=\"list\"\n      >\n        {notes.map((currNote, index) => (\n          <React.Fragment key={`${index}_${currNote.Id}`}>\n            {children(notes, index)}\n          </React.Fragment>\n        ))}\n      </div>\n    );\n  },\n);\n\nNormalList.displayName = 'NormalList';\nNormalList.propTypes = propTypes;\n\nexport default NormalList;\n","import NormalList from './NormalList';\n\nexport default NormalList;","import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport NoteTextarea from 'components/NoteTextarea';\nimport classNames from 'classnames';\nimport core from 'core';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport selectors from 'selectors';\nimport Button from 'src/components/Button';\nimport Icon from 'components/Icon';\n\nimport './ReplyAreaMultiSelect.scss';\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotations, onSubmit, onClose }) => {\n  const [\n    isMentionEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getIsMentionEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n\n  const [pendingReply, setPendingReply] = useState('');\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n\n  useEffect(() => {\n    textareaRef.current.focus();\n  }, []);\n\n  const postReply = (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n    annotations.forEach((annotation) => {\n      const annotationHasNoContents = annotation.getContents() === '' || annotation.getContents() === undefined;\n      if (isMentionEnabled) {\n        if (annotationHasNoContents) {\n          const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(replyText);\n\n          annotation.setCustomData('trn-mention', JSON.stringify({\n            contents: replyText,\n            ids,\n          }));\n          core.setNoteContents(annotation, plainTextValue, activeDocumentViewerKey);\n        } else {\n          const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n          core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n          setAnnotationRichTextStyle(editor, replyAnnotation);\n        }\n      } else {\n        if (annotationHasNoContents) {\n          core.setNoteContents(annotation, replyText, activeDocumentViewerKey);\n          setAnnotationRichTextStyle(editor, annotation);\n        } else {\n          // TODO: This is bugged and does not work. createAnnotationReply\n          // does not return an annotation\n          const replyAnnotation = core.createAnnotationReply(annotation, replyText, activeDocumentViewerKey);\n          setAnnotationRichTextStyle(editor, replyAnnotation);\n        }\n      }\n    });\n\n    onSubmit();\n  };\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value);\n  };\n\n  return (\n    <div className='reply-area-multi-container'>\n      <div\n        className=\"reply-area-multi-header\"\n      >\n        <div className=\"title\">\n          {t('action.multiReplyAnnotations', { count: annotations.length })}\n        </div>\n        <div\n          className=\"close-icon-container\"\n          onClick={onClose}\n        >\n          <Icon\n            glyph=\"ic_close_black_24px\"\n            className=\"close-icon\"\n          />\n        </div>\n      </div>\n      <form onSubmit={postReply} >\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReply}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            isReply\n          />\n        </div>\n        <div className='reply-button-container'>\n          <Button\n            img=\"icon-post-reply\"\n            className={'reply-button'}\n            isSubmitType={true}\n          />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ReplyArea;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\nimport PopupPortal from 'components/PopupPortal';\nimport AnnotationStylePopup from 'components/AnnotationStylePopup';\n\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport getAnnotationStyles from 'helpers/getAnnotationStyles';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport actions from 'actions';\nimport {\n  AnnotationStylePopupTabs,\n  updateAnnotationStylePopupTabs,\n  copyMapWithDataProperties,\n  getDataWithKey,\n} from 'constants/map';\n\n\nimport './MultiStylePopup.scss';\n\nconst MultiStylePopup = ({\n  annotations,\n  triggerElementName,\n  onClose = () => { },\n}) => {\n  const dispatch = useDispatch();\n  const popupRef = useRef();\n  const [styleTabs, setStyleTabs] = useState([]);\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\n  const colorMapKey = 'MultiStyle';\n\n  useOnClickOutside(popupRef, (e) => {\n    const triggerElement = document.querySelector(`[data-element=${triggerElementName}]`);\n    const clickedTrigger = triggerElement.contains(e.target);\n    const warningModal = getOpenedWarningModal();\n    const colorPicker = getOpenedColorPicker();\n    const datePicker = getDatePicker();\n\n    if (!clickedTrigger && !warningModal && !colorPicker && !datePicker) {\n      // we only want to close the popup if we clicked outside and not on the trigger\n      onClose();\n    }\n  });\n\n  let style = {};\n  annotations.forEach((annotation) => {\n    style = { ...style, ...getAnnotationStyles(annotation) };\n  });\n  const freeTextAnnotation = annotations.find((annotation) => {\n    return (\n      annotation instanceof window.Core.Annotations.FreeTextAnnotation &&\n      (annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeText ||\n      annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout)\n    );\n  });\n  let properties = {};\n  if (freeTextAnnotation) {\n    const richTextStyles = freeTextAnnotation.getRichTextStyle();\n    properties = {\n      Font: freeTextAnnotation.Font,\n      FontSize: freeTextAnnotation.FontSize,\n      TextAlign: freeTextAnnotation.TextAlign,\n      TextVerticalAlign: freeTextAnnotation.TextVerticalAlign,\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\n    };\n  }\n\n  // Update available palettesfor MultiStyle annotation type in map\n  useEffect(() => {\n    const availablePalettes = [];\n    style['TextColor'] && availablePalettes.push(AnnotationStylePopupTabs.TEXT_COLOR);\n    style['StrokeColor'] && availablePalettes.push(AnnotationStylePopupTabs.STROKE_COLOR);\n    style['FillColor'] && availablePalettes.push(AnnotationStylePopupTabs.FILL_COLOR);\n\n    const didUpdate =\n      updateAnnotationStylePopupTabs(colorMapKey, availablePalettes, availablePalettes[0]);\n    if (didUpdate) {\n      const newColorMap = copyMapWithDataProperties('currentStyleTab', 'iconColor');\n      dispatch(actions.setColorMap(newColorMap));\n      const { styleTabs: _styleTabs } = getDataWithKey(colorMapKey);\n      setStyleTabs(_styleTabs);\n    }\n  }, [annotations]);\n\n  const updatePosition = () => {\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef);\n    setPosition(position);\n  };\n\n  // Have to wait until palettes are available before showing popup\n  if (styleTabs.length === 0) {\n    return null;\n  }\n\n  return (\n    <PopupPortal\n      id=\"multi-style-popup-portal\"\n      position={position}\n    >\n      <div\n        className='multi-style-container'\n        ref={popupRef}\n      >\n        <AnnotationStylePopup\n          annotations={annotations}\n          style={style}\n          isOpen\n          onResize={updatePosition}\n          isFreeText={!!freeTextAnnotation}\n          colorMapKey={colorMapKey}\n          properties={properties}\n          isRedaction={false}\n          isMeasure={false}\n          showLineStyleOptions={false}\n          hideSnapModeCheckbox={false}\n        />\n      </div>\n    </PopupPortal >\n  );\n};\n\nexport default MultiStylePopup;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Icon from 'components/Icon';\nimport Button from 'components/Button';\nimport ReplyAreaMultiSelect from 'components/Note/ReplyArea/ReplyAreaMultiSelect';\nimport MultiStylePopup from 'components/NotesPanel/MultiStylePopup';\nimport NoteStatePopup from 'components/NoteState/NoteStatePopup';\nimport NoteContext from 'components/Note/Context';\n\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport DataElements from 'constants/dataElement';\nimport PropTypes from 'prop-types';\nimport actions from 'actions';\nimport classNames from 'classnames';\nimport core from 'core';\nimport selectors from 'selectors';\n\nimport './MultiSelectControls.scss';\n\nconst propTypes = {\n  showMultiReply: PropTypes.bool.isRequired,\n  setShowMultiReply: PropTypes.func.isRequired,\n  showMultiState: PropTypes.bool.isRequired,\n  setShowMultiState: PropTypes.func.isRequired,\n  showMultiStyle: PropTypes.bool.isRequired,\n  setShowMultiStyle: PropTypes.func.isRequired,\n  setMultiSelectMode: PropTypes.func.isRequired,\n  isMultiSelectedMap: PropTypes.object.isRequired,\n  setIsMultiSelectedMap: PropTypes.func.isRequired,\n  multiSelectedAnnotations: PropTypes.array.isRequired,\n};\n\nconst getParentAnnotations = (annotations, documentViewerKey = 1) => {\n  const annotSet = new Set();\n  annotations.forEach((annotation) => {\n    if (annotation.isGrouped()) {\n      const parentAnnotation = core.getAnnotationById(annotation['InReplyTo'], documentViewerKey);\n      if (parentAnnotation) {\n        annotSet.add(parentAnnotation);\n      }\n    } else {\n      annotSet.add(annotation);\n    }\n  });\n  return Array.from(annotSet);\n};\n\nconst MultiSelectControls = ({\n  showMultiReply,\n  setShowMultiReply,\n  showMultiState,\n  setShowMultiState,\n  showMultiStyle,\n  setShowMultiStyle,\n  setMultiSelectMode,\n  isMultiSelectedMap,\n  setIsMultiSelectedMap,\n  multiSelectedAnnotations,\n}) => {\n  const [\n    modifiableMultiSelectAnnotations,\n    setModfiableMultiSelectAnnotations,\n  ] = useState([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const [activeDocumentViewerKey] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n\n  useEffect(() => {\n    const onAnnotationChanged = (annotations, action) => {\n      if (action === 'delete') {\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\n        annotations.forEach((annot) => {\n          delete _isMultiSelectedMap[annot.Id];\n        });\n        setIsMultiSelectedMap(_isMultiSelectedMap);\n      } else if (action === 'modify') {\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\n        // update isMultiSelectedMap by looking at modified annots and\n        // their grouped annots\n        annotations.forEach((annot) => {\n          const groupedAnnots = core.getGroupAnnotations(annot, activeDocumentViewerKey);\n          const someAnnotInGroupIsSelected =\n            groupedAnnots.some((groupedAnnot) => isMultiSelectedMap[groupedAnnot.Id]);\n          if (someAnnotInGroupIsSelected) {\n            // select all annots in this group\n            groupedAnnots.forEach((groupAnnot) => {\n              _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\n            });\n          }\n        });\n\n        const originalKeys = Object.keys(isMultiSelectedMap);\n        const updatedKeys = Object.keys(isMultiSelectedMap);\n        const difference = originalKeys.filter((key) => !updatedKeys.includes(key));\n        if (difference.length > 0) {\n          // Only update if we have a difference to not cause re-renders and\n          // actions to not be dispatched if unneeded.\n          setIsMultiSelectedMap(_isMultiSelectedMap);\n        }\n      }\n    };\n\n    core.addEventListener('annotationChanged', onAnnotationChanged, undefined, activeDocumentViewerKey);\n    return () => {\n      core.removeEventListener('annotationChanged', onAnnotationChanged, activeDocumentViewerKey);\n    };\n  }, [isMultiSelectedMap, activeDocumentViewerKey]);\n\n  useEffect(() => {\n    return () => {\n      setShowMultiReply(false);\n      setIsMultiSelectedMap({});\n    };\n  }, []);\n\n  useEffect(() => {\n    const _modifiableMultiSelectAnnotations = multiSelectedAnnotations.filter((multiSelectedAnnot) => {\n      return core.canModify(multiSelectedAnnot, activeDocumentViewerKey);\n    });\n    setModfiableMultiSelectAnnotations(_modifiableMultiSelectAnnotations);\n  }, [multiSelectedAnnotations]);\n\n  const numberOfGroups = core.getNumberOfGroups(multiSelectedAnnotations, activeDocumentViewerKey);\n  const canGroup = numberOfGroups > 1;\n  const canUngroup = !canGroup && (multiSelectedAnnotations.length > 2 ||\n    (multiSelectedAnnotations.length > 0 && core.getGroupAnnotations(multiSelectedAnnotations[0], activeDocumentViewerKey).length > 1));\n\n  const handleStateChange = (newValue) => {\n    getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey).forEach((annot) => {\n      const stateAnnotation = createStateAnnotation(annot, newValue, activeDocumentViewerKey);\n      annot.addReply(stateAnnotation);\n      const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n      annotationManager.addAnnotation(stateAnnotation);\n      annotationManager.trigger('addReply', [stateAnnotation, annot, annotationManager.getRootAnnotation(annot)]);\n    });\n    setShowMultiState(false);\n  };\n\n  if (showMultiReply) {\n    return (\n      <NoteContext.Provider value={{\n        resize: () => {},\n      }}>\n        <ReplyAreaMultiSelect\n          annotations={getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey)}\n          onSubmit={() => setShowMultiReply(false)}\n          onClose={() => setShowMultiReply(false)}\n        />\n      </NoteContext.Provider>\n    );\n  }\n\n  return (\n    <div className=\"multi-select-footer\">\n      <div className=\"buttons-container\">\n        <Button\n          dataElement={DataElements.NOTE_MULTI_REPLY_BUTTON}\n          disabled={multiSelectedAnnotations.length === 0}\n          img=\"icon-header-chat-line\"\n          onClick={() => {\n            setShowMultiReply(true);\n          }}\n          title=\"action.comment\"\n        />\n        <Button\n          dataElement={DataElements.NOTE_MULTI_STATE_BUTTON}\n          className={classNames({\n            active: showMultiState,\n          })}\n          disabled={multiSelectedAnnotations.length === 0}\n          img=\"icon-annotation-status-none\"\n          onClick={() => {\n            setShowMultiState(!showMultiState);\n          }}\n          title=\"option.notesOrder.status\"\n        />\n        {showMultiState &&\n          <NoteStatePopup\n            style={{\n              position: 'relative',\n              bottom: '52px',\n            }}\n            triggerElementName=\"multiStateButton\"\n            handleStateChange={handleStateChange}\n            onClose={() => {\n              setShowMultiState(false);\n            }}\n          />}\n        <Button\n          dataElement={DataElements.NOTE_MULTI_STYLE_BUTTON}\n          img=\"icon-menu-style-line\"\n          disabled={modifiableMultiSelectAnnotations.length === 0}\n          onClick={() => {\n            setShowMultiStyle(!showMultiStyle);\n          }}\n          title=\"action.style\"\n        />\n        {showMultiStyle &&\n          <MultiStylePopup\n            annotations={modifiableMultiSelectAnnotations}\n            triggerElementName=\"multiStyleButton\"\n            onClose={() => {\n              setShowMultiStyle(false);\n            }}\n          />}\n        {!canUngroup &&\n          <Button\n            dataElement={DataElements.NOTE_MULTI_GROUP_BUTTON}\n            disabled={!canGroup}\n            img=\"group-annotations-icon\"\n            onClick={() => {\n              core.groupAnnotations(multiSelectedAnnotations[0], multiSelectedAnnotations, activeDocumentViewerKey);\n            }}\n            title=\"action.group\"\n          />}\n        {canUngroup &&\n          <Button\n            dataElement={DataElements.NOTE_MULTI_UNGROUP_BUTTON}\n            img=\"ungroup-annotations-icon\"\n            onClick={() => {\n              core.ungroupAnnotations(multiSelectedAnnotations, activeDocumentViewerKey);\n            }}\n            title=\"action.ungroup\"\n          />}\n        <Button\n          dataElement={DataElements.NOTE_MULTI_DELETE_BUTTON}\n          disabled={modifiableMultiSelectAnnotations.length === 0}\n          img=\"icon-delete-line\"\n          onClick={() => {\n            const title = t('warning.multiDeleteAnnotation.title');\n            const message = t('warning.multiDeleteAnnotation.message');\n            const confirmBtnText = t('action.delete');\n\n            const warning = {\n              title,\n              message,\n              confirmBtnText,\n              onConfirm: () => {\n                core.deleteAnnotations(modifiableMultiSelectAnnotations, activeDocumentViewerKey);\n              },\n            };\n            dispatch(actions.showWarningMessage(warning));\n          }}\n          title=\"action.delete\"\n        />\n      </div>\n      <div\n        className=\"close-container\"\n      >\n        <div\n          className=\"close-icon-container\"\n          onClick={() => {\n            setMultiSelectMode(false);\n          }}\n        >\n          <Icon\n            glyph=\"ic_close_black_24px\"\n            className=\"close-icon\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMultiSelectControls.propTypes = propTypes;\n\nexport default MultiSelectControls;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport debounce from 'lodash/debounce';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport classNames from 'classnames';\nimport core from 'core';\n\nimport Dropdown from 'components/Dropdown';\nimport Button from 'components/Button';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport CustomElement from 'components/CustomElement';\n\nimport Events from 'constants/events';\nimport { getSortStrategies } from 'constants/sortStrategies';\nimport DataElements from 'src/constants/dataElement';\n\nimport './NotesPanelHeader.scss';\n\nconst SORT_CONTAINER_ELEMENT = 'sortContainer';\n\nfunction NotesPanelHeader({\n  notes,\n  disableFilterAnnotation,\n  setSearchInputHandler,\n  isMultiSelectMode,\n  toggleMultiSelectMode,\n  isMultiSelectEnabled,\n}) {\n  const [\n    sortStrategy,\n    isSortContainerDisabled,\n    customHeaderOptions\n  ] = useSelector(\n    (state) => [\n      selectors.getSortStrategy(state),\n      selectors.isElementDisabled(state, SORT_CONTAINER_ELEMENT),\n      selectors.getNotesPanelCustomHeaderOptions(state)\n    ],\n    shallowEqual\n  );\n\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [filterEnabled, setFilterEnabled] = useState(false);\n\n  useEffect(() => {\n    const toggleFilterStyle = (e) => {\n      const { types, authors, colors, statuses } = e.detail;\n      if (types.length > 0 || authors.length > 0 || colors.length > 0 || statuses.length > 0) {\n        setFilterEnabled(true);\n      } else {\n        setFilterEnabled(false);\n      }\n    };\n\n    window.addEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\n    return () => {\n      window.removeEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\n    };\n  }, []);\n\n  const handleInputChange = (e) => {\n    _handleInputChange(e.target.value);\n  };\n\n  const _handleInputChange = debounce((value) => {\n    // this function is used to solve the issue with using synthetic event asynchronously.\n    // https://reactjs.org/docs/events.html#event-pooling\n    core.deselectAllAnnotations();\n    setSearchInputHandler(value);\n  }, 500);\n\n  const sortContainer = (\n    <div className=\"sort-container\" data-element={SORT_CONTAINER_ELEMENT}>\n      <div className=\"label\">{`${t('message.sortBy')}:`}</div>\n      <Dropdown\n        dataElement=\"notesOrderDropdown\"\n        disabled={notes.length === 0}\n        items={Object.keys(getSortStrategies())}\n        translationPrefix=\"option.notesOrder\"\n        currentSelectionKey={sortStrategy}\n        onClickItem={(strategy) => {\n          dispatch(actions.setNotesPanelSortStrategy(strategy));\n        }}\n      />\n    </div>\n  );\n\n  const originalHeaderElement = (\n    <DataElementWrapper\n      className=\"header\"\n      dataElement=\"notesPanelHeader\">\n\n      <DataElementWrapper\n        className=\"input-container\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.INPUT_CONTAINER}`}>\n        <input\n          type=\"text\"\n          placeholder={t('message.searchCommentsPlaceholder')}\n          aria-label={t('message.searchCommentsPlaceholder')}\n          onChange={handleInputChange}\n          id=\"NotesPanel__input\"\n        />\n      </DataElementWrapper>\n\n      <DataElementWrapper\n        className=\"comments-counter\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.COMMENTS_COUNTER}`}>\n        <span className='main-comment'>{t('component.notesPanel')}</span> {`(${notes.length})`}\n      </DataElementWrapper>\n\n      <DataElementWrapper\n        className=\"sort-row\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.SORT_ROW}`}>\n        {(isSortContainerDisabled) ? <div className=\"sort-container\"></div> : sortContainer}\n        <div\n          className=\"buttons-container\"\n        >\n          {(!isMultiSelectEnabled) ? null :\n            <Button\n              dataElement={DataElements.NOTE_MULTI_SELECT_MODE_BUTTON}\n              className={classNames({\n                active: isMultiSelectMode,\n              })}\n              disabled={notes.length === 0}\n              img=\"icon-annotation-select-multiple\"\n              onClick={() => {\n                toggleMultiSelectMode();\n              }}\n              title={t('component.multiSelectButton')}\n            />\n          }\n          <Button\n            dataElement=\"filterAnnotationButton\"\n            className={classNames({\n              filterAnnotationButton: true,\n              active: filterEnabled\n            })}\n            disabled={disableFilterAnnotation}\n            img=\"icon-comments-filter\"\n            onClick={() => dispatch(actions.openElement('filterModal'))}\n            title={t('component.filter')}\n          />\n        </div>\n      </DataElementWrapper>\n    </DataElementWrapper>\n  );\n\n  return (\n    <>\n      {customHeaderOptions &&\n        <CustomElement\n          render={customHeaderOptions.render}\n          renderArguments={[notes]}\n        />\n      }\n\n      {(!customHeaderOptions || !customHeaderOptions.overwriteDefaultHeader) &&\n        originalHeaderElement\n      }\n    </>\n  );\n}\n\nexport default NotesPanelHeader;","import NotesPanelHeader from './NotesPanelHeader';\n\nexport default NotesPanelHeader;","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport classNames from 'classnames';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport VirtualizedList from 'components/NotesPanel/VirtualizedList';\nimport NormalList from 'components/NotesPanel/NormalList';\nimport Note from 'components/Note';\nimport Icon from 'components/Icon';\nimport NoteContext from 'components/Note/Context';\nimport ListSeparator from 'components/ListSeparator';\nimport MultiSelectControls from 'components/NotesPanel/MultiSelectControls';\nimport CustomElement from 'components/CustomElement';\nimport NotesPanelHeader from 'components/NotesPanelHeader';\n\nimport DataElements from 'constants/dataElement';\n\nimport core from 'core';\nimport { getSortStrategies } from 'constants/sortStrategies';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobileSize } from 'helpers/getDeviceSize';\nimport { isIE } from 'helpers/device';\nimport ReplyAttachmentPicker from './ReplyAttachmentPicker';\n\nimport './NotesPanel.scss';\n\nconst NotesPanel = ({\n  currentLeftPanelWidth,\n  notes,\n  selectedNoteIds,\n  setSelectedNoteIds,\n  searchInput,\n  setSearchInput,\n  isMultiSelectMode,\n  setMultiSelectMode,\n  isMultiSelectedMap,\n  setIsMultiSelectedMap,\n  scrollToSelectedAnnot,\n  setScrollToSelectedAnnot,\n}) => {\n  const [\n    sortStrategy,\n    isOpen,\n    isDisabled,\n    pageLabels,\n    customNoteFilter,\n    currentNotesPanelWidth,\n    notesInLeftPanel,\n    isDocumentReadOnly,\n    showAnnotationNumbering,\n    enableNotesPanelVirtualizedList,\n    isInDesktopOnlyMode,\n    customEmptyPanel,\n    isNotesPanelMultiSelectEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getSortStrategy(state),\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.isElementDisabled(state, DataElements.NOTES_PANEL),\n      selectors.getPageLabels(state),\n      selectors.getCustomNoteFilter(state),\n      selectors.getNotesPanelWidth(state),\n      selectors.getNotesInLeftPanel(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isAnnotationNumberingEnabled(state),\n      selectors.getEnableNotesPanelVirtualizedList(state),\n      selectors.isInDesktopOnlyMode(state),\n      selectors.getNotesPanelCustomEmptyPanel(state),\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const currentWidth = currentLeftPanelWidth || currentNotesPanelWidth;\n\n  const dispatch = useDispatch();\n\n  const isMobile = isMobileSize();\n\n\n  const [multiSelectedAnnotations, setMultiSelectedAnnotations] = useState([]);\n  const [showMultiReply, setShowMultiReply] = useState(false);\n  const [showMultiState, setShowMultiState] = useState(false);\n  const [showMultiStyle, setShowMultiStyle] = useState(false);\n\n  const [curAnnotId, setCurAnnotId] = useState(undefined);\n\n\n  const [t] = useTranslation();\n  const listRef = useRef();\n  // a ref that is used to keep track of the current scroll position\n  // when the number of notesToRender goes over/below the threshold, we will unmount the current list and mount the other one\n  // this will result in losing the scroll position and we will use this ref to recover\n  const scrollTopRef = useRef(0);\n  const VIRTUALIZATION_THRESHOLD = enableNotesPanelVirtualizedList ? (isIE ? 25 : 100) : Infinity;\n\n\n  useEffect(() => {\n    const onAnnotationNumberingUpdated = (isEnabled) => {\n      dispatch(actions.setAnnotationNumbering(isEnabled));\n    };\n\n    core.addEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\n\n    return () => {\n      core.removeEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\n    };\n  }, []);\n\n  let singleSelectedNoteIndex = -1;\n\n  const handleScroll = (scrollTop) => {\n    if (scrollTop) {\n      scrollTopRef.current = scrollTop;\n    }\n    dispatch(actions.closeElement('annotationNoteConnectorLine'));\n  };\n\n  const filterNotesWithSearch = (note) => {\n    const content = note.getContents();\n    const authorName = core.getDisplayAuthor(note['Author']);\n    const annotationPreview = note.getCustomData('trn-annot-preview');\n\n    // didn't use regex here because the search input may form an invalid regex, e.g. *\n    return (\n      content?.toLowerCase().includes(searchInput.toLowerCase()) ||\n      authorName?.toLowerCase().includes(searchInput.toLowerCase()) ||\n      annotationPreview?.toLowerCase().includes(searchInput.toLowerCase())\n    );\n  };\n\n  const filterNote = (note) => {\n    let shouldRender = true;\n\n    if (customNoteFilter) {\n      shouldRender = shouldRender && customNoteFilter(note);\n    }\n\n    if (searchInput) {\n      const replies = note.getReplies();\n      // reply is also a kind of annotation\n      // https://docs.apryse.com/api/web/Core.AnnotationManager.html#createAnnotationReply__anchor\n      const noteAndReplies = [note, ...replies];\n\n      shouldRender = shouldRender && noteAndReplies.some(filterNotesWithSearch);\n    }\n    return shouldRender;\n  };\n\n  const notesToRender = getSortStrategies()[sortStrategy].getSortedNotes(notes).filter(filterNote);\n\n  useEffect(() => {\n    if (Object.keys(selectedNoteIds).length && singleSelectedNoteIndex !== -1) {\n      setTimeout(() => {\n        // wait for the previous selected annotation to resize() after closing before scrolling to the newly selected one\n        listRef.current?.scrollToRow(singleSelectedNoteIndex);\n      }, 0);\n    }\n  }, [selectedNoteIds]);\n\n  // expand a reply note when search content is match\n  const onlyReplyContainsSearchInput = (currNote) => {\n    if (Object.keys(selectedNoteIds).length) {\n      return false;\n    }\n    return (\n      searchInput &&\n      notesToRender\n        .filter((note) => {\n          return note.getReplies().some(filterNotesWithSearch);\n        })\n        .some((replies) => replies.Id === currNote.Id)\n    );\n  };\n\n  const [pendingEditTextMap, setPendingEditTextMap] = useState({});\n  const setPendingEditText = useCallback(\n    (pendingText, annotationID) => {\n      setPendingEditTextMap((map) => ({\n        ...map,\n        [annotationID]: pendingText,\n      }));\n    },\n    [setPendingEditTextMap],\n  );\n\n  const [pendingReplyMap, setPendingReplyMap] = useState({});\n  const setPendingReply = useCallback(\n    (pendingReply, annotationID) => {\n      setPendingReplyMap((map) => ({\n        ...map,\n        [annotationID]: pendingReply,\n      }));\n    },\n    [setPendingReplyMap],\n  );\n\n  const [pendingAttachmentMap, setPendingAttachmentMap] = useState({});\n  const addAttachments = (annotationID, attachments) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [...(map[annotationID] || []), ...attachments],\n    }));\n  };\n  const clearAttachments = (annotationID) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [],\n    }));\n  };\n  const deleteAttachment = (annotationID, attachment) => {\n    const attachmentList = pendingAttachmentMap[annotationID];\n    if (attachmentList?.length > 0) {\n      const index = attachmentList.indexOf(attachment);\n      if (index > -1) {\n        attachmentList.splice(index, 1);\n        setPendingAttachmentMap((map) => ({\n          ...map,\n          [annotationID]: [...attachmentList],\n        }));\n      }\n    }\n  };\n\n  useEffect(() => {\n    setMultiSelectedAnnotations(Object.values(isMultiSelectedMap));\n  }, [isMultiSelectedMap]);\n\n  const toggleMultiSelectMode = () => {\n    if (isMultiSelectMode) {\n      setMultiSelectMode(false);\n    } else {\n      setMultiSelectMode(true);\n    }\n  };\n\n  const renderChild = (\n    notes,\n    index,\n    // when we are virtualizing the notes, all of them will be absolutely positioned\n    // this function needs to be called by a Note component whenever its height changes\n    // to clear the cache(used by react-virtualized) and recompute the height so that each note\n    // can have the correct position\n    resize = () => {},\n  ) => {\n    let listSeparator = null;\n    const { shouldRenderSeparator, getSeparatorContent } = getSortStrategies()[sortStrategy];\n    const prevNote = index === 0 ? null : notes[index - 1];\n    const currNote = notes[index];\n\n    if (shouldRenderSeparator && getSeparatorContent && (!prevNote || shouldRenderSeparator(prevNote, currNote))) {\n      listSeparator = <ListSeparator renderContent={() => getSeparatorContent(prevNote, currNote, { pageLabels })} />;\n    }\n\n    // Collapse an expanded note when the top non-reply NoteContent is clicked\n    const handleNoteClicked = () => {\n      if (!isMultiSelectMode && selectedNoteIds[currNote.Id]) {\n        setSelectedNoteIds((currIds) => {\n          const clone = { ...currIds };\n          delete clone[currNote.Id];\n          return clone;\n        });\n        core.deselectAnnotation(currNote, activeDocumentViewerKey);\n      }\n    };\n\n    // can potentially optimize this a bit since a new reference will cause consumers to rerender\n    const contextValue = {\n      searchInput,\n      resize,\n      isSelected: selectedNoteIds[currNote.Id],\n      isContentEditable: core.canModifyContents(currNote, activeDocumentViewerKey) && !currNote.getContents(),\n      pendingEditTextMap,\n      setPendingEditText,\n      pendingReplyMap,\n      setPendingReply,\n      isDocumentReadOnly,\n      isNotePanelOpen: isOpen || notesInLeftPanel,\n      onTopNoteContentClicked: handleNoteClicked,\n      isExpandedFromSearch: onlyReplyContainsSearchInput(currNote),\n      scrollToSelectedAnnot,\n      sortStrategy,\n      showAnnotationNumbering,\n      setCurAnnotId,\n      pendingAttachmentMap,\n      clearAttachments,\n      deleteAttachment,\n      addAttachments,\n      documentViewerKey: activeDocumentViewerKey,\n    };\n\n    if (index === singleSelectedNoteIndex) {\n      setTimeout(() => {\n        setScrollToSelectedAnnot(false);\n        // open the 'annotationNoteConnectorLine' since the note it's pointing to is being rendered\n        dispatch(actions.openElement('annotationNoteConnectorLine'));\n      }, 0);\n    }\n\n    return (\n      // unfortunately we need to use an actual div instead of React.Fragment here so that we can pass the correct index to scrollToRow\n      // if this is a fragment then the listSeparator is rendered as a separate child, which means\n      // singleSelectedNoteIndex might not be the index of the selected note among all the child elements of the notes panel\n      <div role=\"listitem\" className=\"note-wrapper\">\n        {listSeparator}\n        <NoteContext.Provider value={contextValue}>\n          <Note\n            annotation={currNote}\n            isMultiSelected={!!isMultiSelectedMap[currNote.Id]}\n            isMultiSelectMode={isMultiSelectMode}\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\n            isInNotesPanel\n            handleMultiSelect={(checked) => {\n              if (checked) {\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\n                groupAnnots.forEach((groupAnnot) => {\n                  _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\n                });\n                setIsMultiSelectedMap(_isMultiSelectedMap);\n              } else {\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\n                groupAnnots.forEach((groupAnnot) => {\n                  delete _isMultiSelectedMap[groupAnnot.Id];\n                });\n                setIsMultiSelectedMap(_isMultiSelectedMap);\n              }\n            }}\n          />\n        </NoteContext.Provider>\n      </div>\n    );\n  };\n\n  const NoResults = (\n    <div className=\"no-results\">\n      <div>\n        <Icon className=\"empty-icon\" glyph=\"illustration - empty state - outlines\" />\n      </div>\n      <div className=\"msg\">{t('message.noResults')}</div>\n    </div>\n  );\n\n  const NoAnnotationsGlyph =\n    customEmptyPanel && customEmptyPanel.icon ? customEmptyPanel.icon : 'illustration - empty state - outlines';\n  const NoAnnotationsMessage =\n    customEmptyPanel && customEmptyPanel.message ? customEmptyPanel.message : t('message.noAnnotations');\n  const NoAnnotationsReadOnlyMessage =\n    customEmptyPanel && customEmptyPanel.readOnlyMessage\n      ? customEmptyPanel.readOnlyMessage\n      : t('message.noAnnotationsReadOnly');\n  const shouldRenderNoAnnotationsIcon = (customEmptyPanel && !customEmptyPanel.hideIcon) || !customEmptyPanel;\n  const shouldRenderCustomEmptyPanel = customEmptyPanel && customEmptyPanel.render;\n\n  const NoAnnotations = (\n    <div className=\"no-annotations\">\n      {shouldRenderCustomEmptyPanel ? (\n        <CustomElement render={customEmptyPanel.render} />\n      ) : (\n        <>\n          {shouldRenderNoAnnotationsIcon && (\n            <div>\n              <Icon className=\"empty-icon\" glyph={NoAnnotationsGlyph} />\n            </div>\n          )}\n          <div className=\"msg\">{isDocumentReadOnly ? NoAnnotationsReadOnlyMessage : NoAnnotationsMessage}</div>\n        </>\n      )}\n    </div>\n  );\n\n  const MultiSelectPlaceHolder = <div className=\"multi-select-place-holder\" />;\n\n  const MultiReplyPlaceHolder = <div className=\"multi-reply-place-holder\" />;\n\n  // keep track of the index of the single selected note in the sorted and filtered list\n  // in order to scroll it into view in this render effect\n  const ids = Object.keys(selectedNoteIds);\n  if (ids.length === 1) {\n    singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === ids[0]);\n  } else if (ids.length) {\n    // when selecting annotations that are grouped together, scroll to parent annotation that is in \"notesToRender\"\n    // selectedNoteIds will have every ID in the group, while only the parent is in notesToRender\n    const existingSelectedNotes = notesToRender.filter((note) => selectedNoteIds[note.Id]);\n\n    if (existingSelectedNotes.length) {\n      singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === existingSelectedNotes[0].Id);\n    }\n  }\n\n  let style = {};\n  if (isInDesktopOnlyMode || !isMobile) {\n    style = { width: `${currentWidth}px`, minWidth: `${currentWidth}px` };\n  }\n\n  const showNotePanel = !isDisabled && (isOpen || notesInLeftPanel);\n  return !showNotePanel ? null : (\n    <div className=\"notes-panel-container\">\n      <div\n        className={classNames({\n          Panel: true,\n          NotesPanel: true,\n        })}\n        style={style}\n        data-element=\"notesPanel\"\n        onMouseUp={() => core.deselectAllAnnotations}\n      >\n        {!isInDesktopOnlyMode && isMobile && !notesInLeftPanel && (\n          <div className=\"close-container\">\n            <div\n              className=\"close-icon-container\"\n              onClick={() => {\n                dispatch(actions.closeElements([DataElements.NOTES_PANEL]));\n              }}\n            >\n              <Icon glyph=\"ic_close_black_24px\" className=\"close-icon\" />\n            </div>\n          </div>\n        )}\n        <React.Fragment>\n          <NotesPanelHeader\n            notes={notesToRender}\n            disableFilterAnnotation={notes.length === 0}\n            setSearchInputHandler={setSearchInput}\n            isMultiSelectMode={isMultiSelectMode}\n            toggleMultiSelectMode={toggleMultiSelectMode}\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\n          />\n          {notesToRender.length === 0 ? (\n            notes.length === 0 ? (\n              NoAnnotations\n            ) : (\n              NoResults\n            )\n          ) : notesToRender.length <= VIRTUALIZATION_THRESHOLD ? (\n            <NormalList\n              ref={listRef}\n              notes={notesToRender}\n              onScroll={handleScroll}\n              initialScrollTop={scrollTopRef.current}\n            >\n              {renderChild}\n            </NormalList>\n          ) : (\n            <VirtualizedList\n              ref={listRef}\n              notes={notesToRender}\n              sortStrategy={sortStrategy}\n              onScroll={handleScroll}\n              initialScrollTop={scrollTopRef.current}\n              selectedIndex={singleSelectedNoteIndex}\n            >\n              {renderChild}\n            </VirtualizedList>\n          )}\n          {/* These two placeholders need to exist so that MultiSelectControls can\n          be overlayed with position absolute and extend into the right panel while\n          still being able to not have any notes cut off */}\n          {isMultiSelectMode ? (showMultiReply ? MultiReplyPlaceHolder : MultiSelectPlaceHolder) : null}\n        </React.Fragment>\n      </div>\n      {isMultiSelectMode && (\n        <MultiSelectControls\n          showMultiReply={showMultiReply}\n          setShowMultiReply={setShowMultiReply}\n          showMultiState={showMultiState}\n          setShowMultiState={setShowMultiState}\n          showMultiStyle={showMultiStyle}\n          setShowMultiStyle={setShowMultiStyle}\n          setMultiSelectMode={setMultiSelectMode}\n          isMultiSelectedMap={isMultiSelectedMap}\n          setIsMultiSelectedMap={setIsMultiSelectedMap}\n          multiSelectedAnnotations={multiSelectedAnnotations}\n        />\n      )}\n      <ReplyAttachmentPicker annotationId={curAnnotId} addAttachments={addAttachments} />\n    </div>\n  );\n};\n\nexport default NotesPanel;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport core from 'core';\nimport NotesPanel from './NotesPanel';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotePopupContainer(props) {\n  const [\n    isOpen,\n    notesInLeftPanel,\n    isNotesPanelMultiSelectEnabled,\n    isMultiViewerMode,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, 'notesPanel'),\n      selectors.getNotesInLeftPanel(state),\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\n      selectors.isMultiViewerMode(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const [searchInput, setSearchInput] = useState('');\n  const [isMultiSelectMode, setMultiSelectMode] = useState(false);\n  const [scrollToSelectedAnnot, setScrollToSelectedAnnot] = useState(false);\n\n\n  const [noteMap, setNoteMap] = useState({ 1: [], 2: [] });\n  const setNotes = useCallback((notes, documentViewerKey = activeDocumentViewerKey) => {\n    noteMap[documentViewerKey] = notes;\n    setNoteMap({ ...noteMap });\n  }, [activeDocumentViewerKey, noteMap[1], noteMap[2], setNoteMap]);\n  const notes = noteMap[activeDocumentViewerKey] || noteMap[1];\n\n  // the object will be in a shape of { [note.Id]: true }\n  // use a map here instead of an array to achieve an O(1) time complexity for checking if a note is selected\n  const [selectedNoteIdsMap, setSelectedNoteIdsMap] = useState({ 1: {}, 2: {}, });\n  const setSelectedNoteIds = useCallback((selectedNoteIds, documentViewerKey = activeDocumentViewerKey) => {\n    selectedNoteIdsMap[documentViewerKey] = selectedNoteIds;\n    setSelectedNoteIdsMap({ ...selectedNoteIdsMap });\n  }, [activeDocumentViewerKey, selectedNoteIdsMap[1], selectedNoteIdsMap[2], setSelectedNoteIdsMap]);\n  const selectedNoteIds = selectedNoteIdsMap[activeDocumentViewerKey] || selectedNoteIdsMap[1];\n\n  const [isMultiSelectedViewerMap, setIsMultiSelectedViewerMap] = useState({ 1: {}, 2: {}, });\n  const setIsMultiSelectedMap = useCallback((isMultiSelected, documentViewerKey = activeDocumentViewerKey) => {\n    isMultiSelectedViewerMap[documentViewerKey] = isMultiSelected;\n    setIsMultiSelectedViewerMap({ ...isMultiSelectedViewerMap });\n  }, [activeDocumentViewerKey, isMultiSelectedViewerMap[1], isMultiSelectedViewerMap[2], setIsMultiSelectedViewerMap]);\n  const isMultiSelectedMap = isMultiSelectedViewerMap[activeDocumentViewerKey] || isMultiSelectedViewerMap[1];\n\n\n  useEffect(() => {\n    const onDocumentUnloaded = (documentViewerKey = activeDocumentViewerKey) => () => {\n      setNotes([], documentViewerKey);\n      setSelectedNoteIds({});\n      setSearchInput('');\n    };\n    const _setNotes = (documentViewerKey = activeDocumentViewerKey) => () => {\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\n\n      if (groupedAnnots.length === selectedAnnotations.length) {\n        setMultiSelectMode(false);\n      }\n\n      setNotes(\n        core\n          .getAnnotationsList(documentViewerKey)\n          .filter(\n            (annot) => annot.Listable &&\n              !annot.isReply() &&\n              !annot.Hidden &&\n              !annot.isGrouped() &&\n              annot.ToolName !== window.Core.Tools.ToolNames.CROP &&\n              !annot.isContentEditPlaceholder(),\n          ),\n        documentViewerKey,\n      );\n    };\n\n    const setDocumentUnloaded1 = onDocumentUnloaded(1);\n    core.addEventListener('documentUnloaded', setDocumentUnloaded1);\n    const setNotes1 = _setNotes(1);\n    core.addEventListener('annotationChanged', setNotes1);\n    core.addEventListener('annotationHidden', setNotes1);\n    core.addEventListener('updateAnnotationPermission', setNotes1);\n    setNotes1();\n\n    let setDocumentUnloaded2;\n    let setNotes2;\n    if (isMultiViewerMode) {\n      setDocumentUnloaded2 = onDocumentUnloaded(2);\n      core.addEventListener('documentUnloaded', setDocumentUnloaded2, undefined, 2);\n      setNotes2 = _setNotes(2);\n      core.addEventListener('annotationChanged', setNotes2, undefined, 2);\n      core.addEventListener('annotationHidden', setNotes2, undefined, 2);\n      core.addEventListener('updateAnnotationPermission', setNotes2, undefined, 2);\n      setNotes2();\n    }\n\n    return () => {\n      if (isMultiViewerMode) {\n        core.removeEventListener('documentUnloaded', setDocumentUnloaded2, 2);\n        core.removeEventListener('annotationChanged', setNotes2, 2);\n        core.removeEventListener('annotationHidden', setNotes2, 2);\n        core.removeEventListener('updateAnnotationPermission', setNotes2, 2);\n      }\n      core.removeEventListener('documentUnloaded', onDocumentUnloaded);\n      core.removeEventListener('annotationChanged', _setNotes);\n      core.removeEventListener('annotationHidden', _setNotes);\n      core.removeEventListener('updateAnnotationPermission', _setNotes);\n    };\n  }, [isMultiViewerMode]);\n\n\n  useEffect(() => {\n    const onAnnotationSelected = (documentViewerKey = activeDocumentViewerKey) => (annotations, action) => {\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\n      const ids = {};\n      selectedAnnotations.forEach((annot) => {\n        ids[annot.Id] = true;\n      });\n      if (isOpen || notesInLeftPanel) {\n        setSelectedNoteIds(ids, documentViewerKey);\n        setScrollToSelectedAnnot(true);\n      }\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\n      if (isNotesPanelMultiSelectEnabled && action === 'selected' && selectedAnnotations.length > 1 && groupedAnnots.length !== selectedAnnotations.length) {\n        setMultiSelectMode(true);\n        selectedAnnotations.forEach((selectedAnnot) => {\n          isMultiSelectedMap[selectedAnnot.Id] = selectedAnnot;\n        });\n        setIsMultiSelectedMap({ ...isMultiSelectedMap }, documentViewerKey);\n      }\n    };\n    const onAnnotationSelected1 = onAnnotationSelected(1);\n    onAnnotationSelected1();\n    core.addEventListener('annotationSelected', onAnnotationSelected1);\n    let onAnnotationSelected2;\n    if (isMultiViewerMode) {\n      onAnnotationSelected2 = onAnnotationSelected(2);\n      onAnnotationSelected2();\n      core.addEventListener('annotationSelected', onAnnotationSelected2, undefined, 2);\n    }\n    return () => {\n      core.removeEventListener('annotationSelected', onAnnotationSelected1);\n      if (isMultiViewerMode) {\n        core.removeEventListener('annotationSelected', onAnnotationSelected2, 2);\n      }\n    };\n  }, [isOpen, notesInLeftPanel, isMultiSelectMode, isMultiSelectedMap, isNotesPanelMultiSelectEnabled, isMultiViewerMode]);\n\n  function getGroupedAnnots(selectedAnnotations) {\n    const mainAnnot = selectedAnnotations.find((annot) => annot.isGrouped());\n    const groupedAnnots = [];\n\n    // check if all selected annots are grouped annotations\n    if (mainAnnot) {\n      selectedAnnotations.forEach((annot) => {\n        if (mainAnnot['InReplyTo'] === annot['InReplyTo']\n          || mainAnnot['InReplyTo'] === annot['Id']) {\n          groupedAnnots.push(annot);\n        }\n      });\n    }\n    return groupedAnnots;\n  }\n\n  const passProps = {\n    notes,\n    setNotes,\n    getGroupedAnnots,\n    selectedNoteIds,\n    setSelectedNoteIds,\n    searchInput,\n    setSearchInput,\n    isMultiSelectMode,\n    setMultiSelectMode,\n    isMultiSelectedMap,\n    setIsMultiSelectedMap,\n    scrollToSelectedAnnot,\n    setScrollToSelectedAnnot,\n  };\n\n  // We wrap the element in a div so the tooltip works properly\n  return (\n    <NotesPanel {...props} {...passProps} />\n  );\n}\n\nexport default NotePopupContainer;\n","import NotesPanel from './NotesPanelContainer';\n\nexport default NotesPanel;\n"],"sourceRoot":""}